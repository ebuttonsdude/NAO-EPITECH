<?xml version="1.0" encoding="UTF-8" ?>
<ChoregrapheProject xmlns="http://www.aldebaran-robotics.com/schema/choregraphe/project.xsd" xar_version="3">
    <Box name="root" robot="" id="-1" tooltip="Root box of Choregraphe&apos;s project. Highest level possible." bitmap_expanded="1" plugin="" x="0" y="0">
        <bitmap>media/images/box/root.png</bitmap>
        <script language="4">
            <content>
                <![CDATA[]]>
</content>
        </script>
        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
        <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
            <watches />
            <BehaviorLayer name="behavior_layer1" mute="0">
                <BehaviorKeyframe name="keyframe1" index="1" bitmap="">
                    <Diagram scale="-1">
                        <Box name="Presentation" robot="" id="1" tooltip="animations" bitmap_expanded="1" plugin="" x="162" y="33">
                            <bitmap>media/images/box/movement/move.png</bitmap>
                            <script language="4">
                                <content>
                                    <![CDATA[]]>
</content>
                            </script>
                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                            <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                            <Timeline fps="50" resources_acquisition="0" size="120" enable="1" start_frame="0" end_frame="-1" scale="10">
                                <watches />
                                <BehaviorLayer name="anims" mute="0">
                                    <BehaviorKeyframe name="part1" index="1" bitmap="">
                                        <Diagram scale="98">
                                            <Box name="Stop" robot="" id="1" tooltip="Stop the timeline parent at the current frame index. Note that all the current behavior keyframes will still be loaded, and therefore the event logic will still work." bitmap_expanded="1" plugin="" x="86" y="150">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.stopTimelineParent()

    def onInput_onStop(self):
        ""]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline stops when a signal is received on this input." id="2" />
                                            </Box>
                                            <Box name="Anim_presentation_part1" robot="" id="2" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="126" y="23">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="10" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="LocalizedText" robot="" id="1" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="106" y="31">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "My name is Nao."
		sFrench = "\RSPD=100\ Je m'appelle Nao."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = "�??�??�??�?��?? ��? 이��?��? �?��?��??�??�?�"
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>My name is Nao.</english>
                                                                        <french>\RSPD=100\ Je m&apos;appelle Nao.</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean>�??�??�??�?��?? ��? 이��?��? �?��?��??�??�?�</korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="Say Text" robot="" id="2" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="429" y="31">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="15" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="24" value="-3.86964" />
                                                            <Key frame="40" value="-5.62747" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="24" value="8" />
                                                            <Key frame="40" value="-13.5377" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="21" value="65.9164" />
                                                            <Key frame="37" value="97.8211" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="21" value="7.55628" />
                                                            <Key frame="37" value="7.90785" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="21" value="-72.1615" />
                                                            <Key frame="37" value="-87.0152" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="21" value="-86.6588" />
                                                            <Key frame="37" value="-40.7794" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="37" value="-22.7664" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="37" value="0.59748" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="69.6126" />
                                                            <Key frame="33" value="40.9599" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="-5.97904" />
                                                            <Key frame="33" value="-2.02391" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="68.7289" />
                                                            <Key frame="33" value="25.9257" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="88.9488" />
                                                            <Key frame="33" value="89.1246" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="31.7265" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="0.637115" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="-14.3239" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="11.1647" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="9.67049" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="-5.10012" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="8.96255" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="-9.05044" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="-1.57965" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="12.1267" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="-4.39218" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="6.50639" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="2.37548" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="gotoPart2" robot="" id="7" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="272" y="22">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        pass

    def onInput_onStart(self):
        name = self.getParameter("frame name")
        self.log("%s -> %s" % (self.boxName, name))
        self.gotoAndStopParent(name)

    def onInput_onStop(self):
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                <Parameter name="frame name" inherits_from_parent="0" content_type="3" value="part2" default_value="" custom_choice="0" tooltip="" id="3" />
                                            </Box>
                                            <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="7" indexofinput="2" outputowner="2" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                    <BehaviorKeyframe name="part2" index="7" bitmap="">
                                        <Diagram scale="86">
                                            <Box name="gotoPart3" robot="" id="7" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="240" y="23">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        pass

    def onInput_onStart(self):
        name = self.getParameter("frame name")
        self.log("%s -> %s" % (self.boxName, name))
        self.gotoAndStopParent(name)

    def onInput_onStop(self):
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                <Parameter name="frame name" inherits_from_parent="0" content_type="3" value="part3" default_value="" custom_choice="0" tooltip="" id="3" />
                                            </Box>
                                            <Box name="Anim_presentation_part3" robot="" id="1" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="95" y="28">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="10" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="Say Text" robot="" id="2" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="428" y="31">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="85" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Box name="LocalizedText" robot="" id="1" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="117" y="31">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "I'm the first fully programmable \Pau=10\ hue \RSPD=110\ manoid \Pau=10\ \RSPD=100\ robot."
		sFrench = "Je suis le premier robot humanoïd entièrement programmable."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = ""
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>I&apos;m the first fully programmable \Pau=10\ hue \RSPD=110\ manoid \Pau=10\ \RSPD=100\ robot.</english>
                                                                        <french>Je suis le premier robot humanoïd entièrement programmable.</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean></korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="15" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy" index="54" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="-6.59428" />
                                                            <Key frame="35" value="-6.06693" />
                                                            <Key frame="51" value="-6.15482" />
                                                            <Key frame="67" value="-2.55126" />
                                                            <Key frame="88" value="-5.97904" />
                                                            <Key frame="107" value="-5.89115" />
                                                            <Key frame="124" value="-6.24272" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="-21.0964" />
                                                            <Key frame="35" value="-15.9108" />
                                                            <Key frame="51" value="6.06212" />
                                                            <Key frame="67" value="9.75358" />
                                                            <Key frame="88" value="-18.8112" />
                                                            <Key frame="107" value="-15.735" />
                                                            <Key frame="124" value="-19.9538" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="78.5728" />
                                                            <Key frame="30" value="79.5396" />
                                                            <Key frame="55" value="47.547" />
                                                            <Key frame="69" value="42.8888" />
                                                            <Key frame="84" value="60.1155" />
                                                            <Key frame="104" value="73.0356" />
                                                            <Key frame="121" value="78.0454" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="1.22808" />
                                                            <Key frame="30" value="4.83164" />
                                                            <Key frame="55" value="6.3258" />
                                                            <Key frame="69" value="14.8513" />
                                                            <Key frame="84" value="12.3903" />
                                                            <Key frame="104" value="6.06212" />
                                                            <Key frame="121" value="6.58948" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="-45.0909" />
                                                            <Key frame="30" value="-104.857" />
                                                            <Key frame="55" value="-35.5986" />
                                                            <Key frame="62" value="-49" />
                                                            <Key frame="69" value="-27.3367" />
                                                            <Key frame="84" value="-74.0072" />
                                                            <Key frame="104" value="-34.456" />
                                                            <Key frame="121" value="-36.2138" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="-47.3712" />
                                                            <Key frame="30" value="-56.4241" />
                                                            <Key frame="46" value="-84" />
                                                            <Key frame="55" value="-59.8519" />
                                                            <Key frame="62" value="-69" />
                                                            <Key frame="69" value="-56.6878" />
                                                            <Key frame="84" value="-54.842" />
                                                            <Key frame="104" value="-40.6036" />
                                                            <Key frame="121" value="-32.4296" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="11" />
                                                            <Key frame="46" value="57" />
                                                            <Key frame="55" value="38" />
                                                            <Key frame="69" value="14" />
                                                            <Key frame="84" value="-57" />
                                                            <Key frame="104" value="-29" />
                                                            <Key frame="121" value="-27.0731" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="0.224389" />
                                                            <Key frame="55" value="0.390909" />
                                                            <Key frame="84" value="0.39348" />
                                                            <Key frame="104" value="0.181818" />
                                                            <Key frame="121" value="0.181117" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="13" value="79.105" />
                                                            <Key frame="30" value="64.0755" />
                                                            <Key frame="46" value="46.3213" />
                                                            <Key frame="62" value="45.8819" />
                                                            <Key frame="69" value="44.8272" />
                                                            <Key frame="82" value="55.9015" />
                                                            <Key frame="100" value="88.8609" />
                                                            <Key frame="117" value="89.5641" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="13" value="-1.40867" />
                                                            <Key frame="30" value="-5.10012" />
                                                            <Key frame="46" value="-19.0749" />
                                                            <Key frame="62" value="-21.7117" />
                                                            <Key frame="69" value="-20.5691" />
                                                            <Key frame="82" value="-13.2741" />
                                                            <Key frame="100" value="-2.81494" />
                                                            <Key frame="117" value="-4.04542" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="13" value="46.0529" />
                                                            <Key frame="30" value="103.182" />
                                                            <Key frame="46" value="28.2987" />
                                                            <Key frame="55" value="61" />
                                                            <Key frame="62" value="40.1641" />
                                                            <Key frame="69" value="67.5863" />
                                                            <Key frame="82" value="102.479" />
                                                            <Key frame="100" value="73.2993" />
                                                            <Key frame="117" value="72.6841" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="13" value="69.1732" />
                                                            <Key frame="30" value="57.923" />
                                                            <Key frame="37" value="85" />
                                                            <Key frame="46" value="66.1849" />
                                                            <Key frame="55" value="70" />
                                                            <Key frame="62" value="52.3859" />
                                                            <Key frame="69" value="74.183" />
                                                            <Key frame="82" value="60.0325" />
                                                            <Key frame="100" value="38.8505" />
                                                            <Key frame="117" value="29.534" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="54.2268" />
                                                            <Key frame="46" value="-32" />
                                                            <Key frame="69" value="-24" />
                                                            <Key frame="82" value="37" />
                                                            <Key frame="100" value="6" />
                                                            <Key frame="117" value="5.18321" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="0.156753" />
                                                            <Key frame="46" value="0.509091" />
                                                            <Key frame="82" value="0.6" />
                                                            <Key frame="100" value="0.209091" />
                                                            <Key frame="117" value="0.20948" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="-17.2244" />
                                                            <Key frame="83" value="-17.5759" />
                                                            <Key frame="119" value="-17.6638" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="12.5709" />
                                                            <Key frame="83" value="7.29742" />
                                                            <Key frame="119" value="7.29742" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="18.1081" />
                                                            <Key frame="83" value="18.6355" />
                                                            <Key frame="119" value="18.6355" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="-2.55126" />
                                                            <Key frame="83" value="-2.46337" />
                                                            <Key frame="119" value="-2.55126" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="2.63435" />
                                                            <Key frame="83" value="1.14019" />
                                                            <Key frame="119" value="0.964405" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="-9.66569" />
                                                            <Key frame="83" value="-6.50158" />
                                                            <Key frame="119" value="-6.50158" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="-6.06212" />
                                                            <Key frame="83" value="-11.3356" />
                                                            <Key frame="119" value="-11.3356" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="21.2674" />
                                                            <Key frame="83" value="19.8611" />
                                                            <Key frame="119" value="19.8611" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="-4.39218" />
                                                            <Key frame="83" value="-4.48007" />
                                                            <Key frame="119" value="-4.48007" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="1.67235" />
                                                            <Key frame="83" value="1.40867" />
                                                            <Key frame="119" value="1.40867" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="30" value="4.92434" />
                                                            <Key frame="83" value="8.61579" />
                                                            <Key frame="119" value="8.61579" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="7" indexofinput="2" outputowner="1" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                    <BehaviorKeyframe name="part3" index="14" bitmap="">
                                        <Diagram scale="86">
                                            <Box name="Anim_presentation_part4" robot="" id="1" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="125" y="42">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="10" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="LocalizedText" robot="" id="1" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="102" y="34">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "I'm autonomous, and I can connect to the internet, using my y feye connection."
		sFrench = "Je suis autonome et me connecte à internet, grâce au oui fi."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = ""
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>I&apos;m autonomous, and I can connect to the internet, using my y feye connection.</english>
                                                                        <french>Je suis autonome et me connecte à internet, grâce au oui fi.</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean></korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="Say Text" robot="" id="2" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="425" y="34">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="6" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy" index="55" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy_copy" index="91" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="22" value="-4.83645" />
                                                            <Key frame="41" value="7.11683" />
                                                            <Key frame="56" value="-5.27591" />
                                                            <Key frame="74" value="-3.86964" />
                                                            <Key frame="100" value="2.37067" />
                                                            <Key frame="129" value="26.8925" />
                                                            <Key frame="162" value="26.6288" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="22" value="13.7966" />
                                                            <Key frame="41" value="24.3436" />
                                                            <Key frame="56" value="-22.9421" />
                                                            <Key frame="74" value="-20.3054" />
                                                            <Key frame="100" value="11.2477" />
                                                            <Key frame="129" value="-19.5144" />
                                                            <Key frame="162" value="-19.6902" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="88.8561" />
                                                            <Key frame="38" value="93.3386" />
                                                            <Key frame="53" value="78.1333" />
                                                            <Key frame="71" value="53.1721" />
                                                            <Key frame="85" value="39.1973" />
                                                            <Key frame="97" value="-19.778" />
                                                            <Key frame="126" value="-61.6145" />
                                                            <Key frame="159" value="-60.384" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="5.88634" />
                                                            <Key frame="38" value="6.23791" />
                                                            <Key frame="53" value="1.84332" />
                                                            <Key frame="71" value="6.3258" />
                                                            <Key frame="85" value="14.2361" />
                                                            <Key frame="97" value="1.40386" />
                                                            <Key frame="126" value="47.4591" />
                                                            <Key frame="159" value="61.5218" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="-88.773" />
                                                            <Key frame="38" value="-95.1891" />
                                                            <Key frame="53" value="-44.2998" />
                                                            <Key frame="71" value="-30.5008" />
                                                            <Key frame="85" value="-46.585" />
                                                            <Key frame="97" value="19.5975" />
                                                            <Key frame="126" value="-20.7449" />
                                                            <Key frame="159" value="-20.0417" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="-32.7812" />
                                                            <Key frame="38" value="-27.7714" />
                                                            <Key frame="53" value="-67.2348" />
                                                            <Key frame="71" value="-73.2114" />
                                                            <Key frame="85" value="-87.7135" />
                                                            <Key frame="97" value="-83.0553" />
                                                            <Key frame="126" value="-9.40201" />
                                                            <Key frame="159" value="-14.7634" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="3.2" />
                                                            <Key frame="71" value="-83" />
                                                            <Key frame="97" value="-19" />
                                                            <Key frame="126" value="-86" />
                                                            <Key frame="159" value="-85.7847" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="0.174208" />
                                                            <Key frame="71" value="0.345455" />
                                                            <Key frame="97" value="0.218182" />
                                                            <Key frame="126" value="0.749091" />
                                                            <Key frame="159" value="0.750205" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="47.2003" />
                                                            <Key frame="34" value="41.751" />
                                                            <Key frame="49" value="35.247" />
                                                            <Key frame="67" value="-15.8181" />
                                                            <Key frame="81" value="41.8389" />
                                                            <Key frame="93" value="53.2648" />
                                                            <Key frame="122" value="33.7528" />
                                                            <Key frame="155" value="43.0693" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="-0.498473" />
                                                            <Key frame="34" value="-0.498473" />
                                                            <Key frame="49" value="-0.498473" />
                                                            <Key frame="67" value="-1.58446" />
                                                            <Key frame="81" value="-10.0221" />
                                                            <Key frame="93" value="-0.498473" />
                                                            <Key frame="122" value="-0.529755" />
                                                            <Key frame="155" value="-0.881321" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="38.4063" />
                                                            <Key frame="34" value="37.5274" />
                                                            <Key frame="49" value="21.8826" />
                                                            <Key frame="67" value="-15.2077" />
                                                            <Key frame="81" value="43.1524" />
                                                            <Key frame="93" value="22.6737" />
                                                            <Key frame="122" value="43.2403" />
                                                            <Key frame="155" value="36.2969" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="89.1246" />
                                                            <Key frame="34" value="89.0367" />
                                                            <Key frame="49" value="89.2125" />
                                                            <Key frame="67" value="89.5017" />
                                                            <Key frame="81" value="84.4664" />
                                                            <Key frame="93" value="73.5678" />
                                                            <Key frame="122" value="87.0152" />
                                                            <Key frame="155" value="88.6852" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="46" />
                                                            <Key frame="67" value="-5" />
                                                            <Key frame="93" value="104" />
                                                            <Key frame="122" value="71" />
                                                            <Key frame="155" value="71.8051" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="0.6" />
                                                            <Key frame="67" value="0.825455" />
                                                            <Key frame="93" value="0.236364" />
                                                            <Key frame="122" value="0.763636" />
                                                            <Key frame="155" value="0.514873" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-20.9158" />
                                                            <Key frame="69" value="-20.0369" />
                                                            <Key frame="83" value="-20.0369" />
                                                            <Key frame="124" value="-19.8611" />
                                                            <Key frame="157" value="-19.7732" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="7.56109" />
                                                            <Key frame="69" value="11.7799" />
                                                            <Key frame="83" value="11.7799" />
                                                            <Key frame="124" value="0.441863" />
                                                            <Key frame="157" value="0.441863" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="8.35212" />
                                                            <Key frame="69" value="11.4283" />
                                                            <Key frame="83" value="11.4283" />
                                                            <Key frame="124" value="17.1413" />
                                                            <Key frame="157" value="17.1413" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-2.81494" />
                                                            <Key frame="69" value="-2.81494" />
                                                            <Key frame="83" value="-2.81494" />
                                                            <Key frame="124" value="-4.83645" />
                                                            <Key frame="157" value="-4.83645" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="8.17153" />
                                                            <Key frame="69" value="7.99574" />
                                                            <Key frame="83" value="7.99574" />
                                                            <Key frame="124" value="6.41369" />
                                                            <Key frame="157" value="6.41369" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-6.50158" />
                                                            <Key frame="69" value="-8.69888" />
                                                            <Key frame="83" value="-8.69888" />
                                                            <Key frame="124" value="-2.19489" />
                                                            <Key frame="157" value="-2.28278" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-5.2711" />
                                                            <Key frame="69" value="-4.30429" />
                                                            <Key frame="83" value="-4.30429" />
                                                            <Key frame="124" value="-19.6853" />
                                                            <Key frame="157" value="-19.6853" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="11.5114" />
                                                            <Key frame="69" value="16.697" />
                                                            <Key frame="83" value="16.7849" />
                                                            <Key frame="124" value="13.0056" />
                                                            <Key frame="157" value="12.9177" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-4.48007" />
                                                            <Key frame="69" value="-4.39218" />
                                                            <Key frame="83" value="-4.39218" />
                                                            <Key frame="124" value="-4.39218" />
                                                            <Key frame="157" value="-4.30429" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="6.94585" />
                                                            <Key frame="69" value="5.53958" />
                                                            <Key frame="83" value="5.80326" />
                                                            <Key frame="124" value="9.14314" />
                                                            <Key frame="157" value="9.23104" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="4.83645" />
                                                            <Key frame="69" value="3.95753" />
                                                            <Key frame="83" value="3.86964" />
                                                            <Key frame="124" value="13.3619" />
                                                            <Key frame="157" value="13.3619" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="gotoPart4" robot="" id="7" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="276" y="42">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        pass

    def onInput_onStart(self):
        name = self.getParameter("frame name")
        self.log("%s -> %s" % (self.boxName, name))
        self.gotoAndStopParent(name)

    def onInput_onStop(self):
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                <Parameter name="frame name" inherits_from_parent="0" content_type="3" value="part4" default_value="" custom_choice="0" tooltip="" id="3" />
                                            </Box>
                                            <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="7" indexofinput="2" outputowner="1" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                    <BehaviorKeyframe name="part4" index="21" bitmap="">
                                        <Diagram scale="86">
                                            <Box name="Anim_presentation_part5_1" robot="" id="1" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="131" y="36">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="400" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="4" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy" index="46" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy_copy" index="98" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy_copy_copy" index="143" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy_copy_copy_copy" index="170" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy_copy_copy_copy_copy" index="216" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="1.67235" />
                                                            <Key frame="43" value="3.69386" />
                                                            <Key frame="63" value="4.66067" />
                                                            <Key frame="87" value="5.3638" />
                                                            <Key frame="103" value="4.92434" />
                                                            <Key frame="118" value="2.90283" />
                                                            <Key frame="132" value="26.7215" />
                                                            <Key frame="150" value="-4.30429" />
                                                            <Key frame="169" value="-10.0173" />
                                                            <Key frame="195" value="-14.7634" />
                                                            <Key frame="221" value="-7.73207" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="2.81013" />
                                                            <Key frame="43" value="-18.0202" />
                                                            <Key frame="63" value="-18.8991" />
                                                            <Key frame="87" value="2.81013" />
                                                            <Key frame="103" value="-17.4929" />
                                                            <Key frame="118" value="-24.1726" />
                                                            <Key frame="132" value="5.44688" />
                                                            <Key frame="150" value="-23.1179" />
                                                            <Key frame="169" value="11.1598" />
                                                            <Key frame="195" value="28.914" />
                                                            <Key frame="221" value="-26.7215" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="20.4764" />
                                                            <Key frame="36" value="52.3859" />
                                                            <Key frame="56" value="65.7454" />
                                                            <Key frame="73" value="82.3569" />
                                                            <Key frame="96" value="80.0718" />
                                                            <Key frame="111" value="77.3471" />
                                                            <Key frame="125" value="95.1891" />
                                                            <Key frame="143" value="89.8278" />
                                                            <Key frame="162" value="81.1265" />
                                                            <Key frame="188" value="61.7024" />
                                                            <Key frame="203" value="68.2943" />
                                                            <Key frame="214" value="76.8198" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="7.64418" />
                                                            <Key frame="36" value="1.23289" />
                                                            <Key frame="56" value="1.67235" />
                                                            <Key frame="73" value="2.11181" />
                                                            <Key frame="96" value="3.2544" />
                                                            <Key frame="111" value="0.498473" />
                                                            <Key frame="125" value="14.153" />
                                                            <Key frame="143" value="5.45169" />
                                                            <Key frame="162" value="10.7252" />
                                                            <Key frame="188" value="4.39699" />
                                                            <Key frame="203" value="1.23289" />
                                                            <Key frame="214" value="1.40867" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="-78.5776" />
                                                            <Key frame="36" value="-87.4499" />
                                                            <Key frame="56" value="-42.3614" />
                                                            <Key frame="73" value="-95.2722" />
                                                            <Key frame="96" value="-119.496" />
                                                            <Key frame="111" value="-42.8888" />
                                                            <Key frame="125" value="-99.0516" />
                                                            <Key frame="143" value="-49.5685" />
                                                            <Key frame="162" value="-91.7566" />
                                                            <Key frame="188" value="-48.8654" />
                                                            <Key frame="203" value="-38.3184" />
                                                            <Key frame="214" value="-47.7228" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="-68.3774" />
                                                            <Key frame="36" value="-53.6164" />
                                                            <Key frame="56" value="-89.0367" />
                                                            <Key frame="73" value="-52.8253" />
                                                            <Key frame="96" value="-54.6711" />
                                                            <Key frame="111" value="-68.9095" />
                                                            <Key frame="125" value="-36.5654" />
                                                            <Key frame="143" value="-58.0109" />
                                                            <Key frame="162" value="-72.7768" />
                                                            <Key frame="188" value="-89.1246" />
                                                            <Key frame="203" value="-67.1517" />
                                                            <Key frame="214" value="-56.7805" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-51" />
                                                            <Key frame="56" value="-39" />
                                                            <Key frame="73" value="-25" />
                                                            <Key frame="111" value="-66" />
                                                            <Key frame="143" value="-65.4769" />
                                                            <Key frame="162" value="-34.5" />
                                                            <Key frame="188" value="-33.3965" />
                                                            <Key frame="214" value="5" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="0.794545" />
                                                            <Key frame="56" value="0.163636" />
                                                            <Key frame="73" value="0.170571" />
                                                            <Key frame="111" value="0.170208" />
                                                            <Key frame="143" value="0.170208" />
                                                            <Key frame="162" value="0.309091" />
                                                            <Key frame="188" value="0.164026" />
                                                            <Key frame="214" value="0.214545" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="22" value="29.6219" />
                                                            <Key frame="40" value="8.17153" />
                                                            <Key frame="60" value="16.3455" />
                                                            <Key frame="77" value="64.6859" />
                                                            <Key frame="100" value="84.2858" />
                                                            <Key frame="115" value="83.8463" />
                                                            <Key frame="129" value="74.0903" />
                                                            <Key frame="147" value="97.909" />
                                                            <Key frame="166" value="75.7603" />
                                                            <Key frame="192" value="43.504" />
                                                            <Key frame="207" value="53.5237" />
                                                            <Key frame="218" value="60.1155" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="22" value="-6.06693" />
                                                            <Key frame="40" value="-1.14019" />
                                                            <Key frame="60" value="-0.964405" />
                                                            <Key frame="77" value="-0.964405" />
                                                            <Key frame="100" value="-5.44688" />
                                                            <Key frame="115" value="-2.37067" />
                                                            <Key frame="129" value="-1.22808" />
                                                            <Key frame="147" value="-1.0523" />
                                                            <Key frame="166" value="-1.40386" />
                                                            <Key frame="192" value="-15.3786" />
                                                            <Key frame="207" value="-10.4567" />
                                                            <Key frame="218" value="-13.445" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="22" value="64.2464" />
                                                            <Key frame="40" value="34.7196" />
                                                            <Key frame="60" value="42.8936" />
                                                            <Key frame="77" value="92.1129" />
                                                            <Key frame="100" value="110.307" />
                                                            <Key frame="115" value="61.8782" />
                                                            <Key frame="129" value="40.4326" />
                                                            <Key frame="147" value="115.756" />
                                                            <Key frame="166" value="54.2316" />
                                                            <Key frame="192" value="42.8057" />
                                                            <Key frame="207" value="50.8038" />
                                                            <Key frame="218" value="53.88" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="22" value="65.0423" />
                                                            <Key frame="40" value="89.3835" />
                                                            <Key frame="60" value="89.3835" />
                                                            <Key frame="77" value="68.8168" />
                                                            <Key frame="100" value="57.9182" />
                                                            <Key frame="115" value="45.4376" />
                                                            <Key frame="129" value="56.7757" />
                                                            <Key frame="147" value="43.2403" />
                                                            <Key frame="166" value="42.713" />
                                                            <Key frame="192" value="20.3885" />
                                                            <Key frame="207" value="24.4315" />
                                                            <Key frame="218" value="34.6269" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="40" value="88" />
                                                            <Key frame="60" value="68" />
                                                            <Key frame="77" value="18.3" />
                                                            <Key frame="115" value="-1" />
                                                            <Key frame="147" value="-2.01911" />
                                                            <Key frame="166" value="16" />
                                                            <Key frame="192" value="19.2507" />
                                                            <Key frame="218" value="39" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="40" value="0.4" />
                                                            <Key frame="60" value="0.176364" />
                                                            <Key frame="77" value="0.176026" />
                                                            <Key frame="115" value="0.109091" />
                                                            <Key frame="147" value="0.111663" />
                                                            <Key frame="166" value="0.110572" />
                                                            <Key frame="192" value="0.761818" />
                                                            <Key frame="218" value="0.709091" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="-17.3123" />
                                                            <Key frame="82" value="-18.9822" />
                                                            <Key frame="113" value="-19.8611" />
                                                            <Key frame="145" value="-19.6853" />
                                                            <Key frame="164" value="-19.7732" />
                                                            <Key frame="190" value="-26.8046" />
                                                            <Key frame="216" value="-23.2889" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="13.3571" />
                                                            <Key frame="82" value="5.09532" />
                                                            <Key frame="113" value="13.7966" />
                                                            <Key frame="145" value="-4.83645" />
                                                            <Key frame="164" value="4.56797" />
                                                            <Key frame="190" value="-10.0221" />
                                                            <Key frame="216" value="-3.34229" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="17.9275" />
                                                            <Key frame="82" value="13.2692" />
                                                            <Key frame="113" value="10.6325" />
                                                            <Key frame="145" value="15.2029" />
                                                            <Key frame="164" value="10.8083" />
                                                            <Key frame="190" value="-37.0048" />
                                                            <Key frame="216" value="-34.5438" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="-4.30429" />
                                                            <Key frame="82" value="-4.48007" />
                                                            <Key frame="113" value="-4.48007" />
                                                            <Key frame="145" value="-4.39218" />
                                                            <Key frame="164" value="-4.39218" />
                                                            <Key frame="190" value="64.1634" />
                                                            <Key frame="216" value="60.9993" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="5.27591" />
                                                            <Key frame="82" value="8.17633" />
                                                            <Key frame="113" value="9.5826" />
                                                            <Key frame="145" value="7.73688" />
                                                            <Key frame="164" value="7.82477" />
                                                            <Key frame="190" value="-14.5876" />
                                                            <Key frame="216" value="-20.1248" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="-9.67049" />
                                                            <Key frame="82" value="-4.66067" />
                                                            <Key frame="113" value="-10.2857" />
                                                            <Key frame="145" value="1.22808" />
                                                            <Key frame="164" value="-5.01223" />
                                                            <Key frame="190" value="-2.28759" />
                                                            <Key frame="216" value="-3.78175" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="-7.12163" />
                                                            <Key frame="82" value="-11.8678" />
                                                            <Key frame="113" value="-3.07861" />
                                                            <Key frame="145" value="-22.5027" />
                                                            <Key frame="164" value="-12.3951" />
                                                            <Key frame="190" value="-18.5476" />
                                                            <Key frame="216" value="-9.5826" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="19.1628" />
                                                            <Key frame="82" value="11.692" />
                                                            <Key frame="113" value="12.0436" />
                                                            <Key frame="145" value="9.5826" />
                                                            <Key frame="164" value="9.31893" />
                                                            <Key frame="190" value="-52.7326" />
                                                            <Key frame="216" value="-45.3497" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="-5.10012" />
                                                            <Key frame="82" value="-5.18802" />
                                                            <Key frame="113" value="-5.18802" />
                                                            <Key frame="145" value="-5.18802" />
                                                            <Key frame="164" value="-5.18802" />
                                                            <Key frame="190" value="83.2311" />
                                                            <Key frame="216" value="69.2563" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="5.00742" />
                                                            <Key frame="82" value="9.4899" />
                                                            <Key frame="113" value="9.57779" />
                                                            <Key frame="145" value="11.4235" />
                                                            <Key frame="164" value="9.40201" />
                                                            <Key frame="190" value="-24.5242" />
                                                            <Key frame="216" value="-20.2175" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="38" value="6.15002" />
                                                            <Key frame="82" value="9.22623" />
                                                            <Key frame="113" value="3.60116" />
                                                            <Key frame="145" value="15.9939" />
                                                            <Key frame="164" value="10.2809" />
                                                            <Key frame="190" value="7.90785" />
                                                            <Key frame="216" value="5.53477" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="stand_shoot_leftFoot" robot="" id="3" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="268" y="33">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="400" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="29" value="0.266079" />
                                                            <Key frame="67" value="-0.0854875" />
                                                            <Key frame="80" value="0.178188" />
                                                            <Key frame="106" value="-2.81013" />
                                                            <Key frame="125" value="-1.93121" />
                                                            <Key frame="145" value="-1.40867" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="29" value="2.5" />
                                                            <Key frame="67" value="15" />
                                                            <Key frame="80" value="10" />
                                                            <Key frame="106" value="-16" />
                                                            <Key frame="125" value="-15" />
                                                            <Key frame="145" value="-13.8893" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="27" value="85.1695" />
                                                            <Key frame="65" value="77.8745" />
                                                            <Key frame="78" value="81.2144" />
                                                            <Key frame="104" value="91.5856" />
                                                            <Key frame="123" value="93.8708" />
                                                            <Key frame="143" value="85.9557" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="27" value="1.32078" />
                                                            <Key frame="65" value="1.145" />
                                                            <Key frame="78" value="7.56109" />
                                                            <Key frame="104" value="6.77007" />
                                                            <Key frame="123" value="1.32078" />
                                                            <Key frame="143" value="2.01911" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="27" value="-66.0922" />
                                                            <Key frame="65" value="-54.6663" />
                                                            <Key frame="78" value="-52.0295" />
                                                            <Key frame="104" value="-70.4868" />
                                                            <Key frame="123" value="-89.2077" />
                                                            <Key frame="143" value="-65.5696" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="27" value="-42.4541" />
                                                            <Key frame="65" value="-59.2414" />
                                                            <Key frame="78" value="-78.4897" />
                                                            <Key frame="104" value="-58.4504" />
                                                            <Key frame="123" value="-40.5205" />
                                                            <Key frame="143" value="-21.619" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="27" value="14" />
                                                            <Key frame="65" value="13.7135" />
                                                            <Key frame="78" value="12.6588" />
                                                            <Key frame="104" value="11.6041" />
                                                            <Key frame="123" value="10.901" />
                                                            <Key frame="143" value="-7.29742" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="27" value="0.181818" />
                                                            <Key frame="65" value="0.187662" />
                                                            <Key frame="78" value="0.188753" />
                                                            <Key frame="104" value="0.181844" />
                                                            <Key frame="123" value="0.186207" />
                                                            <Key frame="143" value="0.107299" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="87.5378" />
                                                            <Key frame="63" value="83.6705" />
                                                            <Key frame="76" value="84.4615" />
                                                            <Key frame="102" value="71.102" />
                                                            <Key frame="121" value="87.0104" />
                                                            <Key frame="141" value="88.773" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="-7.02893" />
                                                            <Key frame="63" value="-2.37067" />
                                                            <Key frame="76" value="-8.34731" />
                                                            <Key frame="102" value="-7.99574" />
                                                            <Key frame="121" value="-8.4352" />
                                                            <Key frame="141" value="-2.28759" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="57.132" />
                                                            <Key frame="63" value="49.4854" />
                                                            <Key frame="76" value="52.1222" />
                                                            <Key frame="102" value="36.2138" />
                                                            <Key frame="121" value="48.6065" />
                                                            <Key frame="141" value="85.7799" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="36.7363" />
                                                            <Key frame="63" value="66.0922" />
                                                            <Key frame="76" value="79.1001" />
                                                            <Key frame="102" value="77.9576" />
                                                            <Key frame="121" value="55.0178" />
                                                            <Key frame="141" value="26.1062" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="-5" />
                                                            <Key frame="63" value="-4.2164" />
                                                            <Key frame="76" value="-2.89802" />
                                                            <Key frame="102" value="-3.60116" />
                                                            <Key frame="121" value="3.2544" />
                                                            <Key frame="141" value="0.0854875" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="25" value="0.0738444" />
                                                            <Key frame="63" value="0.0778444" />
                                                            <Key frame="76" value="0.0756625" />
                                                            <Key frame="102" value="0.0731171" />
                                                            <Key frame="121" value="0.0760262" />
                                                            <Key frame="141" value="0.224025" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="-10.3688" />
                                                            <Key frame="64" value="-14.4997" />
                                                            <Key frame="77" value="-3.60116" />
                                                            <Key frame="84" value="-2.89802" />
                                                            <Key frame="103" value="-10.7204" />
                                                            <Key frame="122" value="-13.9724" />
                                                            <Key frame="142" value="-18.2791" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="-19.6902" />
                                                            <Key frame="64" value="-21.0964" />
                                                            <Key frame="77" value="-21.0964" />
                                                            <Key frame="84" value="-20.9206" />
                                                            <Key frame="103" value="-21.0085" />
                                                            <Key frame="122" value="-20.9206" />
                                                            <Key frame="142" value="5.80326" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="13.2692" />
                                                            <Key frame="64" value="6.06212" />
                                                            <Key frame="77" value="7" />
                                                            <Key frame="84" value="4.83164" />
                                                            <Key frame="103" value="5.18321" />
                                                            <Key frame="122" value="10.9841" />
                                                            <Key frame="142" value="12.0436" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="-5" />
                                                            <Key frame="44" value="-5" />
                                                            <Key frame="64" value="-5.29104" />
                                                            <Key frame="77" value="-4.56797" />
                                                            <Key frame="84" value="-4.56797" />
                                                            <Key frame="103" value="-4.48007" />
                                                            <Key frame="122" value="-4.39218" />
                                                            <Key frame="142" value="-5.27591" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="1.84813" />
                                                            <Key frame="44" value="1" />
                                                            <Key frame="64" value="1" />
                                                            <Key frame="103" value="2" />
                                                            <Key frame="122" value="2" />
                                                            <Key frame="142" value="6.58948" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="19" />
                                                            <Key frame="44" value="21" />
                                                            <Key frame="64" value="21" />
                                                            <Key frame="103" value="21" />
                                                            <Key frame="122" value="15.2908" />
                                                            <Key frame="142" value="-4.83164" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="-27" />
                                                            <Key frame="64" value="-30.9403" />
                                                            <Key frame="77" value="-18.4597" />
                                                            <Key frame="84" value="-7.03374" />
                                                            <Key frame="103" value="-20.8327" />
                                                            <Key frame="122" value="-22.5906" />
                                                            <Key frame="142" value="-3.33748" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="9.31893" />
                                                            <Key frame="64" value="-22.7616" />
                                                            <Key frame="77" value="-64.1" />
                                                            <Key frame="84" value="-64.1586" />
                                                            <Key frame="103" value="-45" />
                                                            <Key frame="122" value="-16.697" />
                                                            <Key frame="142" value="12.2145" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="-5.10012" />
                                                            <Key frame="64" value="113.202" />
                                                            <Key frame="71" value="113" />
                                                            <Key frame="77" value="71" />
                                                            <Key frame="84" value="14" />
                                                            <Key frame="103" value="88" />
                                                            <Key frame="122" value="35.7695" />
                                                            <Key frame="142" value="-4.39218" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="5" />
                                                            <Key frame="33" value="-5" />
                                                            <Key frame="44" value="-34" />
                                                            <Key frame="56" value="-23" />
                                                            <Key frame="64" value="7" />
                                                            <Key frame="71" value="-3" />
                                                            <Key frame="77" value="-7" />
                                                            <Key frame="84" value="14" />
                                                            <Key frame="92" value="-7" />
                                                            <Key frame="103" value="-27.3367" />
                                                            <Key frame="122" value="-13" />
                                                            <Key frame="142" value="6.50639" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="26" value="23" />
                                                            <Key frame="64" value="6.23791" />
                                                            <Key frame="77" value="7.90785" />
                                                            <Key frame="84" value="0" />
                                                            <Key frame="103" value="10.3688" />
                                                            <Key frame="122" value="16.0818" />
                                                            <Key frame="142" value="2.90283" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="LocalizedText" robot="" id="4" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="101" y="178">
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "I can recognize your face, answer your questions, \\Pau=300\\ play music, \\Pau=400\\ grab objects, \\Pau=1000\\ and even play soccer like a pro,"
		sFrench = "Je peux reconnaitre votre visage, répondre à vos questions, \\Pau=300\\ jouer de la musique, \\Pau=400\\ attraper des objets, \\Pau=700\\ et aussi jouer au foot."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = "��? �?��?���? �?�굴��? 인�?��?� �?? �??�?��??�?�, �?��?� ��?문�?� �??�?��?� �?? �??�?��??�?�, \\Pau=300\\ ��?�??��? �?�주�?� �?? �??고, \\Pau=400\\ 물건��? �?���? �?? �??�?��??�?�, \\Pau=700\\ �?��??��?�?� ��?구��? �?� �?? �??�?��??�?�"
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                </script>
                                                <pluginContent>
                                                    <chinese></chinese>
                                                    <english>I can recognize your face, answer your questions, \\Pau=300\\ play music, \\Pau=400\\ grab objects, \\Pau=1000\\ and even play soccer like a pro,</english>
                                                    <french>Je peux reconnaitre votre visage, répondre à vos questions, \\Pau=300\\ jouer de la musique, \\Pau=400\\ attraper des objets, \\Pau=700\\ et aussi jouer au foot.</french>
                                                    <german></german>
                                                    <italian></italian>
                                                    <japanese></japanese>
                                                    <korean>��? �?��?���? �?�굴��? 인�?��?� �?? �??�?��??�?�, �?��?� ��?문�?� �??�?��?� �?? �??�?��??�?�, \\Pau=300\\ ��?�??��? �?�주�?� �?? �??고, \\Pau=400\\ 물건��? �?���? �?? �??�?��??�?�, \\Pau=700\\ �?��??��?�?� ��?구��? �?� �?? �??�?��??�?�</korean>
                                                    <portuguese></portuguese>
                                                    <spanish></spanish>
                                                    <language>1</language>
                                                </pluginContent>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                            </Box>
                                            <Box name="Say Text" robot="" id="5" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="424" y="178">
                                                <bitmap>media/images/box/interaction/say.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                <Parameter name="speed" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                            </Box>
                                            <Box name="gotoPart5" robot="" id="7" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="425" y="28">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        pass

    def onInput_onStart(self):
        name = self.getParameter("frame name")
        self.log("%s -> %s" % (self.boxName, name))
        self.gotoAndStopParent(name)

    def onInput_onStop(self):
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                <Parameter name="frame name" inherits_from_parent="0" content_type="3" value="part5" default_value="" custom_choice="0" tooltip="" id="3" />
                                            </Box>
                                            <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="5" indexofinput="2" outputowner="4" indexofoutput="4" />
                                            <Link inputowner="4" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="3" indexofinput="2" outputowner="1" indexofoutput="4" />
                                            <Link inputowner="7" indexofinput="2" outputowner="3" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                    <BehaviorKeyframe name="part5" index="28" bitmap="">
                                        <Diagram scale="100">
                                            <Box name="Anim_presentation_part6" robot="" id="1" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="161" y="43">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="8" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="LocalizedText" robot="" id="1" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="120" y="41">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "I have close to 1500 brothers in operation, all around the world?"
		sFrench = "Il y a plus de 1500 Naos en utilisation, tout autour du monde."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = "300��?이 �??�?? ��? �??��?�?�이 �??�?��??�?�, ��? �?���?�?�, �?�구�??�?? �??�??�?�"
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>I have close to 1500 brothers in operation, all around the world?</english>
                                                                        <french>Il y a plus de 1500 Naos en utilisation, tout autour du monde.</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean>300��?이 �??�?? ��? �??��?�?�이 �??�?��??�?�, ��? �?���?�?�, �?�구�??�?? �??�??�?�</korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="Say Text" robot="" id="2" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="443" y="41">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="7" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy" index="83" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy_copy" index="124" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="blink_copy_copy_copy" index="194" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="blink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="130" y="41">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );
        
        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );
        
        return;
        

    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="23" value="-1.84813" />
                                                            <Key frame="38" value="-2.81494" />
                                                            <Key frame="55" value="-4.13332" />
                                                            <Key frame="71" value="-7.91266" />
                                                            <Key frame="93" value="13.445" />
                                                            <Key frame="126" value="-25.0515" />
                                                            <Key frame="157" value="-2.90283" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="23" value="-22.3269" />
                                                            <Key frame="38" value="-18.987" />
                                                            <Key frame="55" value="-13.6256" />
                                                            <Key frame="71" value="-22.4148" />
                                                            <Key frame="93" value="5.97423" />
                                                            <Key frame="126" value="-22.3269" />
                                                            <Key frame="157" value="-18.0202" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="82.6158" />
                                                            <Key frame="35" value="96.1511" />
                                                            <Key frame="68" value="86.6588" />
                                                            <Key frame="90" value="77.606" />
                                                            <Key frame="123" value="67.2348" />
                                                            <Key frame="154" value="89.2077" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="1.40386" />
                                                            <Key frame="35" value="1.14019" />
                                                            <Key frame="68" value="1.0523" />
                                                            <Key frame="90" value="1.31597" />
                                                            <Key frame="123" value="27.244" />
                                                            <Key frame="154" value="14.5876" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-51.507" />
                                                            <Key frame="35" value="-103.539" />
                                                            <Key frame="68" value="-65.4817" />
                                                            <Key frame="90" value="-42.4541" />
                                                            <Key frame="110" value="-62" />
                                                            <Key frame="123" value="-101.869" />
                                                            <Key frame="154" value="-101.078" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-52.8205" />
                                                            <Key frame="35" value="-45.965" />
                                                            <Key frame="68" value="-40.4278" />
                                                            <Key frame="90" value="-57.0393" />
                                                            <Key frame="110" value="-72" />
                                                            <Key frame="123" value="-37.2637" />
                                                            <Key frame="154" value="-23.201" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="29" />
                                                            <Key frame="68" value="-5" />
                                                            <Key frame="90" value="-5.18802" />
                                                            <Key frame="123" value="-35" />
                                                            <Key frame="154" value="-66.3607" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="0.0727535" />
                                                            <Key frame="90" value="0.0752989" />
                                                            <Key frame="123" value="0.729091" />
                                                            <Key frame="154" value="0.175662" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="6.68218" />
                                                            <Key frame="31" value="33.6649" />
                                                            <Key frame="45" value="51.1554" />
                                                            <Key frame="64" value="63.2844" />
                                                            <Key frame="86" value="18.4597" />
                                                            <Key frame="119" value="3.78175" />
                                                            <Key frame="150" value="88.6852" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="-3.78175" />
                                                            <Key frame="31" value="-4.3091" />
                                                            <Key frame="45" value="-0.5" />
                                                            <Key frame="64" value="-1.49656" />
                                                            <Key frame="86" value="-0.79343" />
                                                            <Key frame="119" value="-87.982" />
                                                            <Key frame="150" value="-16.8776" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="8.4352" />
                                                            <Key frame="31" value="84.4615" />
                                                            <Key frame="45" value="44.3829" />
                                                            <Key frame="64" value="38.9336" />
                                                            <Key frame="86" value="45.3497" />
                                                            <Key frame="106" value="30" />
                                                            <Key frame="119" value="57.7425" />
                                                            <Key frame="138" value="118" />
                                                            <Key frame="150" value="98.2605" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="82.6206" />
                                                            <Key frame="31" value="60.6477" />
                                                            <Key frame="45" value="66.7122" />
                                                            <Key frame="64" value="60.1203" />
                                                            <Key frame="86" value="88.8609" />
                                                            <Key frame="106" value="63" />
                                                            <Key frame="119" value="24.1726" />
                                                            <Key frame="138" value="70" />
                                                            <Key frame="150" value="38.0595" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="31" value="28" />
                                                            <Key frame="45" value="74" />
                                                            <Key frame="86" value="73.563" />
                                                            <Key frame="119" value="43" />
                                                            <Key frame="150" value="95.7996" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="31" value="0.181844" />
                                                            <Key frame="86" value="0.181844" />
                                                            <Key frame="119" value="0.703636" />
                                                            <Key frame="150" value="0.36548" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-17.7517" />
                                                            <Key frame="88" value="-20.4764" />
                                                            <Key frame="121" value="-18.9822" />
                                                            <Key frame="152" value="-18.367" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="1.93602" />
                                                            <Key frame="88" value="-0.876513" />
                                                            <Key frame="121" value="11.692" />
                                                            <Key frame="152" value="12.8346" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="15.5592" />
                                                            <Key frame="88" value="4.48488" />
                                                            <Key frame="121" value="18.196" />
                                                            <Key frame="152" value="18.0202" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-0.090296" />
                                                            <Key frame="88" value="-0.178188" />
                                                            <Key frame="121" value="1.84332" />
                                                            <Key frame="152" value="4.74375" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-0.441863" />
                                                            <Key frame="88" value="6.67737" />
                                                            <Key frame="121" value="-2.72705" />
                                                            <Key frame="152" value="-4.04542" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-1.57965" />
                                                            <Key frame="88" value="-0.788621" />
                                                            <Key frame="121" value="-8.61098" />
                                                            <Key frame="152" value="-9.05044" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-7.29261" />
                                                            <Key frame="88" value="-4.48007" />
                                                            <Key frame="121" value="-1.66754" />
                                                            <Key frame="152" value="-1.93121" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="13.7966" />
                                                            <Key frame="88" value="1.75543" />
                                                            <Key frame="121" value="18.4549" />
                                                            <Key frame="152" value="20.4764" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-4.48007" />
                                                            <Key frame="88" value="-4.56797" />
                                                            <Key frame="121" value="-4.30429" />
                                                            <Key frame="152" value="-4.56797" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="5.71537" />
                                                            <Key frame="88" value="12.8346" />
                                                            <Key frame="121" value="3.69386" />
                                                            <Key frame="152" value="3.2544" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="5.18802" />
                                                            <Key frame="88" value="2.99072" />
                                                            <Key frame="121" value="1.0571" />
                                                            <Key frame="152" value="1.32078" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="gotoHead" robot="" id="2" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="306" y="43">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        pass

    def onInput_onStart(self):
        name = self.getParameter("frame name")
        #~ self.log("%s -> %s" % (self.boxName, name))
        self.gotoAndStopParent(name)

    def onInput_onStop(self):
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                <Parameter name="frame name" inherits_from_parent="0" content_type="3" value="Head" default_value="" custom_choice="0" tooltip="" id="3" />
                                            </Box>
                                            <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                    <BehaviorKeyframe name="Head" index="35" bitmap="">
                                        <Diagram scale="-1">
                                            <Box name="Head" robot="" id="3" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="531" y="13">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onUnload(self):
		#puts code for box cleanup here
		""

	def onInput_onStart(self):
		#self.onStopped() # activate output of the box
		""

	def onInput_onStop(self):
		""]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="15" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="55.6955" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-19.2329" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="Read" robot="" id="5" tooltip="Read head position in memory" bitmap_expanded="1" plugin="" x="98" y="43">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        p = ALMemory.getData(self.getParameter("var name"))
        self.onStopped(p)]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Output name="onStopped" type="0" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="3" />
                                                <Parameter name="var name" inherits_from_parent="0" content_type="3" value="side" default_value="" custom_choice="0" tooltip="" id="4" />
                                            </Box>
                                            <Box name="Dispatcher" robot="" id="11" tooltip="Dispatch an event carrying an information, depending on the information. Will be tested against all the values of the table, and the matching output will be stimulated !" bitmap_expanded="1" plugin="dispatcher_plugin" x="255" y="43">
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onInput_onStart(self, p):
		if(p == ("Left")):
			self.output_1(p)
		elif(p == ("Right")):
			self.output_2(p)
		else:
			self.onDefault()]]>
</content>
                                                </script>
                                                <pluginContent>
                                                    <keywords>
                                                        <keyword>&quot;Left&quot;</keyword>
                                                        <keyword>&quot;Right&quot;</keyword>
                                                        <keyword></keyword>
                                                    </keywords>
                                                </pluginContent>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Output name="onDefault" type="1" type_size="1" nature="2" inner="0" tooltip="If nothing has been matched in dispatcher." id="3" />
                                                <Output name="output_1" type="0" type_size="1" nature="2" inner="0" tooltip="" id="4" />
                                                <Output name="output_2" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="5" />
                                                <Output name="output_3" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="6" />
                                            </Box>
                                            <Box name="Head" robot="" id="12" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="535" y="110">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onUnload(self):
		#puts code for box cleanup here
		""

	def onInput_onStart(self):
		#self.onStopped() # activate output of the box
		""

	def onInput_onStop(self):
		""]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="15" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-53.1086" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-18.1242" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="gotoUseful" robot="" id="2" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="680" y="40">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        pass

    def onInput_onStart(self):
        name = self.getParameter("frame name")
        #~ self.log("%s -> %s" % (self.boxName, name))
        self.gotoAndStopParent(name)

    def onInput_onStop(self):
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                <Parameter name="frame name" inherits_from_parent="0" content_type="3" value="Useful" default_value="" custom_choice="0" tooltip="" id="3" />
                                            </Box>
                                            <Link inputowner="11" indexofinput="2" outputowner="5" indexofoutput="3" />
                                            <Link inputowner="3" indexofinput="2" outputowner="11" indexofoutput="4" />
                                            <Link inputowner="12" indexofinput="2" outputowner="11" indexofoutput="5" />
                                            <Link inputowner="5" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="2" indexofinput="2" outputowner="3" indexofoutput="4" />
                                            <Link inputowner="2" indexofinput="2" outputowner="12" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                    <BehaviorKeyframe name="Useful" index="42" bitmap="">
                                        <Diagram scale="96">
                                            <Box name="LocalizedText" robot="" id="8" tooltip="LocalizedText" bitmap_expanded="1" plugin="localizationbox_plugin" x="64" y="21">
                                                <bitmap>media/images/box/interaction/vocabulary.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "Do you \RSPD=85\ need \RSPD=100\ any \RSPD=85\ further \RSPD=100\ information?"
		sFrench = "As-tu besoin de plus d'information?"
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = ""
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                </script>
                                                <pluginContent>
                                                    <chinese></chinese>
                                                    <english>Do you \RSPD=85\ need \RSPD=100\ any \RSPD=85\ further \RSPD=100\ information?</english>
                                                    <french>As-tu besoin de plus d&apos;information?</french>
                                                    <german></german>
                                                    <italian></italian>
                                                    <japanese></japanese>
                                                    <korean></korean>
                                                    <portuguese></portuguese>
                                                    <spanish></spanish>
                                                    <language>1</language>
                                                </pluginContent>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                            </Box>
                                            <Box name="gotoHead2" robot="" id="2" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="1006" y="21">
                                                <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        pass

    def onInput_onStart(self):
        name = self.getParameter("frame name")
        #~ self.log("%s -> %s" % (self.boxName, name))
        self.gotoAndStopParent(name)

    def onInput_onStop(self):
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                <Parameter name="frame name" inherits_from_parent="0" content_type="3" value="Edutainment" default_value="" custom_choice="0" tooltip="" id="3" />
                                            </Box>
                                            <Box name="Research" robot="" id="1" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="605" y="21">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="10" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="LocalizedText" robot="" id="12" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="108" y="37">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "\RSPD=100\ That's a \RSPD=120\ good \RSPD=85\ question? \Pau=100\ \RSPD=100\ I'm \RSPD=100\ useful \RSPD=100\ four \RSPD=80\ research \RSPD=100\ all over the world, \RSPD=130\ in \RSPD=90\ 30 \RSPD=85\ countrees!"
		sFrench = "C'est une bonne question! Je suis utilisé pour la recherche à travers le monde, dans plus de 30 pays."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = ""
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>\RSPD=100\ That&apos;s a \RSPD=120\ good \RSPD=85\ question? \Pau=100\ \RSPD=100\ I&apos;m \RSPD=100\ useful \RSPD=100\ four \RSPD=80\ research \RSPD=100\ all over the world, \RSPD=130\ in \RSPD=90\ 30 \RSPD=85\ countrees!</english>
                                                                        <french>C&apos;est une bonne question! Je suis utilisé pour la recherche à travers le monde, dans plus de 30 pays.</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean></korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="Say Text" robot="" id="13" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="388" y="36">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="110" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Link inputowner="13" indexofinput="2" outputowner="12" indexofoutput="4" />
                                                                <Link inputowner="12" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="1" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="BlinkWink" robot="" id="6" tooltip="Eyes keep blinking until box is stopped." bitmap_expanded="1" plugin="" x="114" y="34">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[import random

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        self.bMustStop = False

    def onLoad(self):
        pass

    def onUnload(self):
        self.onInput_onStop()

    def blink(self):
        on = 0xffffff    
        off = 0x222222
        rDuration = self.getParameter("speed")
        ALLeds.post.fadeRGB( "FaceLed0", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed1", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed2", on, rDuration )
        ALLeds.post.fadeRGB( "FaceLed3", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed4", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed5", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed6", on, rDuration )
        ALLeds.fadeRGB( "FaceLed7", off, rDuration )
        time.sleep( 0.1 )
        ALLeds.fadeRGB( "FaceLeds", on, rDuration )

    def onInput_onStart(self):
        if self.bIsRunning:
            return

        self.bIsRunning = True
        self.bMustStop = False
        
        threshold = self.getParameter("threshold")
        
        while not self.bMustStop:
            n = random.uniform(0.0, 100.0)
            if n>threshold:
                self.blink()
            time.sleep(0.1)
    
        self.bIsRunning = False
        self.bMustStop = False
        self.onStopped()

    def onInput_onStop(self):
        self.bMustStop = True]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="2" value="0.1" default_value="0.1" min="0" max="1" tooltip="" id="5" />
                                                                    <Parameter name="threshold" inherits_from_parent="0" content_type="2" value="90" default_value="70" min="0" max="100" tooltip="" id="6" />
                                                                </Box>
                                                                <Link inputowner="6" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="-4.48488" />
                                                            <Key frame="36" value="-3.51807" />
                                                            <Key frame="51" value="8.17153" />
                                                            <Key frame="67" value="12.654" />
                                                            <Key frame="88" value="11.5993" />
                                                            <Key frame="103" value="-11.9557" />
                                                            <Key frame="126" value="-10.2857" />
                                                            <Key frame="139" value="-7.12163" />
                                                            <Key frame="157" value="-0.178188" />
                                                            <Key frame="167" value="-1.58446" />
                                                            <Key frame="177" value="0.612838" />
                                                            <Key frame="195" value="16" />
                                                            <Key frame="208" value="14" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="-18.8991" />
                                                            <Key frame="36" value="9.66569" />
                                                            <Key frame="51" value="-15.4713" />
                                                            <Key frame="67" value="4.74375" />
                                                            <Key frame="88" value="-13.6256" />
                                                            <Key frame="103" value="-16.0866" />
                                                            <Key frame="126" value="-16.526" />
                                                            <Key frame="139" value="1.66754" />
                                                            <Key frame="157" value="-18.0202" />
                                                            <Key frame="167" value="-17.8444" />
                                                            <Key frame="177" value="-18.987" />
                                                            <Key frame="195" value="-15.735" />
                                                            <Key frame="208" value="-16.526" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="87.0104" />
                                                            <Key frame="34" value="94.4812" />
                                                            <Key frame="49" value="95.7996" />
                                                            <Key frame="65" value="82.5279" />
                                                            <Key frame="86" value="67.6742" />
                                                            <Key frame="101" value="67.3227" />
                                                            <Key frame="124" value="72.0688" />
                                                            <Key frame="137" value="82.9674" />
                                                            <Key frame="155" value="93.866" />
                                                            <Key frame="165" value="95.6238" />
                                                            <Key frame="175" value="95.8875" />
                                                            <Key frame="186" value="93.4265" />
                                                            <Key frame="206" value="89.6472" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="5.00742" />
                                                            <Key frame="34" value="5.35899" />
                                                            <Key frame="49" value="7.29261" />
                                                            <Key frame="65" value="4.56797" />
                                                            <Key frame="86" value="0.5" />
                                                            <Key frame="101" value="0.5" />
                                                            <Key frame="124" value="29.9687" />
                                                            <Key frame="137" value="29.2655" />
                                                            <Key frame="155" value="12.3024" />
                                                            <Key frame="165" value="9.40201" />
                                                            <Key frame="175" value="8.4352" />
                                                            <Key frame="186" value="6.15002" />
                                                            <Key frame="206" value="2.63435" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="-60.2082" />
                                                            <Key frame="34" value="-97.4743" />
                                                            <Key frame="49" value="-97.1228" />
                                                            <Key frame="65" value="-59.0656" />
                                                            <Key frame="86" value="-98.3532" />
                                                            <Key frame="101" value="-51.507" />
                                                            <Key frame="124" value="-69.8763" />
                                                            <Key frame="137" value="-72.0736" />
                                                            <Key frame="155" value="-105.121" />
                                                            <Key frame="165" value="-105.121" />
                                                            <Key frame="175" value="-100.551" />
                                                            <Key frame="186" value="-92.1129" />
                                                            <Key frame="206" value="-84.5542" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="-42.8009" />
                                                            <Key frame="34" value="-33.9238" />
                                                            <Key frame="49" value="-25.3104" />
                                                            <Key frame="65" value="-56.7757" />
                                                            <Key frame="86" value="-72.3325" />
                                                            <Key frame="101" value="-84.4615" />
                                                            <Key frame="124" value="-45.5255" />
                                                            <Key frame="137" value="-40.252" />
                                                            <Key frame="155" value="-29.7929" />
                                                            <Key frame="165" value="-26.1893" />
                                                            <Key frame="175" value="-24.6952" />
                                                            <Key frame="186" value="-26.3651" />
                                                            <Key frame="206" value="-26.2772" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="45.2" />
                                                            <Key frame="49" value="37" />
                                                            <Key frame="86" value="-39" />
                                                            <Key frame="124" value="17" />
                                                            <Key frame="155" value="33" />
                                                            <Key frame="175" value="26" />
                                                            <Key frame="206" value="26.0135" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="0.181818" />
                                                            <Key frame="49" value="0.178935" />
                                                            <Key frame="86" value="0.530909" />
                                                            <Key frame="101" value="0.394545" />
                                                            <Key frame="124" value="0.709091" />
                                                            <Key frame="155" value="0.330909" />
                                                            <Key frame="175" value="0.294545" />
                                                            <Key frame="206" value="0.295298" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="75.3256" />
                                                            <Key frame="32" value="37.0927" />
                                                            <Key frame="47" value="51.8585" />
                                                            <Key frame="63" value="37.0927" />
                                                            <Key frame="84" value="54.2316" />
                                                            <Key frame="99" value="34.8075" />
                                                            <Key frame="122" value="46.0577" />
                                                            <Key frame="135" value="57.2199" />
                                                            <Key frame="153" value="31.5555" />
                                                            <Key frame="163" value="51.8585" />
                                                            <Key frame="173" value="34.456" />
                                                            <Key frame="184" value="63.8997" />
                                                            <Key frame="204" value="88.5973" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="-3.95753" />
                                                            <Key frame="32" value="-1.23289" />
                                                            <Key frame="47" value="-0.969213" />
                                                            <Key frame="63" value="-1.23289" />
                                                            <Key frame="84" value="-1.145" />
                                                            <Key frame="99" value="-1.145" />
                                                            <Key frame="122" value="-18.196" />
                                                            <Key frame="135" value="-20.657" />
                                                            <Key frame="153" value="-1.58446" />
                                                            <Key frame="163" value="-3.07861" />
                                                            <Key frame="173" value="-2.99072" />
                                                            <Key frame="184" value="-11.9557" />
                                                            <Key frame="204" value="-6.77007" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="102.216" />
                                                            <Key frame="32" value="53.3479" />
                                                            <Key frame="47" value="37.791" />
                                                            <Key frame="63" value="48.0744" />
                                                            <Key frame="84" value="86.4831" />
                                                            <Key frame="99" value="40.6036" />
                                                            <Key frame="122" value="57.1272" />
                                                            <Key frame="135" value="62.4886" />
                                                            <Key frame="153" value="67.85" />
                                                            <Key frame="163" value="88.2409" />
                                                            <Key frame="173" value="85.5163" />
                                                            <Key frame="184" value="84.3736" />
                                                            <Key frame="204" value="64.2464" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="60.7356" />
                                                            <Key frame="32" value="77.435" />
                                                            <Key frame="47" value="88.773" />
                                                            <Key frame="63" value="88.773" />
                                                            <Key frame="84" value="77.435" />
                                                            <Key frame="99" value="88.773" />
                                                            <Key frame="122" value="35.9501" />
                                                            <Key frame="135" value="35.1591" />
                                                            <Key frame="153" value="83.8511" />
                                                            <Key frame="163" value="70.3158" />
                                                            <Key frame="173" value="88.773" />
                                                            <Key frame="184" value="75.9409" />
                                                            <Key frame="204" value="65.4817" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="32" value="-34.5" />
                                                            <Key frame="47" value="-44" />
                                                            <Key frame="84" value="49.6" />
                                                            <Key frame="122" value="-14" />
                                                            <Key frame="153" value="40.9" />
                                                            <Key frame="173" value="56" />
                                                            <Key frame="204" value="56.2483" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="32" value="0.730909" />
                                                            <Key frame="47" value="0.669091" />
                                                            <Key frame="84" value="0.836364" />
                                                            <Key frame="99" value="0.454545" />
                                                            <Key frame="122" value="0.805455" />
                                                            <Key frame="153" value="0.709091" />
                                                            <Key frame="173" value="0.181818" />
                                                            <Key frame="204" value="0.185116" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-12.8298" />
                                                            <Key frame="48" value="-12.4782" />
                                                            <Key frame="85" value="-13.445" />
                                                            <Key frame="123" value="-12.2145" />
                                                            <Key frame="154" value="-13.445" />
                                                            <Key frame="174" value="-14.6755" />
                                                            <Key frame="205" value="-14.6755" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="12.5709" />
                                                            <Key frame="48" value="12.5709" />
                                                            <Key frame="85" value="9.31893" />
                                                            <Key frame="123" value="5.45169" />
                                                            <Key frame="154" value="5.89115" />
                                                            <Key frame="174" value="4.74856" />
                                                            <Key frame="205" value="4.74856" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="13.3619" />
                                                            <Key frame="48" value="13.4498" />
                                                            <Key frame="85" value="15.6471" />
                                                            <Key frame="123" value="18.6355" />
                                                            <Key frame="154" value="16.9655" />
                                                            <Key frame="174" value="13.2741" />
                                                            <Key frame="205" value="13.2741" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-4.92434" />
                                                            <Key frame="48" value="-4.83645" />
                                                            <Key frame="85" value="-4.66067" />
                                                            <Key frame="123" value="-4.83645" />
                                                            <Key frame="154" value="-4.83645" />
                                                            <Key frame="174" value="-5.27591" />
                                                            <Key frame="205" value="-5.27591" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="4.65586" />
                                                            <Key frame="48" value="4.56797" />
                                                            <Key frame="85" value="2.81013" />
                                                            <Key frame="123" value="0.437054" />
                                                            <Key frame="154" value="1.66754" />
                                                            <Key frame="174" value="4.56797" />
                                                            <Key frame="205" value="4.56797" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-10.5446" />
                                                            <Key frame="48" value="-10.5446" />
                                                            <Key frame="85" value="-8.08363" />
                                                            <Key frame="123" value="-5.18321" />
                                                            <Key frame="154" value="-5.53477" />
                                                            <Key frame="174" value="-4.74375" />
                                                            <Key frame="205" value="-4.83164" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="2.72705" />
                                                            <Key frame="48" value="2.72705" />
                                                            <Key frame="85" value="-1.49176" />
                                                            <Key frame="123" value="-6.06212" />
                                                            <Key frame="154" value="-5.62267" />
                                                            <Key frame="174" value="-5.09532" />
                                                            <Key frame="205" value="-5.09532" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="14.7634" />
                                                            <Key frame="48" value="14.7634" />
                                                            <Key frame="85" value="17.5759" />
                                                            <Key frame="123" value="18.8064" />
                                                            <Key frame="154" value="18.0154" />
                                                            <Key frame="174" value="13.7087" />
                                                            <Key frame="205" value="13.7087" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-3.95272" />
                                                            <Key frame="48" value="-3.95272" />
                                                            <Key frame="85" value="-5.29" />
                                                            <Key frame="123" value="-4.2164" />
                                                            <Key frame="154" value="-5.29" />
                                                            <Key frame="174" value="-5.29" />
                                                            <Key frame="205" value="-5.29" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="2.11181" />
                                                            <Key frame="48" value="2.11181" />
                                                            <Key frame="85" value="2.1997" />
                                                            <Key frame="123" value="-0.876513" />
                                                            <Key frame="154" value="1.67235" />
                                                            <Key frame="174" value="5.45169" />
                                                            <Key frame="205" value="5.45169" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-1.57965" />
                                                            <Key frame="48" value="-1.66754" />
                                                            <Key frame="85" value="1.40867" />
                                                            <Key frame="123" value="4.74856" />
                                                            <Key frame="154" value="4.48488" />
                                                            <Key frame="174" value="4.3091" />
                                                            <Key frame="205" value="4.3091" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="Say Text" robot="" id="4" tooltip="Say the sentence received in the input. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="316" y="21">
                                                <bitmap>media/images/box/interaction/say.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote

    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []

    def onUnload(self):
        #puts code for box cleanup here
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass

    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("Speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ "
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a string is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                <Parameter name="Speed" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="Changes the speed of the voice." id="6" />
                                            </Box>
                                            <Box name="Insurance" robot="" id="5" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="878" y="21">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="24" resources_acquisition="0" size="600" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="4" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="LocalizedText" robot="" id="7" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="82" y="44">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "\RSPD=80\ and there's more : Insurance companies \RSPD=95\ want to use me as a companion \RSPD=80\ for the elderly, \Pau=100\ to \RSPD=90\ read \Pau=10\ them \RSPD=80\ paypers, \RSPD=95\ hellp \RSPD=80\ them \RSPD=85\ answer \RSPD=80\ their phone, \RSPD=85\ \Pau=20\ check \RSPD=80\ on them \Pau=10\ and \RSPD=85\ report back \RSPD=80\ \Pau=10\ to relatives \Pau=30\ or the care center \RSPD=80\ \Pau=30\ if required. \RSPD=80\ \Pau=500\ See ? \RSPD=100\ the field \RSPD=85\ of the possible is quite large."
		sFrench = "Et il y a plusse! Les compagnies d'assurances veulent m'utiliser comme compagnon pour les personnes en perte d'autonomie, pour leur lire les journaux, les aider à répondre au téléphone, veiller sur eux, et pouvoir avertir les proches ou un centre de soin si nécessaire. \Pau=700\ Tu vois, le champs des possibilités est très large!"
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = ""
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>\RSPD=80\ and there&apos;s more : Insurance companies \RSPD=95\ want to use me as a companion \RSPD=80\ for the elderly, \Pau=100\ to \RSPD=90\ read \Pau=10\ them \RSPD=80\ paypers, \RSPD=95\ hellp \RSPD=80\ them \RSPD=85\ answer \RSPD=80\ their phone, \RSPD=85\ \Pau=20\ check \RSPD=80\ on them \Pau=10\ and \RSPD=85\ report back \RSPD=80\ \Pau=10\ to relatives \Pau=30\ or the care center \RSPD=80\ \Pau=30\ if required. \RSPD=80\ \Pau=500\ See ? \RSPD=100\ the field \RSPD=85\ of the possible is quite large.</english>
                                                                        <french>Et il y a plusse! Les compagnies d&apos;assurances veulent m&apos;utiliser comme compagnon pour les personnes en perte d&apos;autonomie, pour leur lire les journaux, les aider à répondre au téléphone, veiller sur eux, et pouvoir avertir les proches ou un centre de soin si nécessaire. \Pau=700\ Tu vois, le champs des possibilités est très large!</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean></korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="Say Text" robot="" id="9" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="359" y="44">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Link inputowner="9" indexofinput="2" outputowner="7" indexofoutput="4" />
                                                                <Link inputowner="7" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="1" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="BlinkWink" robot="" id="6" tooltip="Eyes keep blinking until box is stopped." bitmap_expanded="1" plugin="" x="182" y="67">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[import random

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        self.bMustStop = False

    def onLoad(self):
        pass

    def onUnload(self):
        self.onInput_onStop()

    def blink(self):
        on = 0xffffff    
        off = 0x222222
        rDuration = self.getParameter("speed")
        ALLeds.post.fadeRGB( "FaceLed0", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed1", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed2", on, rDuration )
        ALLeds.post.fadeRGB( "FaceLed3", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed4", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed5", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed6", on, rDuration )
        ALLeds.fadeRGB( "FaceLed7", off, rDuration )
        time.sleep( 0.1 )
        ALLeds.fadeRGB( "FaceLeds", on, rDuration )

    def onInput_onStart(self):
        if self.bIsRunning:
            return

        self.bIsRunning = True
        self.bMustStop = False
        
        threshold = self.getParameter("threshold")
        
        while not self.bMustStop:
            n = random.uniform(0.0, 100.0)
            if n>threshold:
                self.blink()
            time.sleep(0.1)
    
        self.bIsRunning = False
        self.bMustStop = False
        self.onStopped()

    def onInput_onStop(self):
        self.bMustStop = True]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="2" value="0.1" default_value="0.1" min="0" max="1" tooltip="" id="5" />
                                                                    <Parameter name="threshold" inherits_from_parent="0" content_type="2" value="90" default_value="70" min="0" max="100" tooltip="" id="6" />
                                                                </Box>
                                                                <Link inputowner="6" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="-3.2544" />
                                                            <Key frame="39" value="6.23791" />
                                                            <Key frame="56" value="7.55628" />
                                                            <Key frame="75" value="-6.77007" />
                                                            <Key frame="92" value="-15.3835" />
                                                            <Key frame="108" value="-20.1296" />
                                                            <Key frame="127" value="-15.735" />
                                                            <Key frame="141" value="1.93121" />
                                                            <Key frame="158" value="2.28278" />
                                                            <Key frame="177" value="4.91953" />
                                                            <Key frame="199" value="-14.4166" />
                                                            <Key frame="216" value="-17.4929" />
                                                            <Key frame="235" value="7.55628" />
                                                            <Key frame="261" value="20.9158" />
                                                            <Key frame="277" value="-1.0571" />
                                                            <Key frame="296" value="-2.99072" />
                                                            <Key frame="316" value="-17.405" />
                                                            <Key frame="332" value="-17.2292" />
                                                            <Key frame="352" value="-22.9421" />
                                                            <Key frame="375" value="-19.2507" />
                                                            <Key frame="389" value="-10.4615" />
                                                            <Key frame="409" value="5.18321" />
                                                            <Key frame="426" value="4.39218" />
                                                            <Key frame="441" value="-2.11181" />
                                                            <Key frame="476" value="-3.69386" />
                                                            <Key frame="509" value="-10.9889" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="4.12851" />
                                                            <Key frame="39" value="-14.6803" />
                                                            <Key frame="56" value="-17.3171" />
                                                            <Key frame="75" value="6.85315" />
                                                            <Key frame="92" value="-8.79158" />
                                                            <Key frame="108" value="-14.5924" />
                                                            <Key frame="127" value="-17.1413" />
                                                            <Key frame="141" value="-17.2292" />
                                                            <Key frame="158" value="-19.8659" />
                                                            <Key frame="177" value="-20.5691" />
                                                            <Key frame="199" value="-17.2292" />
                                                            <Key frame="216" value="-16.1745" />
                                                            <Key frame="235" value="24.0799" />
                                                            <Key frame="261" value="8.4352" />
                                                            <Key frame="277" value="-16.2624" />
                                                            <Key frame="296" value="-19.6023" />
                                                            <Key frame="316" value="-16.8776" />
                                                            <Key frame="332" value="-17.9323" />
                                                            <Key frame="352" value="-20.4812" />
                                                            <Key frame="375" value="-17.405" />
                                                            <Key frame="389" value="1.49176" />
                                                            <Key frame="409" value="-18.987" />
                                                            <Key frame="426" value="-21.2722" />
                                                            <Key frame="441" value="-0.969213" />
                                                            <Key frame="476" value="-18.8991" />
                                                            <Key frame="509" value="-18.3718" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="61.5218" />
                                                            <Key frame="37" value="39.9004" />
                                                            <Key frame="54" value="49.1291" />
                                                            <Key frame="73" value="28.0351" />
                                                            <Key frame="90" value="52.5569" />
                                                            <Key frame="106" value="51.4143" />
                                                            <Key frame="125" value="83.2311" />
                                                            <Key frame="139" value="82.8795" />
                                                            <Key frame="156" value="91.6687" />
                                                            <Key frame="175" value="92.8113" />
                                                            <Key frame="197" value="84.0221" />
                                                            <Key frame="214" value="86.3952" />
                                                            <Key frame="233" value="85.2526" />
                                                            <Key frame="259" value="89.9987" />
                                                            <Key frame="275" value="91.0534" />
                                                            <Key frame="294" value="91.0534" />
                                                            <Key frame="314" value="65.389" />
                                                            <Key frame="330" value="70.6625" />
                                                            <Key frame="350" value="48.5138" />
                                                            <Key frame="373" value="53.1721" />
                                                            <Key frame="387" value="70.0473" />
                                                            <Key frame="407" value="56.4241" />
                                                            <Key frame="424" value="56.3362" />
                                                            <Key frame="439" value="36.2969" />
                                                            <Key frame="474" value="47.0197" />
                                                            <Key frame="507" value="66.9711" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="7.55628" />
                                                            <Key frame="37" value="7.64418" />
                                                            <Key frame="54" value="12.654" />
                                                            <Key frame="73" value="3.86483" />
                                                            <Key frame="90" value="0.5" />
                                                            <Key frame="106" value="0.5" />
                                                            <Key frame="125" value="0.5" />
                                                            <Key frame="139" value="0.5" />
                                                            <Key frame="156" value="7.29261" />
                                                            <Key frame="175" value="8.17153" />
                                                            <Key frame="197" value="3.95272" />
                                                            <Key frame="214" value="3.68905" />
                                                            <Key frame="233" value="5.62267" />
                                                            <Key frame="259" value="6.94104" />
                                                            <Key frame="275" value="6.76526" />
                                                            <Key frame="294" value="8.34731" />
                                                            <Key frame="314" value="4.91953" />
                                                            <Key frame="330" value="3.86483" />
                                                            <Key frame="350" value="0.5" />
                                                            <Key frame="373" value="0.5" />
                                                            <Key frame="387" value="0.5" />
                                                            <Key frame="407" value="0.5" />
                                                            <Key frame="424" value="0.5" />
                                                            <Key frame="439" value="2.01911" />
                                                            <Key frame="474" value="21.7947" />
                                                            <Key frame="507" value="23.2889" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="-58.0988" />
                                                            <Key frame="37" value="-102.572" />
                                                            <Key frame="54" value="-105.385" />
                                                            <Key frame="73" value="-82.7964" />
                                                            <Key frame="90" value="-46.7608" />
                                                            <Key frame="106" value="-76.9956" />
                                                            <Key frame="125" value="-56.0773" />
                                                            <Key frame="139" value="-49.9249" />
                                                            <Key frame="156" value="-66.5364" />
                                                            <Key frame="175" value="-71.1068" />
                                                            <Key frame="197" value="-68.9974" />
                                                            <Key frame="214" value="-68.558" />
                                                            <Key frame="233" value="-51.8585" />
                                                            <Key frame="259" value="-68.2064" />
                                                            <Key frame="275" value="-68.0306" />
                                                            <Key frame="294" value="-74.7983" />
                                                            <Key frame="314" value="-68.2064" />
                                                            <Key frame="330" value="-69.0853" />
                                                            <Key frame="350" value="-47.7276" />
                                                            <Key frame="373" value="-35.247" />
                                                            <Key frame="387" value="-42.8057" />
                                                            <Key frame="407" value="-68.8216" />
                                                            <Key frame="424" value="-64.9544" />
                                                            <Key frame="439" value="-49.4854" />
                                                            <Key frame="474" value="-91.0582" />
                                                            <Key frame="507" value="-92.2887" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="-87.9772" />
                                                            <Key frame="37" value="-57.4788" />
                                                            <Key frame="54" value="-56.1604" />
                                                            <Key frame="73" value="-81.8248" />
                                                            <Key frame="90" value="-89.3835" />
                                                            <Key frame="106" value="-69.6078" />
                                                            <Key frame="125" value="-36.7363" />
                                                            <Key frame="139" value="-37.3516" />
                                                            <Key frame="156" value="-34.8906" />
                                                            <Key frame="175" value="-30.3202" />
                                                            <Key frame="197" value="-65.7406" />
                                                            <Key frame="214" value="-81.8248" />
                                                            <Key frame="233" value="-41.3067" />
                                                            <Key frame="259" value="-30.2323" />
                                                            <Key frame="275" value="-29.705" />
                                                            <Key frame="294" value="-24.2557" />
                                                            <Key frame="314" value="-72.4204" />
                                                            <Key frame="330" value="-85.4284" />
                                                            <Key frame="350" value="-88.3288" />
                                                            <Key frame="373" value="-79.9791" />
                                                            <Key frame="387" value="-53.1721" />
                                                            <Key frame="407" value="-74.5298" />
                                                            <Key frame="424" value="-82.9674" />
                                                            <Key frame="439" value="-83.0553" />
                                                            <Key frame="474" value="-66.3558" />
                                                            <Key frame="507" value="-47.8107" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="37" value="-49" />
                                                            <Key frame="54" value="-48.7823" />
                                                            <Key frame="90" value="8.6" />
                                                            <Key frame="125" value="14" />
                                                            <Key frame="156" value="4" />
                                                            <Key frame="175" value="2.81013" />
                                                            <Key frame="197" value="-62" />
                                                            <Key frame="214" value="-63.1087" />
                                                            <Key frame="259" value="-19.4" />
                                                            <Key frame="294" value="-19.778" />
                                                            <Key frame="330" value="-48.5" />
                                                            <Key frame="373" value="7" />
                                                            <Key frame="407" value="-61" />
                                                            <Key frame="439" value="-26.9" />
                                                            <Key frame="474" value="-68" />
                                                            <Key frame="507" value="-70" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="37" value="0.654545" />
                                                            <Key frame="54" value="0.656024" />
                                                            <Key frame="90" value="0.469091" />
                                                            <Key frame="125" value="0.361818" />
                                                            <Key frame="156" value="0.318182" />
                                                            <Key frame="175" value="0.322935" />
                                                            <Key frame="197" value="0.525455" />
                                                            <Key frame="214" value="0.524025" />
                                                            <Key frame="259" value="0.290909" />
                                                            <Key frame="294" value="0.28548" />
                                                            <Key frame="330" value="0.854545" />
                                                            <Key frame="373" value="0.725455" />
                                                            <Key frame="407" value="0.743636" />
                                                            <Key frame="439" value="0.742205" />
                                                            <Key frame="474" value="0.687273" />
                                                            <Key frame="507" value="0.661478" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="92.2887" />
                                                            <Key frame="35" value="91.234" />
                                                            <Key frame="52" value="91.9371" />
                                                            <Key frame="71" value="87.5426" />
                                                            <Key frame="88" value="73.6557" />
                                                            <Key frame="104" value="62.4934" />
                                                            <Key frame="123" value="62.4934" />
                                                            <Key frame="137" value="31.9071" />
                                                            <Key frame="154" value="50.0128" />
                                                            <Key frame="173" value="63.8118" />
                                                            <Key frame="195" value="52.4738" />
                                                            <Key frame="212" value="66.9759" />
                                                            <Key frame="231" value="8.26423" />
                                                            <Key frame="257" value="2.02391" />
                                                            <Key frame="273" value="6.59428" />
                                                            <Key frame="292" value="37.0048" />
                                                            <Key frame="312" value="58.3625" />
                                                            <Key frame="328" value="58.8899" />
                                                            <Key frame="348" value="58.7141" />
                                                            <Key frame="371" value="70.7552" />
                                                            <Key frame="385" value="81.5659" />
                                                            <Key frame="405" value="60.1203" />
                                                            <Key frame="422" value="53.88" />
                                                            <Key frame="437" value="44.7393" />
                                                            <Key frame="472" value="56.5168" />
                                                            <Key frame="505" value="79.9839" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="-9.49471" />
                                                            <Key frame="35" value="-10.0221" />
                                                            <Key frame="52" value="-9.67049" />
                                                            <Key frame="71" value="-0.881321" />
                                                            <Key frame="88" value="-4.22121" />
                                                            <Key frame="104" value="-4.3091" />
                                                            <Key frame="123" value="-4.3091" />
                                                            <Key frame="137" value="-11.3404" />
                                                            <Key frame="154" value="-21.6238" />
                                                            <Key frame="173" value="-20.3933" />
                                                            <Key frame="195" value="-3.07861" />
                                                            <Key frame="212" value="-3.16651" />
                                                            <Key frame="231" value="-8.79158" />
                                                            <Key frame="257" value="-5.71537" />
                                                            <Key frame="273" value="-5.53958" />
                                                            <Key frame="292" value="-16.6139" />
                                                            <Key frame="312" value="-12.2194" />
                                                            <Key frame="328" value="-6.4185" />
                                                            <Key frame="348" value="-16.526" />
                                                            <Key frame="371" value="-13.6256" />
                                                            <Key frame="385" value="-10.7252" />
                                                            <Key frame="405" value="-5.18802" />
                                                            <Key frame="422" value="-2.63916" />
                                                            <Key frame="437" value="-1.76024" />
                                                            <Key frame="472" value="-23.5574" />
                                                            <Key frame="505" value="-23.8211" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="74.0903" />
                                                            <Key frame="35" value="79.8033" />
                                                            <Key frame="52" value="81.649" />
                                                            <Key frame="71" value="68.2016" />
                                                            <Key frame="88" value="95.448" />
                                                            <Key frame="104" value="35.0664" />
                                                            <Key frame="123" value="35.0664" />
                                                            <Key frame="137" value="18.2791" />
                                                            <Key frame="154" value="37.3516" />
                                                            <Key frame="173" value="44.295" />
                                                            <Key frame="195" value="62.4886" />
                                                            <Key frame="212" value="67.85" />
                                                            <Key frame="231" value="61.2581" />
                                                            <Key frame="257" value="57.8303" />
                                                            <Key frame="273" value="85.6041" />
                                                            <Key frame="292" value="91.7566" />
                                                            <Key frame="312" value="92.1081" />
                                                            <Key frame="328" value="82.9674" />
                                                            <Key frame="348" value="105.38" />
                                                            <Key frame="371" value="119.5" />
                                                            <Key frame="385" value="61.9613" />
                                                            <Key frame="405" value="72.3325" />
                                                            <Key frame="422" value="68.2016" />
                                                            <Key frame="437" value="48.6017" />
                                                            <Key frame="472" value="99.7547" />
                                                            <Key frame="505" value="109.95" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="49.3976" />
                                                            <Key frame="35" value="25.4031" />
                                                            <Key frame="52" value="21.5359" />
                                                            <Key frame="71" value="43.7725" />
                                                            <Key frame="88" value="67.3275" />
                                                            <Key frame="104" value="87.3668" />
                                                            <Key frame="123" value="87.3668" />
                                                            <Key frame="137" value="88.773" />
                                                            <Key frame="154" value="49.4854" />
                                                            <Key frame="173" value="45.6182" />
                                                            <Key frame="195" value="83.8511" />
                                                            <Key frame="212" value="88.2457" />
                                                            <Key frame="231" value="89.4762" />
                                                            <Key frame="257" value="89.5" />
                                                            <Key frame="273" value="61.9661" />
                                                            <Key frame="292" value="56.6926" />
                                                            <Key frame="312" value="88.9488" />
                                                            <Key frame="328" value="88.773" />
                                                            <Key frame="348" value="82.0054" />
                                                            <Key frame="371" value="67.0638" />
                                                            <Key frame="385" value="70.7552" />
                                                            <Key frame="405" value="81.3023" />
                                                            <Key frame="422" value="82.7085" />
                                                            <Key frame="437" value="88.9488" />
                                                            <Key frame="472" value="73.7436" />
                                                            <Key frame="505" value="58.2746" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="1.1" />
                                                            <Key frame="52" value="1.57965" />
                                                            <Key frame="88" value="48.5" />
                                                            <Key frame="123" value="24" />
                                                            <Key frame="154" value="-19.4" />
                                                            <Key frame="173" value="-18.7233" />
                                                            <Key frame="195" value="48.5" />
                                                            <Key frame="212" value="48.338" />
                                                            <Key frame="257" value="54" />
                                                            <Key frame="292" value="62" />
                                                            <Key frame="328" value="48.5" />
                                                            <Key frame="371" value="37" />
                                                            <Key frame="405" value="60" />
                                                            <Key frame="437" value="36" />
                                                            <Key frame="472" value="67.9" />
                                                            <Key frame="505" value="58" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="0.438182" />
                                                            <Key frame="52" value="0.439298" />
                                                            <Key frame="88" value="0.836364" />
                                                            <Key frame="123" value="0.650909" />
                                                            <Key frame="154" value="0.781818" />
                                                            <Key frame="173" value="0.514873" />
                                                            <Key frame="195" value="0.769091" />
                                                            <Key frame="212" value="0.514873" />
                                                            <Key frame="257" value="0.727273" />
                                                            <Key frame="292" value="0.674545" />
                                                            <Key frame="328" value="0.4" />
                                                            <Key frame="371" value="0.725455" />
                                                            <Key frame="405" value="0.774545" />
                                                            <Key frame="437" value="0.794545" />
                                                            <Key frame="472" value="0.794545" />
                                                            <Key frame="505" value="0.514873" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-15.7302" />
                                                            <Key frame="53" value="-15.5544" />
                                                            <Key frame="89" value="-16.5212" />
                                                            <Key frame="124" value="-16.6091" />
                                                            <Key frame="155" value="-16.697" />
                                                            <Key frame="174" value="-16.697" />
                                                            <Key frame="213" value="-17.2244" />
                                                            <Key frame="258" value="-19.5096" />
                                                            <Key frame="293" value="-19.5975" />
                                                            <Key frame="329" value="-21.3553" />
                                                            <Key frame="372" value="-21.9705" />
                                                            <Key frame="406" value="-20.5643" />
                                                            <Key frame="438" value="-18.1912" />
                                                            <Key frame="473" value="-18.0154" />
                                                            <Key frame="506" value="-18.0154" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="10.6373" />
                                                            <Key frame="53" value="10.6373" />
                                                            <Key frame="89" value="2.55126" />
                                                            <Key frame="124" value="5.18802" />
                                                            <Key frame="155" value="8.00055" />
                                                            <Key frame="174" value="8.00055" />
                                                            <Key frame="213" value="3.69386" />
                                                            <Key frame="258" value="8.79158" />
                                                            <Key frame="293" value="8.70368" />
                                                            <Key frame="329" value="2.46337" />
                                                            <Key frame="372" value="3.2544" />
                                                            <Key frame="406" value="2.90283" />
                                                            <Key frame="438" value="7.03374" />
                                                            <Key frame="473" value="4.57277" />
                                                            <Key frame="506" value="4.57277" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="18.196" />
                                                            <Key frame="53" value="18.2839" />
                                                            <Key frame="89" value="20.1296" />
                                                            <Key frame="124" value="20.1296" />
                                                            <Key frame="155" value="20.0417" />
                                                            <Key frame="174" value="20.0417" />
                                                            <Key frame="213" value="21.0964" />
                                                            <Key frame="258" value="17.405" />
                                                            <Key frame="293" value="17.2292" />
                                                            <Key frame="329" value="18.1081" />
                                                            <Key frame="372" value="15.9987" />
                                                            <Key frame="406" value="12.2194" />
                                                            <Key frame="438" value="18.7233" />
                                                            <Key frame="473" value="19.4265" />
                                                            <Key frame="506" value="19.4265" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-5.29" />
                                                            <Key frame="53" value="-5.27591" />
                                                            <Key frame="89" value="-5.29" />
                                                            <Key frame="124" value="-5.18802" />
                                                            <Key frame="155" value="-5.18802" />
                                                            <Key frame="174" value="-5.27591" />
                                                            <Key frame="213" value="-5.27591" />
                                                            <Key frame="258" value="-5.29" />
                                                            <Key frame="293" value="-5.29" />
                                                            <Key frame="329" value="-5.29" />
                                                            <Key frame="372" value="-5.29" />
                                                            <Key frame="406" value="-5.29" />
                                                            <Key frame="438" value="-5.29" />
                                                            <Key frame="473" value="-5.29" />
                                                            <Key frame="506" value="-5.27591" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="3.07381" />
                                                            <Key frame="53" value="3.07381" />
                                                            <Key frame="89" value="2.19489" />
                                                            <Key frame="124" value="1.75543" />
                                                            <Key frame="155" value="1.93121" />
                                                            <Key frame="174" value="1.84332" />
                                                            <Key frame="213" value="1.93121" />
                                                            <Key frame="258" value="4.04062" />
                                                            <Key frame="293" value="3.68905" />
                                                            <Key frame="329" value="3.77694" />
                                                            <Key frame="372" value="5.53477" />
                                                            <Key frame="406" value="6.23791" />
                                                            <Key frame="438" value="2.19489" />
                                                            <Key frame="473" value="1.31597" />
                                                            <Key frame="506" value="1.31597" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-8.69888" />
                                                            <Key frame="53" value="-8.78677" />
                                                            <Key frame="89" value="-2.63435" />
                                                            <Key frame="124" value="-4.48007" />
                                                            <Key frame="155" value="-6.41369" />
                                                            <Key frame="174" value="-6.50158" />
                                                            <Key frame="213" value="-3.42537" />
                                                            <Key frame="258" value="-7.02893" />
                                                            <Key frame="293" value="-7.02893" />
                                                            <Key frame="329" value="-2.54646" />
                                                            <Key frame="372" value="-3.07381" />
                                                            <Key frame="406" value="-3.07381" />
                                                            <Key frame="438" value="-5.79845" />
                                                            <Key frame="473" value="-3.86483" />
                                                            <Key frame="506" value="-3.86483" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-1.66754" />
                                                            <Key frame="53" value="-1.57965" />
                                                            <Key frame="89" value="-9.84147" />
                                                            <Key frame="124" value="-7.64418" />
                                                            <Key frame="155" value="-5.00742" />
                                                            <Key frame="174" value="-5.00742" />
                                                            <Key frame="213" value="-9.84147" />
                                                            <Key frame="258" value="-2.89802" />
                                                            <Key frame="293" value="-2.81013" />
                                                            <Key frame="329" value="-9.66569" />
                                                            <Key frame="372" value="-7.55628" />
                                                            <Key frame="406" value="-4.83164" />
                                                            <Key frame="438" value="-2.19489" />
                                                            <Key frame="473" value="-4.56797" />
                                                            <Key frame="506" value="-4.56797" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="18.1912" />
                                                            <Key frame="53" value="18.367" />
                                                            <Key frame="89" value="16.8728" />
                                                            <Key frame="124" value="17.7517" />
                                                            <Key frame="155" value="18.0154" />
                                                            <Key frame="174" value="18.0154" />
                                                            <Key frame="213" value="20.1248" />
                                                            <Key frame="258" value="17.4881" />
                                                            <Key frame="293" value="17.4881" />
                                                            <Key frame="329" value="16.8728" />
                                                            <Key frame="372" value="14.9392" />
                                                            <Key frame="406" value="11.9509" />
                                                            <Key frame="438" value="17.6638" />
                                                            <Key frame="473" value="17.6638" />
                                                            <Key frame="506" value="17.6638" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="-5.29" />
                                                            <Key frame="53" value="-5.29" />
                                                            <Key frame="89" value="-5.29" />
                                                            <Key frame="124" value="-5.29" />
                                                            <Key frame="155" value="-5.29" />
                                                            <Key frame="174" value="-5.2711" />
                                                            <Key frame="213" value="-5.29" />
                                                            <Key frame="258" value="-5.29" />
                                                            <Key frame="293" value="-5.2711" />
                                                            <Key frame="329" value="-5.29" />
                                                            <Key frame="372" value="-5.29" />
                                                            <Key frame="406" value="-5.29" />
                                                            <Key frame="438" value="-5.29" />
                                                            <Key frame="473" value="-5.29" />
                                                            <Key frame="506" value="-5.18321" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="4.48488" />
                                                            <Key frame="53" value="4.57277" />
                                                            <Key frame="89" value="5.53958" />
                                                            <Key frame="124" value="5.01223" />
                                                            <Key frame="155" value="5.10012" />
                                                            <Key frame="174" value="5.10012" />
                                                            <Key frame="213" value="3.69386" />
                                                            <Key frame="258" value="4.57277" />
                                                            <Key frame="293" value="4.04542" />
                                                            <Key frame="329" value="5.18802" />
                                                            <Key frame="372" value="7.38531" />
                                                            <Key frame="406" value="7.03374" />
                                                            <Key frame="438" value="4.3091" />
                                                            <Key frame="473" value="4.57277" />
                                                            <Key frame="506" value="4.74856" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="36" value="1.40867" />
                                                            <Key frame="53" value="1.40867" />
                                                            <Key frame="89" value="7.20953" />
                                                            <Key frame="124" value="5.53958" />
                                                            <Key frame="155" value="3.60596" />
                                                            <Key frame="174" value="3.60596" />
                                                            <Key frame="213" value="7.12163" />
                                                            <Key frame="258" value="2.02391" />
                                                            <Key frame="293" value="2.02391" />
                                                            <Key frame="329" value="6.94585" />
                                                            <Key frame="372" value="5.3638" />
                                                            <Key frame="406" value="3.86964" />
                                                            <Key frame="438" value="1.23289" />
                                                            <Key frame="473" value="3.2544" />
                                                            <Key frame="506" value="3.2544" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="Autism" robot="" id="10" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="741" y="21">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="4" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="LocalizedText" robot="" id="10" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="101" y="31">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "\RSPD=100\ Doctors \RSPD=85\ even \RSPD=75\ think \Pau=1\ eye \RSPD=100\ could be of some \RSPD=80\ help \Pau=1\ \RSPD=100\ in the \RSPD=120\ treet \RSPD=90\ \Pau=1\ mant \Pau=30\ of \RSPD=80\ autistic \RSPD=100\ kids"
		sFrench = "Les docteurs pensent même que je pourrais être utile pour le traitement des enfants autistes."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = ""
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>\RSPD=100\ Doctors \RSPD=85\ even \RSPD=75\ think \Pau=1\ eye \RSPD=100\ could be of some \RSPD=80\ help \Pau=1\ \RSPD=100\ in the \RSPD=120\ treet \RSPD=90\ \Pau=1\ mant \Pau=30\ of \RSPD=80\ autistic \RSPD=100\ kids</english>
                                                                        <french>Les docteurs pensent même que je pourrais être utile pour le traitement des enfants autistes.</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean></korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="Say Text" robot="" id="11" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="378" y="31">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Link inputowner="11" indexofinput="2" outputowner="10" indexofoutput="4" />
                                                                <Link inputowner="10" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="1" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="BlinkWink" robot="" id="6" tooltip="Eyes keep blinking until box is stopped." bitmap_expanded="1" plugin="" x="149" y="64">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[import random

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        self.bMustStop = False

    def onLoad(self):
        pass

    def onUnload(self):
        self.onInput_onStop()

    def blink(self):
        on = 0xffffff    
        off = 0x222222
        rDuration = self.getParameter("speed")
        ALLeds.post.fadeRGB( "FaceLed0", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed1", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed2", on, rDuration )
        ALLeds.post.fadeRGB( "FaceLed3", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed4", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed5", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed6", on, rDuration )
        ALLeds.fadeRGB( "FaceLed7", off, rDuration )
        time.sleep( 0.1 )
        ALLeds.fadeRGB( "FaceLeds", on, rDuration )

    def onInput_onStart(self):
        if self.bIsRunning:
            return

        self.bIsRunning = True
        self.bMustStop = False
        
        threshold = self.getParameter("threshold")
        
        while not self.bMustStop:
            n = random.uniform(0.0, 100.0)
            if n>threshold:
                self.blink()
            time.sleep(0.1)
    
        self.bIsRunning = False
        self.bMustStop = False
        self.onStopped()

    def onInput_onStop(self):
        self.bMustStop = True]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="2" value="0.1" default_value="0.1" min="0" max="1" tooltip="" id="5" />
                                                                    <Parameter name="threshold" inherits_from_parent="0" content_type="2" value="90" default_value="70" min="0" max="100" tooltip="" id="6" />
                                                                </Box>
                                                                <Link inputowner="6" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="7.20472" />
                                                            <Key frame="37" value="-12.2194" />
                                                            <Key frame="65" value="-18.5476" />
                                                            <Key frame="81" value="-3.78175" />
                                                            <Key frame="106" value="-1.76024" />
                                                            <Key frame="138" value="-8.35212" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="19" value="3.24959" />
                                                            <Key frame="37" value="-15.0319" />
                                                            <Key frame="65" value="-18.5476" />
                                                            <Key frame="81" value="-13.8893" />
                                                            <Key frame="94" value="-9" />
                                                            <Key frame="106" value="-17.1413" />
                                                            <Key frame="138" value="-16.2624" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="79.2759" />
                                                            <Key frame="35" value="60.7308" />
                                                            <Key frame="49" value="55.0178" />
                                                            <Key frame="63" value="68.641" />
                                                            <Key frame="79" value="60.3792" />
                                                            <Key frame="104" value="66.6195" />
                                                            <Key frame="136" value="79.8033" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="2.89802" />
                                                            <Key frame="35" value="2.19489" />
                                                            <Key frame="49" value="2.37067" />
                                                            <Key frame="63" value="2.72224" />
                                                            <Key frame="79" value="2.19489" />
                                                            <Key frame="104" value="5.88634" />
                                                            <Key frame="136" value="9.13834" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="-111.801" />
                                                            <Key frame="35" value="-51.0675" />
                                                            <Key frame="49" value="-49.9249" />
                                                            <Key frame="63" value="-51.3312" />
                                                            <Key frame="79" value="-56.8684" />
                                                            <Key frame="104" value="-76.8198" />
                                                            <Key frame="136" value="-85.2574" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="17" value="-58.094" />
                                                            <Key frame="35" value="-79.1001" />
                                                            <Key frame="49" value="-88.2409" />
                                                            <Key frame="63" value="-76.1118" />
                                                            <Key frame="79" value="-88.5046" />
                                                            <Key frame="104" value="-78.9244" />
                                                            <Key frame="136" value="-61.6097" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="-6" />
                                                            <Key frame="49" value="-1" />
                                                            <Key frame="63" value="-5.53958" />
                                                            <Key frame="104" value="-57" />
                                                            <Key frame="136" value="-57" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="35" value="0.8" />
                                                            <Key frame="63" value="0.768387" />
                                                            <Key frame="104" value="0.825455" />
                                                            <Key frame="136" value="0.791296" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="65.4817" />
                                                            <Key frame="33" value="53.6164" />
                                                            <Key frame="47" value="50.1886" />
                                                            <Key frame="61" value="62.3176" />
                                                            <Key frame="77" value="60.2082" />
                                                            <Key frame="102" value="66.3607" />
                                                            <Key frame="134" value="78.1381" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="-9.23104" />
                                                            <Key frame="33" value="-8.61579" />
                                                            <Key frame="47" value="-8.26423" />
                                                            <Key frame="61" value="-7.73688" />
                                                            <Key frame="77" value="-8.44001" />
                                                            <Key frame="102" value="-8.35212" />
                                                            <Key frame="134" value="-12.2194" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="79.6275" />
                                                            <Key frame="33" value="38.4942" />
                                                            <Key frame="47" value="41.3067" />
                                                            <Key frame="61" value="36.0332" />
                                                            <Key frame="77" value="53.6115" />
                                                            <Key frame="102" value="76.1118" />
                                                            <Key frame="134" value="88.3288" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="15" value="65.0423" />
                                                            <Key frame="33" value="75.853" />
                                                            <Key frame="47" value="88.0699" />
                                                            <Key frame="61" value="74.8862" />
                                                            <Key frame="77" value="88.5973" />
                                                            <Key frame="102" value="76.9956" />
                                                            <Key frame="134" value="65.5696" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="31.2" />
                                                            <Key frame="47" value="19" />
                                                            <Key frame="61" value="30.7597" />
                                                            <Key frame="102" value="51.7" />
                                                            <Key frame="134" value="59" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="0.730909" />
                                                            <Key frame="61" value="0.514873" />
                                                            <Key frame="102" value="0.781818" />
                                                            <Key frame="134" value="0.812727" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="-14.4118" />
                                                            <Key frame="62" value="-14.7634" />
                                                            <Key frame="103" value="-14.4997" />
                                                            <Key frame="135" value="-14.5876" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="2.46337" />
                                                            <Key frame="62" value="1.93602" />
                                                            <Key frame="103" value="3.2544" />
                                                            <Key frame="135" value="5.3638" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="19.2507" />
                                                            <Key frame="62" value="18.8991" />
                                                            <Key frame="103" value="18.987" />
                                                            <Key frame="135" value="19.0749" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="-5.29" />
                                                            <Key frame="62" value="-5.10012" />
                                                            <Key frame="103" value="-5.29" />
                                                            <Key frame="135" value="-5.29" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="2.107" />
                                                            <Key frame="62" value="2.37067" />
                                                            <Key frame="103" value="1.84332" />
                                                            <Key frame="135" value="1.66754" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="-2.63435" />
                                                            <Key frame="62" value="-2.28278" />
                                                            <Key frame="103" value="-3.33748" />
                                                            <Key frame="135" value="-4.83164" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="-9.4899" />
                                                            <Key frame="62" value="-9.66569" />
                                                            <Key frame="103" value="-8.87466" />
                                                            <Key frame="135" value="-7.11683" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="18.4549" />
                                                            <Key frame="62" value="17.4881" />
                                                            <Key frame="103" value="17.7517" />
                                                            <Key frame="135" value="18.2791" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="-5.29" />
                                                            <Key frame="62" value="-5.29" />
                                                            <Key frame="103" value="-5.29" />
                                                            <Key frame="135" value="-5.29" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="3.69386" />
                                                            <Key frame="62" value="4.48488" />
                                                            <Key frame="103" value="4.13332" />
                                                            <Key frame="135" value="3.86964" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="7.12163" />
                                                            <Key frame="62" value="7.20953" />
                                                            <Key frame="103" value="6.77007" />
                                                            <Key frame="135" value="5.45169" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="S.Reco" robot="" id="6" tooltip="What are you usefull for ?" bitmap_expanded="1" plugin="" x="466" y="20">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="Speech Reco._onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Starts speech recongition." id="2" />
                                                <Input name="Speech Reco._onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stops speech recongintion." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="" id="4" />
                                                <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="behavior_layer1" mute="0">
                                                        <BehaviorKeyframe name="keyframe1" index="1" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="Choice" robot="" id="1" tooltip="Configure speech recognition to seelct an answer from a set of sentences. Head tactile sensors can also be used to select a sentence." bitmap_expanded="1" plugin="" x="85" y="125">
                                                                    <bitmap>media/images/box/appu/voice_recognition.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[# Version: v1.0
# Author : J.Amsellem
# Date : 26/01/2011

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        pass

    def onUnload(self):
        pass
        
    def onInput_onStart(self, dictionnary):
        pass
        
    def onInput_onStop(self):
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Starts speech recongition with an array of string as a dictionnary." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stops speech recongintion." id="3" />
                                                                    <Output name="onRecognized" type="2" type_size="1" nature="1" inner="0" tooltip="This output is activated when a word is recognized" id="4" />
                                                                    <Output name="onFailed" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when speech recognition is ready to be launched." id="5" />
                                                                    <Parameter name="Confidence" inherits_from_parent="0" content_type="2" value="0.2" default_value="0.2" min="0" max="1" tooltip="Speech recognition confidence threshold." id="6" />
                                                                    <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="1" value="10" default_value="10" min="0" max="100" tooltip="Lap of time alowed to give the choice." id="7" />
                                                                    <Parameter name="Number of tries" inherits_from_parent="0" content_type="1" value="3" default_value="3" min="1" max="10" tooltip="Number of bad recognition alowed." id="8" />
                                                                    <Parameter name="French" inherits_from_parent="0" content_type="3" value="A quoi peux-tu déjà servir ? " default_value="" custom_choice="0" tooltip="List of allowed answers when current language is french. Answers are formated like the following :&#x0A;answer1/alternate answer1;answer2;answer3" id="9" />
                                                                    <Parameter name="English" inherits_from_parent="0" content_type="3" value="What are you already useful for" default_value="" custom_choice="0" tooltip="List of allowed answers when current language is english. Answers are formated like the following :&#x0A;answer1/alternate answer1;answer2;answer3" id="10" />
                                                                    <Parameter name="Repeat choice" inherits_from_parent="0" content_type="0" value="0" default_value="0" tooltip="Indicates if the validated choice should be repeated or not." id="11" />
                                                                    <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
                                                                        <watches />
                                                                        <BehaviorLayer name="behavior_layer1" mute="0">
                                                                            <BehaviorKeyframe name="keyframe1" index="1" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="TactileCodes" robot="" id="3" tooltip="Detection de sequence tactile sur la tête de Nao." bitmap_expanded="1" plugin="" x="108" y="115">
                                                                                        <bitmap>media/images/box/appu/fingerprint.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class SequenceHandler():
    def __init__(self, aSeq):
        self.aTactilSequence = aSeq
        self.reset()
    
    def reset(self):
        self.nTapTime = None
        self.nTapIndex = 2
        
    def update(self, aState, nTime):
        # In any case, if too much time elasped, sequence is invalidated
        if self.nTapTime != None and (nTime - self.nTapTime) > self.aTactilSequence[self.nTapIndex-1]:
            self.reset()
        # If current sensors state match current expected shape
        if aState == self.aTactilSequence[self.nTapIndex]:
            self.nTapTime = nTime
            self.nTapIndex += 2
        # If current sensor state does not match sequence at current index BUT match sequence at first index
        elif aState == self.aTactilSequence[1]:
            self.nTapTime = nTime
            self.nTapIndex = 4
        # If we've reach the end of the sequence, then output !!
        if self.nTapIndex > len(self.aTactilSequence):
            return self.aTactilSequence[0]
        else:
            return None
        
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        # Build a list of devices with full name
        self.aDeviceNames = ["%sTactilTouched" % name for name in ["Front", "Middle", "Rear"]]
        
        # Parameters
        parameters = [   ["SingleFront", "Single front", [1, 0, 0], 1.0, [0, 0, 0]],
                                ["SingleMiddle", "Single middle", [0, 1, 0], 1.0, [0, 0, 0]],
                                ["SingleRear", "Single rear", [0, 0, 1], 1.0, [0, 0, 0]],
                                ["CaressFtoR", "Caress front to rear", [1, 0, 0], 0.5, [1, 1, 0], 0.5, [0, 1, 0], 0.5, [0, 1, 1], 0.5, [0, 0, 1]],
                                ["CaressRtoF", "Caress rear to front", [0, 0, 1], 0.5, [0, 1, 1], 0.5, [0, 1, 0], 0.5, [1, 1, 0], 0.5, [1, 0, 0]],
                                ["SingleTap", "Single tap", [1, 1, 1], 0.5, [0, 0, 0]],
                                ["EnumerateFtoR", "Enumerate front to rear", [1, 0, 0], 1.0, [0, 1, 0], 1.0, [0, 0, 1]],
                                ["EnumerateRtoF", "Enumerate rear to front", [0, 0, 1], 1.0, [0, 1, 0], 1.0, [1, 0, 0]],
                                ["ZoomIn", "Zoom in", [1, 0, 1], 1.0, [0, 1, 0]],
                                ["ZoomOut", "Zoom out", [0, 1, 0], 1.0, [1, 0, 1]],
                                ["DoubleFront", "Double front", [1, 0, 0], 1.0, [0, 0, 0], 1.0, [1, 0, 0]],
                                ["DoubleMiddle", "Double middle", [0, 1, 0], 1.0, [0, 0, 0], 1.0, [0, 1, 0]],
                                ["DoubleRear", "Double rear", [0, 0, 1], 1.0, [0, 0, 0], 1.0, [0, 0, 1]],
                                ["DoubleTap", "Double tap", [1, 1, 1], 1.0, [0, 0, 0], 1.0, [1, 1, 1]],
                                ["SecretCode", "Secret code", [1, 0, 1], 1.0, [0, 0, 0], 1.0, [1, 0, 1], 1.0, [0, 1, 0]],                                
                                ["CalmDown", "Calm down", [1, 1, 1], 8.0, [0, 0, 0]]    ]
        # Create a sequence handler object for each enable sequence
        self.aSequenceHandler = []
        for seq in parameters:
            if self.getParameter(seq[1]):
                self.aSequenceHandler.append(SequenceHandler(seq))

    def onLoad(self):
        self.bIsRunning = False
        self.onInput_reset()
        
    def onUnload(self):
        self.onInput_onStop()

    def onSensorChange(self, pDataName, pValue, pMessage):
        "This is called whenever one of the three tactil sensors state change"    
        aState = ALMemory.getListData( self.aDeviceNames )
        # This prevent to process several times the same sensor state
        if aState != self.aState:
            self.aState = aState
            nTime = time.time()
            #~ self.log(str(aState))
            for seq in self.aSequenceHandler:
                sOutput = seq.update(aState, nTime)
                if  sOutput != None:
                    self.Match(sOutput)
                    # Force all other sequence to be reset to prevent multiple match.
                    # But this will prevent sequences like "DoubleTap" to work since each "SingleTap" will reset "DoubleTap"
                    self.onInput_reset()
                    # Get the output function from the sequence name
                    try:
                        func = getattr(self, sOutput)
                        func()
                    # If no output function found, just forget it
                    except:
                        pass

    def onInput_onStart(self):
        if not self.bIsRunning:
            self.bIsRunning = True
            # Save initial sensor state
            self.aState = None#ALMemory.getListData( self.aDeviceNames )        
            # Subscribe to each sensor device
            for device in self.aDeviceNames:
                ALMemory.subscribeToEvent( device, self.getName(), "onSensorChange" )            
    
    def onInput_onStop(self):
        if self.bIsRunning:
            for device in self.aDeviceNames:
                ALMemory.unsubscribeToEvent( device, self.getName() )
            self.onInput_reset()
            self.bIsRunning = False
            
    def onInput_reset(self):
        for seq in self.aSequenceHandler:
            seq.reset()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Output name="Match" type="3" type_size="1" nature="2" inner="0" tooltip="double tap" id="4" />
                                                                                        <Output name="SingleTap" type="1" type_size="1" nature="2" inner="0" tooltip="" id="5" />
                                                                                        <Output name="DoubleFront" type="1" type_size="1" nature="2" inner="0" tooltip="" id="6" />
                                                                                        <Output name="DoubleMiddle" type="1" type_size="1" nature="2" inner="0" tooltip="" id="7" />
                                                                                        <Output name="DoubleRear" type="1" type_size="1" nature="2" inner="0" tooltip="" id="8" />
                                                                                        <Output name="EnumerateRtoF" type="1" type_size="1" nature="2" inner="0" tooltip="" id="9" />
                                                                                        <Output name="EnumerateFtoR" type="1" type_size="1" nature="2" inner="0" tooltip="" id="10" />
                                                                                        <Output name="CaressRtoF" type="1" type_size="1" nature="2" inner="0" tooltip="" id="11" />
                                                                                        <Output name="CaressFtoR" type="1" type_size="1" nature="2" inner="0" tooltip="" id="12" />
                                                                                        <Output name="DoubleTap" type="1" type_size="1" nature="2" inner="0" tooltip="" id="13" />
                                                                                        <Output name="ZoomIn" type="1" type_size="1" nature="2" inner="0" tooltip="" id="14" />
                                                                                        <Output name="ZoomOut" type="1" type_size="1" nature="2" inner="0" tooltip="" id="15" />
                                                                                        <Output name="CalmDown" type="1" type_size="1" nature="2" inner="0" tooltip="" id="16" />
                                                                                        <Output name="SingleFront" type="1" type_size="1" nature="2" inner="0" tooltip="" id="17" />
                                                                                        <Output name="SingleMiddle" type="1" type_size="1" nature="2" inner="0" tooltip="" id="18" />
                                                                                        <Output name="SingleRear" type="1" type_size="1" nature="2" inner="0" tooltip="" id="19" />
                                                                                        <Parameter name="Caress front to rear" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="Caress front to rear" id="20" />
                                                                                        <Parameter name="Caress rear to front" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="21" />
                                                                                        <Parameter name="Single tap" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="22" />
                                                                                        <Parameter name="Double front" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="23" />
                                                                                        <Parameter name="Double middle" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="24" />
                                                                                        <Parameter name="Double rear" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="25" />
                                                                                        <Parameter name="Calm down" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="26" />
                                                                                        <Parameter name="Enumerate front to rear" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="27" />
                                                                                        <Parameter name="Enumerate rear to front" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="28" />
                                                                                        <Parameter name="Zoom in" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="29" />
                                                                                        <Parameter name="Zoom out" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="30" />
                                                                                        <Parameter name="Double tap" inherits_from_parent="0" content_type="0" value="0" default_value="0" tooltip="" id="31" />
                                                                                        <Parameter name="Secret code" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="32" />
                                                                                        <Parameter name="Single front" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="33" />
                                                                                        <Parameter name="Single middle" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="34" />
                                                                                        <Parameter name="Single rear" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="35" />
                                                                                    </Box>
                                                                                    <Box name="Dictionnary" robot="" id="1" tooltip="List of words to recognize" bitmap_expanded="1" plugin="" x="451" y="106">
                                                                                        <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.nIndex = None

    def onUnload(self):
        pass

    def onInput_onStart(self, dico):
        asr = ALProxy("ALSpeechRecognition")    
        sLang = asr.getLanguage()
        
        # If no dico provided as parameter, use the one from parameters
        if dico == None:
            dico = self.getParameter(sLang).split(";")
            
        # This array will contain the text to say for each allowed answer
        self.aAnswers = []
        # This array will contain every sentences to be recognized by speech recognition engine
        self.aDictionnary = []
        
        for answer in dico:
            # For one answer, each possible proposition is separated by a '/' character
            tmp = answer.split("/")
            self.aDictionnary += tmp
            self.aAnswers.append(tmp[0])
            
        self.log(str(self.aDictionnary))
        self.log(str(self.aAnswers))
        try:
            asr.setWordListAsVocabulary( self.aDictionnary )
            asr.setVisualExpression(True)
        except RuntimeError, e:
            self.log("Could not change current speech recognition dictionnary: " + str(e))
            raise e
        self.onReady(dico)

    def onInput_onSayNext(self):
        if self.nIndex == None:
            self.nIndex = 0
        else:
            self.nIndex += 1
        self.nIndex = self.nIndex % len(self.aAnswers)
        self.onSay(self.aAnswers[self.nIndex])

        
    def onInput_onSayPrev(self):
        if self.nIndex == None:
            self.nIndex = -1
        else:
            self.nIndex -= 1    
        self.nIndex = self.nIndex % len(self.aAnswers)            
        self.onSay(self.aAnswers[self.nIndex])
        
    def onInput_onValidate(self):
        if self.nIndex != None:
            self.onValidated(self.aAnswers[self.nIndex])
        
    def onInput_onStop(self):
        pass]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Input name="onSayNext" type="1" type_size="1" nature="1" inner="0" tooltip="" id="4" />
                                                                                        <Input name="onValidate" type="1" type_size="1" nature="1" inner="0" tooltip="" id="5" />
                                                                                        <Input name="onSayPrev" type="1" type_size="1" nature="1" inner="0" tooltip="" id="6" />
                                                                                        <Output name="onSay" type="3" type_size="1" nature="2" inner="0" tooltip="" id="7" />
                                                                                        <Output name="onValidated" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="8" />
                                                                                        <Output name="onReady" type="0" type_size="1" nature="2" inner="0" tooltip="" id="9" />
                                                                                    </Box>
                                                                                    <Box name="Say Text" robot="" id="4" tooltip="Say the text set in parameters." bitmap_expanded="1" plugin="" x="901" y="97">
                                                                                        <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote

    def onLoad(self):
        self.bIsRunning = False
        self.ids = []
        
    def onUnload(self):
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        while( self.bIsRunning ):
            time.sleep( 0.2 )

    def onInput_onStart(self, p):
        self.bIsRunning = True
        try:
            sentence = "\RSPD="+ str( self.getParameter("Speed (%)") ) + "\ "
            sentence += "\VCT="+ str( self.getParameter("Voice shaping (%)") ) + "\ "
            sentence += str(p)
            sentence +=  "\RST\ "
            id = self.tts.post.say(str(sentence))
            self.ids.append(id)
            self.tts.wait(id, 0)
        finally:
            try:
                self.ids.remove(id)
            except:
                pass
            if( self.ids == [] ):
                self.onStopped() # activate output of the box
                self.bIsRunning = False

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="Voice shaping (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='Used to modify at runtime the voice feature (tone, speed). In a slighty&#x0A;different way than pitch and speed, it gives a kind of &quot;gender or age&#x0A;modification&quot; effect.&#x0A;&#x0A;For instance, a quite good male derivation of female voice can be&#x0A;obtained setting this parameter to 78%.&#x0A;&#x0A;Note: For a better effect, you can compensate this parameter with the&#x0A;speed parameter. For example, if you want to decrease by 20% the voice&#x0A;shaping, you will have to increase by 20% the speed to keep a constant&#x0A;average speed.' id="5" />
                                                                                        <Parameter name="Speed (%)" inherits_from_parent="1" content_type="1" value="110" default_value="100" min="50" max="200" tooltip="Changes the speed of the voice.&#x0A;&#x0A;Note: For a better effect, you can compensate this parameter with the voice&#x0A;shaping parameter. For example, if you want to increase by 20% the speed, you&#x0A;will have to decrease by 20% the voice shaping to keep a constant average&#x0A;speed." id="6" />
                                                                                    </Box>
                                                                                    <Box name="Launch ASR" robot="" id="2" tooltip="Try to recognize the list of words set in the ASR.&#x0A;&#x0A;It has 2 outputs:&#x0A;- First one transmit the understood word if the threshold associated is&#x0A;high enough.&#x0A;- Second one is stimulated when nothing has been understood or where the&#x0A;threshold was not high enough." bitmap_expanded="1" plugin="" x="590" y="268">
                                                                                        <bitmap>media/images/box/interaction/ear.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False

    def onInput_onStart(self):
        self.bIsRunning = True

    def onInput_onStop(self):
        if( self.bIsRunning ):
            self.onUnload()
            self.onStopped()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Starts speech recongition." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stops speech recongintion." id="3" />
                                                                                        <Input name="WordRecognized" type="0" type_size="1" nature="4" stm_value_name="WordRecognized" inner="1" tooltip="Connected to ALMemory. Will be stimulated every time the value subscribed to changes, respecting the refresh period." id="4" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is stopped." id="5" />
                                                                                        <Output name="wordRecognized" type="3" type_size="1" nature="2" inner="0" tooltip="Transmit a word recognized with enough trust. Can be connected directly to a dispatcher." id="6" />
                                                                                        <Output name="onNothing" type="1" type_size="1" nature="2" inner="0" tooltip="Nothing has been understood during last process." id="7" />
                                                                                        <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
                                                                                            <watches />
                                                                                            <BehaviorLayer name="behavior_layer1" mute="0">
                                                                                                <BehaviorKeyframe name="keyframe1" index="1" bitmap="media/images/box/interaction/say.png">
                                                                                                    <Diagram scale="-1">
                                                                                                        <Box name="Process Word" robot="" id="1" tooltip="Process speech recognition extractor data (WordRecognized) to give the most&#x0A;interesting data." bitmap_expanded="1" plugin="" x="140" y="59">
                                                                                                            <bitmap>media/images/box/interaction/ear.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self, p):
        if len(p) > 1:
            if p[1] >= self.getParameter("Confidence"):
                self.onWord(p[0]) #~ activate output of the box
            else:
                self.onNothing()
        else:
            self.onNothing()]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input. It must be the&#x0A;WordRecognized extractor data." id="2" />
                                                                                                            <Output name="onWord" type="3" type_size="1" nature="1" inner="0" tooltip="The word recognized." id="3" />
                                                                                                            <Output name="onNothing" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent if nothing has been recognized or the word recognized had&#x0A;not a recognition threshold high enough to be taken into account." id="4" />
                                                                                                        </Box>
                                                                                                        <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="4" />
                                                                                                        <Link inputowner="0" indexofinput="6" outputowner="1" indexofoutput="3" />
                                                                                                        <Link inputowner="0" indexofinput="7" outputowner="1" indexofoutput="4" />
                                                                                                    </Diagram>
                                                                                                </BehaviorKeyframe>
                                                                                            </BehaviorLayer>
                                                                                            <ActuatorList />
                                                                                        </Timeline>
                                                                                    </Box>
                                                                                    <Box name="Repeat" robot="" id="5" tooltip="Repeat n times." bitmap_expanded="1" plugin="" x="756" y="325">
                                                                                        <bitmap>media/images/box/loop.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.nTimes = 0

    def onUnload(self):
        pass

    def onInput_onStart(self):
        self.nTimes += 1    
        if self.nTimes>= self.getParameter("Number of tries"):
            self.onStopped()
        else:
            self.onRepeat()

    def onInput_onStop(self):
        pass]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Output name="onRepeat" type="1" type_size="1" nature="2" inner="0" tooltip="Activated on each repetition" id="4" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Activated when the maximum number of repetetion is reached" id="5" />
                                                                                        <Parameter name="Number of tries" inherits_from_parent="0" content_type="1" value="2" default_value="2" min="1" max="100" tooltip="" id="6" />
                                                                                    </Box>
                                                                                    <Box name="Wait" robot="" id="6" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." bitmap_expanded="1" plugin="" x="445" y="6">
                                                                                        <bitmap>media/images/box/wait.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import threading # opkg install python-threading
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        bRunning = self.tb
        self.onUnload()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                                                        <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                                                    </Box>
                                                                                    <Box name="IndexOf" robot="" id="7" tooltip="Output the index of the entry in the array" bitmap_expanded="1" plugin="" x="754" y="226">
                                                                                        <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.aArray = None

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onEntry(self, p):
        found = False
        index = 0
        while not found and index < len(self.aArray):
            found = p in self.aArray[index]
            index += 1
        if found:
            if self.getParameter("Repeat choice"):
                tmp = self.aArray[index-1].split("/")
                self.onSay(tmp[0])
            self.onStopped(index-1)
        else:
            self.onStopped(-1)

    def onInput_onArray(self, p):
        self.aArray = p

    def onInput_onStop(self):
        pass]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onEntry" type="3" type_size="1" nature="1" inner="0" tooltip="" id="2" />
                                                                                        <Input name="onArray" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="3" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="4" />
                                                                                        <Output name="onSay" type="3" type_size="1" nature="2" inner="0" tooltip="" id="5" />
                                                                                        <Output name="onStopped" type="2" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="6" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                                    <Link inputowner="1" indexofinput="6" outputowner="3" indexofoutput="19" />
                                                                                    <Link inputowner="1" indexofinput="4" outputowner="3" indexofoutput="17" />
                                                                                    <Link inputowner="3" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                                    <Link inputowner="4" indexofinput="2" outputowner="1" indexofoutput="7" />
                                                                                    <Link inputowner="2" indexofinput="3" outputowner="3" indexofoutput="17" />
                                                                                    <Link inputowner="2" indexofinput="3" outputowner="3" indexofoutput="19" />
                                                                                    <Link inputowner="1" indexofinput="5" outputowner="3" indexofoutput="18" />
                                                                                    <Link inputowner="5" indexofinput="2" outputowner="2" indexofoutput="7" />
                                                                                    <Link inputowner="0" indexofinput="5" outputowner="5" indexofoutput="5" />
                                                                                    <Link inputowner="0" indexofinput="5" outputowner="3" indexofoutput="5" />
                                                                                    <Link inputowner="6" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                                    <Link inputowner="0" indexofinput="5" outputowner="6" indexofoutput="4" />
                                                                                    <Link inputowner="6" indexofinput="3" outputowner="3" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="9" />
                                                                                    <Link inputowner="7" indexofinput="3" outputowner="1" indexofoutput="9" />
                                                                                    <Link inputowner="7" indexofinput="2" outputowner="2" indexofoutput="6" />
                                                                                    <Link inputowner="7" indexofinput="2" outputowner="1" indexofoutput="8" />
                                                                                    <Link inputowner="0" indexofinput="4" outputowner="7" indexofoutput="6" />
                                                                                    <Link inputowner="4" indexofinput="2" outputowner="7" indexofoutput="5" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                        </BehaviorLayer>
                                                                        <ActuatorList />
                                                                    </Timeline>
                                                                </Box>
                                                                <Box name="Stand_Breathe_Eco" robot="" id="2" tooltip="Makes Nao breathe with reduced stiffness." bitmap_expanded="1" plugin="" x="85" y="18">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bStarted = False

    def onUnload(self):
        if self.bStarted == True:
            self.onInput_onStop()

    def onInput_onStart(self):
        self.bStarted = True

    def onInput_onStop(self):
        self.gotoAndStop(200)
        self.bStarted = False
        self.onStopped()
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="220" scale="10">
                                                                        <watches />
                                                                        <BehaviorLayer name="behavior_layer1" mute="0">
                                                                            <BehaviorKeyframe name="breathe" index="1" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="BlinkWink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="117" y="46">
                                                                                        <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import random

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        self.bMustStop = False

    def onLoad(self):
        pass

    def onUnload(self):
        self.onInput_onStop()

    def blink(self):
        on = 0xffffff    
        off = 0x222222
        rDuration = self.getParameter("speed")
        ALLeds.post.fadeRGB( "FaceLed0", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed1", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed2", on, rDuration )
        ALLeds.post.fadeRGB( "FaceLed3", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed4", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed5", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed6", on, rDuration )
        ALLeds.fadeRGB( "FaceLed7", off, rDuration )
        time.sleep( 0.1 )
        ALLeds.fadeRGB( "FaceLeds", on, rDuration )

    def onInput_onStart(self):
        if self.bIsRunning:
            return

        self.bIsRunning = True
        self.bMustStop = False
        
        threshold = self.getParameter("threshold")
        
        while not self.bMustStop:
            n = random.uniform(0.0, 100.0)
            if n>threshold:
                self.blink()
            time.sleep(0.1)
    
        self.bIsRunning = False
        self.bMustStop = False

    def onInput_onStop(self):
        self.bMustStop = True]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                        <Parameter name="speed" inherits_from_parent="0" content_type="2" value="0.1" default_value="0.1" min="0" max="1" tooltip="" id="5" />
                                                                                        <Parameter name="threshold" inherits_from_parent="0" content_type="2" value="90" default_value="70" min="0" max="100" tooltip="" id="6" />
                                                                                    </Box>
                                                                                    <Box name="Set Stiffness" robot="" id="7" tooltip="Set motors stiffness." bitmap_expanded="1" plugin="" x="86" y="155">
                                                                                        <bitmap>media/images/box/movement/stiffness.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False

    def setStiffness(self, stiffness):
        self.bIsRunning = True
        duration = self.getParameter("Duration (s)")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)
        self.bIsRunning = False

    def onInput_onSet(self):
        if( self.bIsRunning ):
            return
        self.setStiffness(self.getParameter("Motors stiffness (%)")/100.)
        self.onReady() #~ activate output of the box]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onSet" type="1" type_size="1" nature="1" inner="0" tooltip="When this input is stimulated, the stiffness of the selected motors is set to&#x0A;the stiffness parameter value." id="2" />
                                                                                        <Output name="onReady" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent when stiffness has been set." id="3" />
                                                                                        <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="4" />
                                                                                        <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="5" />
                                                                                        <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="6" />
                                                                                        <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="7" />
                                                                                        <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="8" />
                                                                                        <Parameter name="Motors stiffness (%)" inherits_from_parent="0" content_type="1" value="30" default_value="100" min="0" max="100" tooltip="Stiffness value the motors are set to." id="9" />
                                                                                        <Parameter name="Duration (s)" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0.02" max="10" tooltip="How much time to go to the max/min stiffness in seconds." id="10" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                    <Link inputowner="7" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                            <BehaviorKeyframe name="loop" index="181" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="gotoAndPlay" robot="" id="1" tooltip="Jump to a given frame (edit parameters to modify it) and start playing from this index." bitmap_expanded="1" plugin="" x="195" y="50">
                                                                                        <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndPlayParent(self.getParameter("frame number"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                                        <Parameter name="frame number" inherits_from_parent="0" content_type="1" value="1" default_value="1" min="0" max="10000" tooltip="" id="3" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                            <BehaviorKeyframe name="exit" index="200" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="Set Stiffness" robot="" id="1" tooltip="Set motors stiffness." bitmap_expanded="1" plugin="" x="172" y="14">
                                                                                        <bitmap>media/images/box/movement/stiffness.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False

    def setStiffness(self, stiffness):
        self.bIsRunning = True
        duration = self.getParameter("Duration (s)")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)
        self.bIsRunning = False

    def onInput_onSet(self):
        if( self.bIsRunning ):
            return
        self.setStiffness(self.getParameter("Motors stiffness (%)")/100.)
        self.onReady() #~ activate output of the box]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onSet" type="1" type_size="1" nature="1" inner="0" tooltip="When this input is stimulated, the stiffness of the selected motors is set to&#x0A;the stiffness parameter value." id="2" />
                                                                                        <Output name="onReady" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent when stiffness has been set." id="3" />
                                                                                        <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="4" />
                                                                                        <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="5" />
                                                                                        <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="6" />
                                                                                        <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="7" />
                                                                                        <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="8" />
                                                                                        <Parameter name="Motors stiffness (%)" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="0" max="100" tooltip="Stiffness value the motors are set to." id="9" />
                                                                                        <Parameter name="Duration (s)" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0.02" max="10" tooltip="How much time to go to the max/min stiffness in seconds." id="10" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                        </BehaviorLayer>
                                                                        <ActuatorList>
                                                                            <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="1" alwaysVisible="0">
                                                                                <Key frame="80" value="-0.79343" />
                                                                                <Key frame="105" value="-0.881321" />
                                                                                <Key frame="155" value="-0.705538" />
                                                                                <Key frame="180" value="-1.40867" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="1" alwaysVisible="0">
                                                                                <Key frame="80" value="-4.57277" />
                                                                                <Key frame="105" value="-4.57277" />
                                                                                <Key frame="155" value="-12.3072" />
                                                                                <Key frame="180" value="-14.5045" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="89.0319" />
                                                                                <Key frame="102" value="90.9655" />
                                                                                <Key frame="152" value="88.5925" />
                                                                                <Key frame="177" value="88.5925" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="6.58948" />
                                                                                <Key frame="102" value="6.3258" />
                                                                                <Key frame="152" value="6.15002" />
                                                                                <Key frame="177" value="6.23791" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="-65.9212" />
                                                                                <Key frame="102" value="-69.4369" />
                                                                                <Key frame="152" value="-69.7005" />
                                                                                <Key frame="177" value="-72.9525" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="-39.5489" />
                                                                                <Key frame="102" value="-41.3067" />
                                                                                <Key frame="152" value="-32.957" />
                                                                                <Key frame="177" value="-29.6171" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="6.58948" />
                                                                                <Key frame="102" value="6.41369" />
                                                                                <Key frame="152" value="6.15002" />
                                                                                <Key frame="177" value="6.15002" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="0.23348" />
                                                                                <Key frame="102" value="0.23348" />
                                                                                <Key frame="152" value="0.23348" />
                                                                                <Key frame="177" value="0.23348" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="88.5973" />
                                                                                <Key frame="98" value="88.6852" />
                                                                                <Key frame="148" value="91.7614" />
                                                                                <Key frame="173" value="91.7614" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="-6.15482" />
                                                                                <Key frame="98" value="-5.27591" />
                                                                                <Key frame="148" value="-4.39699" />
                                                                                <Key frame="173" value="-4.57277" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="66.0922" />
                                                                                <Key frame="98" value="69.3442" />
                                                                                <Key frame="148" value="77.6939" />
                                                                                <Key frame="173" value="80.067" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="45.0909" />
                                                                                <Key frame="98" value="44.5635" />
                                                                                <Key frame="148" value="35.3349" />
                                                                                <Key frame="173" value="32.6981" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="10.193" />
                                                                                <Key frame="98" value="10.1051" />
                                                                                <Key frame="148" value="10.1051" />
                                                                                <Key frame="173" value="10.1051" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="0.40948" />
                                                                                <Key frame="98" value="0.40948" />
                                                                                <Key frame="148" value="0.40948" />
                                                                                <Key frame="173" value="0.40948" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-8.52309" />
                                                                                <Key frame="100" value="-8.52309" />
                                                                                <Key frame="150" value="-8.17153" />
                                                                                <Key frame="175" value="-8.4352" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="3.43018" />
                                                                                <Key frame="100" value="3.43018" />
                                                                                <Key frame="150" value="7.56109" />
                                                                                <Key frame="175" value="7.56109" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="12.0436" />
                                                                                <Key frame="100" value="11.9557" />
                                                                                <Key frame="150" value="12.1315" />
                                                                                <Key frame="175" value="12.0436" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-5.18802" />
                                                                                <Key frame="100" value="-5.10012" />
                                                                                <Key frame="150" value="-5.18802" />
                                                                                <Key frame="175" value="-5.18802" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="3.24959" />
                                                                                <Key frame="100" value="3.33748" />
                                                                                <Key frame="150" value="3.42537" />
                                                                                <Key frame="175" value="3.24959" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-4.04062" />
                                                                                <Key frame="100" value="-4.04062" />
                                                                                <Key frame="150" value="-7.20472" />
                                                                                <Key frame="175" value="-7.29261" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-6.3258" />
                                                                                <Key frame="100" value="-6.23791" />
                                                                                <Key frame="150" value="-2.01911" />
                                                                                <Key frame="175" value="-1.93121" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="10.5446" />
                                                                                <Key frame="100" value="10.6325" />
                                                                                <Key frame="150" value="11.1598" />
                                                                                <Key frame="175" value="11.1598" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-4.2164" />
                                                                                <Key frame="100" value="-4.2164" />
                                                                                <Key frame="150" value="-4.30429" />
                                                                                <Key frame="175" value="-4.39218" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="3.60596" />
                                                                                <Key frame="100" value="3.69386" />
                                                                                <Key frame="150" value="3.60596" />
                                                                                <Key frame="175" value="3.43018" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="5.80326" />
                                                                                <Key frame="100" value="5.62747" />
                                                                                <Key frame="150" value="2.55126" />
                                                                                <Key frame="175" value="2.55126" />
                                                                            </ActuatorCurve>
                                                                        </ActuatorList>
                                                                    </Timeline>
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="1" indexofoutput="5" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList />
                                                </Timeline>
                                            </Box>
                                            <Link inputowner="8" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="1" indexofinput="2" outputowner="6" indexofoutput="4" />
                                            <Link inputowner="4" indexofinput="2" outputowner="8" indexofoutput="4" />
                                            <Link inputowner="6" indexofinput="2" outputowner="4" indexofoutput="4" />
                                            <Link inputowner="2" indexofinput="2" outputowner="5" indexofoutput="4" />
                                            <Link inputowner="10" indexofinput="2" outputowner="1" indexofoutput="4" />
                                            <Link inputowner="5" indexofinput="2" outputowner="10" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                    <BehaviorKeyframe name="Edutainment" index="49" bitmap="">
                                        <Diagram scale="-1">
                                            <Box name="Head" robot="" id="3" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="480" y="17">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onUnload(self):
		#puts code for box cleanup here
		""

	def onInput_onStart(self):
		#self.onStopped() # activate output of the box
		""

	def onInput_onStop(self):
		""]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="15" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="55.6955" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-19.2329" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="Read" robot="" id="5" tooltip="Read head position in memory" bitmap_expanded="1" plugin="" x="101" y="60">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        p = ALMemory.getData(self.getParameter("var name"))
        self.onStopped(p)]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Output name="onStopped" type="0" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="3" />
                                                <Parameter name="var name" inherits_from_parent="0" content_type="3" value="side" default_value="" custom_choice="0" tooltip="" id="4" />
                                            </Box>
                                            <Box name="Dispatcher" robot="" id="2" tooltip="Dispatch an event carrying an information, depending on the information. Will be tested against all the values of the table, and the matching output will be stimulated !" bitmap_expanded="1" plugin="dispatcher_plugin" x="234" y="60">
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onInput_onStart(self, p):
		if(p == ("Left")):
			self.output_1(p)
		elif(p == ("Right")):
			self.output_2(p)
		else:
			self.onDefault()]]>
</content>
                                                </script>
                                                <pluginContent>
                                                    <keywords>
                                                        <keyword>&quot;Left&quot;</keyword>
                                                        <keyword>&quot;Right&quot;</keyword>
                                                        <keyword></keyword>
                                                    </keywords>
                                                </pluginContent>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Output name="onDefault" type="1" type_size="1" nature="2" inner="0" tooltip="If nothing has been matched in dispatcher." id="3" />
                                                <Output name="output_1" type="0" type_size="1" nature="2" inner="0" tooltip="" id="4" />
                                                <Output name="output_2" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="5" />
                                                <Output name="output_3" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="6" />
                                            </Box>
                                            <Box name="Head" robot="" id="12" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="484" y="114">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onUnload(self):
		#puts code for box cleanup here
		""

	def onInput_onStart(self):
		#self.onStopped() # activate output of the box
		""

	def onInput_onStop(self):
		""]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="15" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-53.1086" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-18.1242" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="Edutainment" robot="" id="4" tooltip="This box is empty (contains a single motion layer with no motors defined in it) and should be used to create any movement you&apos;d like." bitmap_expanded="1" plugin="" x="782" y="63">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Timeline fps="23" resources_acquisition="0" size="1000" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="speech" mute="0">
                                                        <BehaviorKeyframe name="speech" index="10" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="Say Text" robot="" id="2" tooltip="Say the sentence asked. See box parameters for fine tuning of the voice." bitmap_expanded="1" plugin="" x="363" y="69">
                                                                    <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote
        
    def onLoad(self):
        #puts code for box cleanup here
        self.ids = []
        
    def onUnload(self):
        #puts code for box cleanup here    
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        
    def onInput_onStart(self, p):
        sentence = "\RSPD="+ str( self.getParameter("speed") )+ "\ "
        sentence += "\VCT="+ str( self.getParameter("Voice Shaping") ) + "\ " 
        sentence += str(p)
        sentence +=  "\RST\ "
        id = self.tts.post.say(sentence)
        self.ids.append(id)
        self.tts.wait(id, 0)
        self.ids.remove(id)
        self.onStopped() # activate output of the box

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Parameter name="Voice Shaping" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='This tag is used to modify at runtime the voice feature (tone, speed) in way slightly different of what pitch and speed modification does, giving a kind of &quot;gender or age modification &quot; effect.&#x0A;&#x0A;To better tune the effect, one should compensate the speed modification due to the value parameter. For exemple to keep an average constant speed, one should add 20% to speed parameter when decreasing 20% to the Voice Shaping (VCT) parameter :&#x0A;&#x0A;A quite good male derivation of female voice for example could be obtained using the following parameters: VCT=78.' id="5" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="1" value="85" default_value="100" min="50" max="200" tooltip="change the speed of the voice" id="6" />
                                                                </Box>
                                                                <Box name="LocalizedText" robot="" id="3" tooltip="Enter tooltip here" bitmap_expanded="1" plugin="localizationbox_plugin" x="70" y="68">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)
		self.tts = ALProxy("ALTextToSpeech")

	def onInput_onStart(self):
		sChinese = ""
		sEnglish = "Wow, theyr's also \RSPD=105\ a \RSPD=80\ lot \RSPD=90\ to be done \RSPD=105\ in \RSPD=90\ that \RSPD=85\ field and \RSPD=105\ quite a few \RSPD=80\ interesting \RSPD=90\ projects \RSPD=110\ going on. \Pau=200\ \RSPD=95\ I can be your children's best friend and tell them stories? \RSPD=90\ I \RSPD=70\ can \RSPD=85\ check \RSPD=90\ on \RSPD=75\ them \RSPD=80\ when \RSPD=75\ you \RSPD=100\ coal \RSPD=85\ me \Pau=10\ \RSPD=75\ by sending you \RSPD=80\ a live \RSPD=85\ video \RSPD=80\ feed \Pau=10\ of \RSPD=75\ what \RSPD=70\ they'are \RSPD=80\ up to. \RSPD=60\ I can even \RSPD=90\ let'them \RSPD=75\ hear you \RSPD=95\ say: Hi \RSPD=80\ to them. \RSPD=70\ \Pau=100\ I \RSPD=85\ also \RSPD=70\ have \RSPD=85\ a number \RSPD=75\ of games \RSPD=85\ we can \RSPD=80\ play \RSPD=90\ with \RSPD=80\ together, \RSPD=90\ for instance: \RSPD=85\ Memory \Pau=2\ \RSPD=80\ queez \Pau=1\ \RSPD=85\ or Classmate."
		sFrench = "Wahou! Il y a aussi tellement de choses à faire dans ce domaine, et de beaux projets sont en cours! \Pau=400\ Je pourrais être le meilleur ami de vos enfants, et leur lire des histoires. \Pau=200\ Je pourrais même garder un oeil sur eux, et vous montrer la situation grâce à un appel vidéo. \Pau=400\ Vous pourrez même leur dire bonjour! \Pau=600\ Et puis je connais des jeux pour jouer avec eux! \Pau=500\ Il y a par exemple le mémory, ou encore, des quouise."
		sGerman = ""
		sItalian = ""
		sJapanese = ""
		sKorean = ""
		sPortuguese = ""
		sSpanish = ""
		sDefaultLang = self.tts.getLanguage()
		self.onStopped(eval("s"+sDefaultLang))]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <chinese></chinese>
                                                                        <english>Wow, theyr&apos;s also \RSPD=105\ a \RSPD=80\ lot \RSPD=90\ to be done \RSPD=105\ in \RSPD=90\ that \RSPD=85\ field and \RSPD=105\ quite a few \RSPD=80\ interesting \RSPD=90\ projects \RSPD=110\ going on. \Pau=200\ \RSPD=95\ I can be your children&apos;s best friend and tell them stories? \RSPD=90\ I \RSPD=70\ can \RSPD=85\ check \RSPD=90\ on \RSPD=75\ them \RSPD=80\ when \RSPD=75\ you \RSPD=100\ coal \RSPD=85\ me \Pau=10\ \RSPD=75\ by sending you \RSPD=80\ a live \RSPD=85\ video \RSPD=80\ feed \Pau=10\ of \RSPD=75\ what \RSPD=70\ they&apos;are \RSPD=80\ up to. \RSPD=60\ I can even \RSPD=90\ let&apos;them \RSPD=75\ hear you \RSPD=95\ say: Hi \RSPD=80\ to them. \RSPD=70\ \Pau=100\ I \RSPD=85\ also \RSPD=70\ have \RSPD=85\ a number \RSPD=75\ of games \RSPD=85\ we can \RSPD=80\ play \RSPD=90\ with \RSPD=80\ together, \RSPD=90\ for instance: \RSPD=85\ Memory \Pau=2\ \RSPD=80\ queez \Pau=1\ \RSPD=85\ or Classmate.</english>
                                                                        <french>Wahou! Il y a aussi tellement de choses à faire dans ce domaine, et de beaux projets sont en cours! \Pau=400\ Je pourrais être le meilleur ami de vos enfants, et leur lire des histoires. \Pau=200\ Je pourrais même garder un oeil sur eux, et vous montrer la situation grâce à un appel vidéo. \Pau=400\ Vous pourrez même leur dire bonjour! \Pau=600\ Et puis je connais des jeux pour jouer avec eux! \Pau=500\ Il y a par exemple le mémory, ou encore, des quouise.</french>
                                                                        <german></german>
                                                                        <italian></italian>
                                                                        <japanese></japanese>
                                                                        <korean></korean>
                                                                        <portuguese></portuguese>
                                                                        <spanish></spanish>
                                                                        <language>1</language>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="3" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="3" indexofoutput="4" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <BehaviorLayer name="LED" mute="0">
                                                        <BehaviorKeyframe name="blink" index="1" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="BlinkWink" robot="" id="6" tooltip="Eyes keep blinking until box is stopped." bitmap_expanded="1" plugin="" x="146" y="76">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[import random

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        self.bMustStop = False

    def onLoad(self):
        pass

    def onUnload(self):
        self.onInput_onStop()

    def blink(self):
        on = 0xffffff    
        off = 0x222222
        rDuration = self.getParameter("speed")
        ALLeds.post.fadeRGB( "FaceLed0", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed1", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed2", on, rDuration )
        ALLeds.post.fadeRGB( "FaceLed3", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed4", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed5", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed6", on, rDuration )
        ALLeds.fadeRGB( "FaceLed7", off, rDuration )
        time.sleep( 0.1 )
        ALLeds.fadeRGB( "FaceLeds", on, rDuration )

    def onInput_onStart(self):
        if self.bIsRunning:
            return

        self.bIsRunning = True
        self.bMustStop = False
        
        threshold = self.getParameter("threshold")
        
        while not self.bMustStop:
            n = random.uniform(0.0, 100.0)
            if n>threshold:
                self.blink()
            time.sleep(0.1)
    
        self.bIsRunning = False
        self.bMustStop = False
        self.onStopped()

    def onInput_onStop(self):
        self.bMustStop = True]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="speed" inherits_from_parent="0" content_type="2" value="0.1" default_value="0.1" min="0" max="1" tooltip="" id="5" />
                                                                    <Parameter name="threshold" inherits_from_parent="0" content_type="2" value="90" default_value="70" min="0" max="100" tooltip="" id="6" />
                                                                </Box>
                                                                <Link inputowner="6" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList>
                                                        <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="-10.1978" />
                                                            <Key frame="36" value="-2.63916" />
                                                            <Key frame="56" value="-2.11181" />
                                                            <Key frame="73" value="11.3356" />
                                                            <Key frame="94" value="8.87466" />
                                                            <Key frame="112" value="-13.3619" />
                                                            <Key frame="129" value="-13.1862" />
                                                            <Key frame="142" value="-9.31893" />
                                                            <Key frame="156" value="-10.5494" />
                                                            <Key frame="175" value="2.37067" />
                                                            <Key frame="188" value="3.51326" />
                                                            <Key frame="207" value="-1.49656" />
                                                            <Key frame="224" value="-0.266079" />
                                                            <Key frame="241" value="-16.6139" />
                                                            <Key frame="267" value="-17.1413" />
                                                            <Key frame="283" value="-16.8776" />
                                                            <Key frame="300" value="7.99574" />
                                                            <Key frame="322" value="9.13834" />
                                                            <Key frame="338" value="9.92936" />
                                                            <Key frame="354" value="-0.441863" />
                                                            <Key frame="375" value="-15.9987" />
                                                            <Key frame="391" value="-18.3718" />
                                                            <Key frame="404" value="-18.6355" />
                                                            <Key frame="427" value="-0.353971" />
                                                            <Key frame="442" value="1.49176" />
                                                            <Key frame="461" value="-13.9772" />
                                                            <Key frame="476" value="-12.3951" />
                                                            <Key frame="494" value="-18.5476" />
                                                            <Key frame="518" value="-17.0534" />
                                                            <Key frame="538" value="-12.5709" />
                                                            <Key frame="559" value="0.173379" />
                                                            <Key frame="580" value="6.50158" />
                                                            <Key frame="593" value="7.02893" />
                                                            <Key frame="605" value="9.66569" />
                                                            <Key frame="625" value="4.91953" />
                                                            <Key frame="640" value="-8.17633" />
                                                            <Key frame="654" value="-9.93417" />
                                                            <Key frame="666" value="-17.4929" />
                                                            <Key frame="684" value="-11.9557" />
                                                            <Key frame="702" value="-11.7799" />
                                                            <Key frame="734" value="2.98591" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="20" value="16.6091" />
                                                            <Key frame="36" value="-23.5574" />
                                                            <Key frame="56" value="-0.529755" />
                                                            <Key frame="73" value="-18.987" />
                                                            <Key frame="94" value="-20.0417" />
                                                            <Key frame="112" value="-19.2507" />
                                                            <Key frame="129" value="4.74375" />
                                                            <Key frame="142" value="-15.9987" />
                                                            <Key frame="156" value="-18.0202" />
                                                            <Key frame="175" value="-18.3718" />
                                                            <Key frame="188" value="-19.9538" />
                                                            <Key frame="207" value="8.96255" />
                                                            <Key frame="224" value="-14.4166" />
                                                            <Key frame="241" value="-18.0202" />
                                                            <Key frame="267" value="-18.196" />
                                                            <Key frame="283" value="-19.2507" />
                                                            <Key frame="300" value="-17.405" />
                                                            <Key frame="322" value="-18.7233" />
                                                            <Key frame="338" value="-22.3269" />
                                                            <Key frame="354" value="3.60116" />
                                                            <Key frame="375" value="-14.8561" />
                                                            <Key frame="391" value="-18.6355" />
                                                            <Key frame="404" value="-17.2292" />
                                                            <Key frame="427" value="-18.196" />
                                                            <Key frame="442" value="-18.7233" />
                                                            <Key frame="461" value="-17.5807" />
                                                            <Key frame="476" value="-20.1296" />
                                                            <Key frame="494" value="-20.1296" />
                                                            <Key frame="518" value="-20.7449" />
                                                            <Key frame="538" value="4.2164" />
                                                            <Key frame="559" value="-15.5592" />
                                                            <Key frame="580" value="-18.8112" />
                                                            <Key frame="593" value="-18.987" />
                                                            <Key frame="605" value="-18.1081" />
                                                            <Key frame="625" value="-19.1628" />
                                                            <Key frame="640" value="-21.1843" />
                                                            <Key frame="654" value="-20.8327" />
                                                            <Key frame="666" value="-23.1179" />
                                                            <Key frame="684" value="-23.1179" />
                                                            <Key frame="702" value="-23.2058" />
                                                            <Key frame="734" value="-19.2507" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="33.2207" />
                                                            <Key frame="34" value="56.1604" />
                                                            <Key frame="54" value="74.4419" />
                                                            <Key frame="71" value="72.1567" />
                                                            <Key frame="92" value="61.6976" />
                                                            <Key frame="110" value="61.0823" />
                                                            <Key frame="127" value="44.1192" />
                                                            <Key frame="140" value="63.3675" />
                                                            <Key frame="154" value="81.649" />
                                                            <Key frame="173" value="90.614" />
                                                            <Key frame="186" value="92.3718" />
                                                            <Key frame="205" value="67.85" />
                                                            <Key frame="222" value="66.6195" />
                                                            <Key frame="239" value="52.1174" />
                                                            <Key frame="265" value="74.354" />
                                                            <Key frame="281" value="80.1548" />
                                                            <Key frame="298" value="47.1954" />
                                                            <Key frame="320" value="68.2016" />
                                                            <Key frame="336" value="77.5181" />
                                                            <Key frame="352" value="71.0141" />
                                                            <Key frame="373" value="50.7111" />
                                                            <Key frame="389" value="59.8519" />
                                                            <Key frame="402" value="85.6041" />
                                                            <Key frame="425" value="95.7117" />
                                                            <Key frame="440" value="87.8893" />
                                                            <Key frame="459" value="76.3755" />
                                                            <Key frame="474" value="59.5003" />
                                                            <Key frame="492" value="70.5746" />
                                                            <Key frame="516" value="76.6392" />
                                                            <Key frame="536" value="52.2053" />
                                                            <Key frame="557" value="35.418" />
                                                            <Key frame="578" value="46.0529" />
                                                            <Key frame="591" value="63.1917" />
                                                            <Key frame="603" value="48.8654" />
                                                            <Key frame="623" value="57.3909" />
                                                            <Key frame="638" value="39.8125" />
                                                            <Key frame="652" value="51.3264" />
                                                            <Key frame="664" value="54.4026" />
                                                            <Key frame="682" value="62.4007" />
                                                            <Key frame="700" value="73.563" />
                                                            <Key frame="732" value="82.8795" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="5.18321" />
                                                            <Key frame="34" value="8.4352" />
                                                            <Key frame="54" value="13.7966" />
                                                            <Key frame="71" value="2.81013" />
                                                            <Key frame="92" value="2.72224" />
                                                            <Key frame="110" value="1.57965" />
                                                            <Key frame="127" value="2.98591" />
                                                            <Key frame="140" value="8.08363" />
                                                            <Key frame="154" value="8.25942" />
                                                            <Key frame="173" value="14.6755" />
                                                            <Key frame="186" value="14.9392" />
                                                            <Key frame="205" value="7.90785" />
                                                            <Key frame="222" value="6.06212" />
                                                            <Key frame="239" value="0.5" />
                                                            <Key frame="265" value="4.30429" />
                                                            <Key frame="281" value="7.11683" />
                                                            <Key frame="298" value="9.31412" />
                                                            <Key frame="320" value="26.1014" />
                                                            <Key frame="336" value="15.5544" />
                                                            <Key frame="352" value="16.1697" />
                                                            <Key frame="373" value="5.2711" />
                                                            <Key frame="389" value="6.3258" />
                                                            <Key frame="402" value="5.53477" />
                                                            <Key frame="425" value="9.57779" />
                                                            <Key frame="440" value="6.58948" />
                                                            <Key frame="459" value="2.28278" />
                                                            <Key frame="474" value="0.5" />
                                                            <Key frame="492" value="0.876513" />
                                                            <Key frame="516" value="5.18321" />
                                                            <Key frame="536" value="0.788621" />
                                                            <Key frame="557" value="6.85315" />
                                                            <Key frame="578" value="14.5876" />
                                                            <Key frame="591" value="14.4118" />
                                                            <Key frame="603" value="16.8728" />
                                                            <Key frame="623" value="16.5212" />
                                                            <Key frame="638" value="8.61098" />
                                                            <Key frame="652" value="8.08363" />
                                                            <Key frame="664" value="7.73207" />
                                                            <Key frame="682" value="9.4899" />
                                                            <Key frame="700" value="10.4567" />
                                                            <Key frame="732" value="7.55628" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="-50.1886" />
                                                            <Key frame="34" value="-71.0189" />
                                                            <Key frame="54" value="-75.7651" />
                                                            <Key frame="71" value="-45.4424" />
                                                            <Key frame="92" value="-45.6182" />
                                                            <Key frame="110" value="-73.1283" />
                                                            <Key frame="127" value="-58.1867" />
                                                            <Key frame="140" value="-72.5131" />
                                                            <Key frame="154" value="-43.9483" />
                                                            <Key frame="173" value="-56.0773" />
                                                            <Key frame="186" value="-58.9778" />
                                                            <Key frame="205" value="-52.1222" />
                                                            <Key frame="222" value="-49.837" />
                                                            <Key frame="239" value="-60.384" />
                                                            <Key frame="265" value="-79.8081" />
                                                            <Key frame="281" value="-83.6753" />
                                                            <Key frame="298" value="-49.6612" />
                                                            <Key frame="320" value="-64.3391" />
                                                            <Key frame="336" value="-65.306" />
                                                            <Key frame="352" value="-44.7393" />
                                                            <Key frame="373" value="-57.4836" />
                                                            <Key frame="389" value="-59.5051" />
                                                            <Key frame="402" value="-59.1535" />
                                                            <Key frame="425" value="-71.1068" />
                                                            <Key frame="440" value="-51.6827" />
                                                            <Key frame="459" value="-47.6397" />
                                                            <Key frame="474" value="-56.2531" />
                                                            <Key frame="492" value="-51.7706" />
                                                            <Key frame="516" value="-52.1222" />
                                                            <Key frame="536" value="-37.9716" />
                                                            <Key frame="557" value="-45.0909" />
                                                            <Key frame="578" value="-86.2242" />
                                                            <Key frame="591" value="-79.896" />
                                                            <Key frame="603" value="-88.9488" />
                                                            <Key frame="623" value="-92.025" />
                                                            <Key frame="638" value="-67.2396" />
                                                            <Key frame="652" value="-41.1357" />
                                                            <Key frame="664" value="-31.5555" />
                                                            <Key frame="682" value="-62.2297" />
                                                            <Key frame="700" value="-70.2279" />
                                                            <Key frame="732" value="-46.585" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="18" value="-88.3288" />
                                                            <Key frame="34" value="-53.3479" />
                                                            <Key frame="54" value="-43.8556" />
                                                            <Key frame="71" value="-66.9711" />
                                                            <Key frame="92" value="-72.4204" />
                                                            <Key frame="110" value="-86.5709" />
                                                            <Key frame="127" value="-88.5046" />
                                                            <Key frame="140" value="-66.8832" />
                                                            <Key frame="154" value="-58.094" />
                                                            <Key frame="173" value="-39.7247" />
                                                            <Key frame="186" value="-32.5175" />
                                                            <Key frame="205" value="-89.2956" />
                                                            <Key frame="222" value="-87.9772" />
                                                            <Key frame="239" value="-88.6803" />
                                                            <Key frame="265" value="-73.9145" />
                                                            <Key frame="281" value="-67.3227" />
                                                            <Key frame="298" value="-77.2544" />
                                                            <Key frame="320" value="-63.1917" />
                                                            <Key frame="336" value="-65.8285" />
                                                            <Key frame="352" value="-87.7135" />
                                                            <Key frame="373" value="-85.5163" />
                                                            <Key frame="389" value="-75.9361" />
                                                            <Key frame="402" value="-60.8187" />
                                                            <Key frame="425" value="-51.0627" />
                                                            <Key frame="440" value="-51.5021" />
                                                            <Key frame="459" value="-74.354" />
                                                            <Key frame="474" value="-56.7757" />
                                                            <Key frame="492" value="-61.6976" />
                                                            <Key frame="516" value="-56.0725" />
                                                            <Key frame="536" value="-82.5279" />
                                                            <Key frame="557" value="-80.3306" />
                                                            <Key frame="578" value="-62.0492" />
                                                            <Key frame="591" value="-86.0436" />
                                                            <Key frame="603" value="-61.1702" />
                                                            <Key frame="623" value="-52.7326" />
                                                            <Key frame="638" value="-82.7916" />
                                                            <Key frame="652" value="-82.2643" />
                                                            <Key frame="664" value="-74.4419" />
                                                            <Key frame="682" value="-78.6607" />
                                                            <Key frame="700" value="-66.1801" />
                                                            <Key frame="732" value="-36.7363" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="-64" />
                                                            <Key frame="71" value="-18" />
                                                            <Key frame="92" value="-10" />
                                                            <Key frame="110" value="-58" />
                                                            <Key frame="140" value="-70" />
                                                            <Key frame="173" value="-35.6" />
                                                            <Key frame="186" value="-36.3017" />
                                                            <Key frame="222" value="-36.4775" />
                                                            <Key frame="265" value="-61" />
                                                            <Key frame="298" value="-54.4953" />
                                                            <Key frame="336" value="36.6" />
                                                            <Key frame="373" value="-49.6" />
                                                            <Key frame="389" value="-50.8038" />
                                                            <Key frame="425" value="2.2" />
                                                            <Key frame="459" value="-52" />
                                                            <Key frame="492" value="-70" />
                                                            <Key frame="516" value="-69.5248" />
                                                            <Key frame="557" value="9.7" />
                                                            <Key frame="591" value="-52.8" />
                                                            <Key frame="623" value="-46" />
                                                            <Key frame="652" value="10.8" />
                                                            <Key frame="700" value="10.193" />
                                                            <Key frame="732" value="17.5759" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="34" value="0.6" />
                                                            <Key frame="71" value="0.672727" />
                                                            <Key frame="92" value="0.643636" />
                                                            <Key frame="110" value="0.581818" />
                                                            <Key frame="140" value="0.583298" />
                                                            <Key frame="173" value="0.256364" />
                                                            <Key frame="186" value="0.258207" />
                                                            <Key frame="222" value="0.258207" />
                                                            <Key frame="265" value="0.650909" />
                                                            <Key frame="298" value="0.649842" />
                                                            <Key frame="336" value="0.738182" />
                                                            <Key frame="373" value="0.787273" />
                                                            <Key frame="389" value="0.785842" />
                                                            <Key frame="425" value="0.4" />
                                                            <Key frame="459" value="0.636364" />
                                                            <Key frame="492" value="0.694545" />
                                                            <Key frame="516" value="0.664751" />
                                                            <Key frame="557" value="0.394545" />
                                                            <Key frame="591" value="0.656364" />
                                                            <Key frame="623" value="0.638182" />
                                                            <Key frame="652" value="0.763636" />
                                                            <Key frame="700" value="0.762569" />
                                                            <Key frame="732" value="0.538182" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="36.038" />
                                                            <Key frame="32" value="67.4154" />
                                                            <Key frame="52" value="79.1928" />
                                                            <Key frame="69" value="63.4602" />
                                                            <Key frame="90" value="53.1769" />
                                                            <Key frame="108" value="64.2513" />
                                                            <Key frame="125" value="47.5518" />
                                                            <Key frame="138" value="62.5813" />
                                                            <Key frame="152" value="53.1769" />
                                                            <Key frame="171" value="73.392" />
                                                            <Key frame="184" value="83.8511" />
                                                            <Key frame="203" value="61.5266" />
                                                            <Key frame="220" value="61.7024" />
                                                            <Key frame="237" value="56.6926" />
                                                            <Key frame="263" value="72.6889" />
                                                            <Key frame="279" value="76.1166" />
                                                            <Key frame="296" value="68.9095" />
                                                            <Key frame="318" value="47.7276" />
                                                            <Key frame="334" value="68.6458" />
                                                            <Key frame="350" value="57.2199" />
                                                            <Key frame="371" value="48.5186" />
                                                            <Key frame="387" value="55.0226" />
                                                            <Key frame="400" value="53.4406" />
                                                            <Key frame="423" value="67.4154" />
                                                            <Key frame="438" value="76.644" />
                                                            <Key frame="457" value="39.9931" />
                                                            <Key frame="472" value="31.1161" />
                                                            <Key frame="490" value="47.5518" />
                                                            <Key frame="514" value="56.5168" />
                                                            <Key frame="534" value="80.1597" />
                                                            <Key frame="555" value="98.0017" />
                                                            <Key frame="576" value="80.687" />
                                                            <Key frame="589" value="78.4018" />
                                                            <Key frame="601" value="79.4565" />
                                                            <Key frame="621" value="74.9741" />
                                                            <Key frame="636" value="64.2513" />
                                                            <Key frame="650" value="75.7651" />
                                                            <Key frame="662" value="80.3354" />
                                                            <Key frame="680" value="72.2494" />
                                                            <Key frame="698" value="73.392" />
                                                            <Key frame="730" value="92.3766" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="-9.93417" />
                                                            <Key frame="32" value="-8.5279" />
                                                            <Key frame="52" value="-9.31893" />
                                                            <Key frame="69" value="-9.14314" />
                                                            <Key frame="90" value="-7.38531" />
                                                            <Key frame="108" value="-2.63916" />
                                                            <Key frame="125" value="-5.01223" />
                                                            <Key frame="138" value="-9.75839" />
                                                            <Key frame="152" value="-1.23289" />
                                                            <Key frame="171" value="-4.57277" />
                                                            <Key frame="184" value="-4.22121" />
                                                            <Key frame="203" value="-10.2857" />
                                                            <Key frame="220" value="-6.24272" />
                                                            <Key frame="237" value="-1.145" />
                                                            <Key frame="263" value="-3.78175" />
                                                            <Key frame="279" value="-4.57277" />
                                                            <Key frame="296" value="-0.79343" />
                                                            <Key frame="318" value="-0.969213" />
                                                            <Key frame="334" value="-0.881321" />
                                                            <Key frame="350" value="-1.32078" />
                                                            <Key frame="371" value="-0.969213" />
                                                            <Key frame="387" value="-0.969213" />
                                                            <Key frame="400" value="-11.4283" />
                                                            <Key frame="423" value="-14.3288" />
                                                            <Key frame="438" value="-13.8893" />
                                                            <Key frame="457" value="-0.969213" />
                                                            <Key frame="472" value="-3.95753" />
                                                            <Key frame="490" value="-2.28759" />
                                                            <Key frame="514" value="-9.49471" />
                                                            <Key frame="534" value="-10.5494" />
                                                            <Key frame="555" value="-6.4185" />
                                                            <Key frame="576" value="-1.0571" />
                                                            <Key frame="589" value="-0.881321" />
                                                            <Key frame="601" value="-0.705538" />
                                                            <Key frame="621" value="-0.79343" />
                                                            <Key frame="636" value="-1.49656" />
                                                            <Key frame="650" value="-7.82477" />
                                                            <Key frame="662" value="-8.00055" />
                                                            <Key frame="680" value="-5.97904" />
                                                            <Key frame="698" value="-5.89115" />
                                                            <Key frame="730" value="-5.18802" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="80.858" />
                                                            <Key frame="32" value="91.8445" />
                                                            <Key frame="52" value="94.2175" />
                                                            <Key frame="69" value="36.0332" />
                                                            <Key frame="90" value="36.2969" />
                                                            <Key frame="108" value="85.6041" />
                                                            <Key frame="125" value="77.4302" />
                                                            <Key frame="138" value="93.5144" />
                                                            <Key frame="152" value="44.2071" />
                                                            <Key frame="171" value="81.3853" />
                                                            <Key frame="184" value="85.3405" />
                                                            <Key frame="203" value="47.4591" />
                                                            <Key frame="220" value="46.9318" />
                                                            <Key frame="237" value="57.7425" />
                                                            <Key frame="263" value="84.2858" />
                                                            <Key frame="279" value="90.3503" />
                                                            <Key frame="296" value="59.3245" />
                                                            <Key frame="318" value="18.1912" />
                                                            <Key frame="334" value="39.8125" />
                                                            <Key frame="350" value="42.6251" />
                                                            <Key frame="371" value="92.196" />
                                                            <Key frame="387" value="103.446" />
                                                            <Key frame="400" value="53.9631" />
                                                            <Key frame="423" value="68.9926" />
                                                            <Key frame="438" value="69.0805" />
                                                            <Key frame="457" value="52.8205" />
                                                            <Key frame="472" value="83.2311" />
                                                            <Key frame="490" value="101.688" />
                                                            <Key frame="514" value="105.731" />
                                                            <Key frame="534" value="102.479" />
                                                            <Key frame="555" value="103.27" />
                                                            <Key frame="576" value="71.3657" />
                                                            <Key frame="589" value="105.907" />
                                                            <Key frame="601" value="69.8715" />
                                                            <Key frame="621" value="53.6994" />
                                                            <Key frame="636" value="64.1586" />
                                                            <Key frame="650" value="99.4031" />
                                                            <Key frame="662" value="103.71" />
                                                            <Key frame="680" value="83.7584" />
                                                            <Key frame="698" value="62.3128" />
                                                            <Key frame="730" value="90.7019" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="16" value="89.0367" />
                                                            <Key frame="32" value="62.1419" />
                                                            <Key frame="52" value="50.1007" />
                                                            <Key frame="69" value="62.9329" />
                                                            <Key frame="90" value="65.8333" />
                                                            <Key frame="108" value="82.1812" />
                                                            <Key frame="125" value="88.1578" />
                                                            <Key frame="138" value="71.9857" />
                                                            <Key frame="152" value="81.7417" />
                                                            <Key frame="171" value="55.3742" />
                                                            <Key frame="184" value="47.6397" />
                                                            <Key frame="203" value="88.773" />
                                                            <Key frame="220" value="87.6305" />
                                                            <Key frame="237" value="88.773" />
                                                            <Key frame="263" value="75.6772" />
                                                            <Key frame="279" value="67.5033" />
                                                            <Key frame="296" value="81.9175" />
                                                            <Key frame="318" value="61.4387" />
                                                            <Key frame="334" value="61.0872" />
                                                            <Key frame="350" value="88.6852" />
                                                            <Key frame="371" value="88.5094" />
                                                            <Key frame="387" value="80.9507" />
                                                            <Key frame="400" value="88.5973" />
                                                            <Key frame="423" value="53.089" />
                                                            <Key frame="438" value="48.4307" />
                                                            <Key frame="457" value="88.773" />
                                                            <Key frame="472" value="78.1381" />
                                                            <Key frame="490" value="88.5094" />
                                                            <Key frame="514" value="84.9937" />
                                                            <Key frame="534" value="74.8862" />
                                                            <Key frame="555" value="52.4738" />
                                                            <Key frame="576" value="60.2961" />
                                                            <Key frame="589" value="68.1185" />
                                                            <Key frame="601" value="73.3041" />
                                                            <Key frame="621" value="64.0755" />
                                                            <Key frame="636" value="84.73" />
                                                            <Key frame="650" value="73.3041" />
                                                            <Key frame="662" value="68.6458" />
                                                            <Key frame="680" value="82.6206" />
                                                            <Key frame="698" value="70.4916" />
                                                            <Key frame="730" value="35.8622" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="32" value="68" />
                                                            <Key frame="69" value="34" />
                                                            <Key frame="90" value="43" />
                                                            <Key frame="108" value="48" />
                                                            <Key frame="138" value="56" />
                                                            <Key frame="171" value="62" />
                                                            <Key frame="184" value="61.2581" />
                                                            <Key frame="220" value="42.713" />
                                                            <Key frame="263" value="53.9" />
                                                            <Key frame="296" value="55.1057" />
                                                            <Key frame="334" value="-2.2" />
                                                            <Key frame="371" value="42" />
                                                            <Key frame="387" value="43.5919" />
                                                            <Key frame="423" value="-33" />
                                                            <Key frame="457" value="24.8" />
                                                            <Key frame="490" value="45.2" />
                                                            <Key frame="514" value="45.6134" />
                                                            <Key frame="555" value="-18.3" />
                                                            <Key frame="589" value="42" />
                                                            <Key frame="621" value="56" />
                                                            <Key frame="650" value="-29" />
                                                            <Key frame="698" value="-29.0067" />
                                                            <Key frame="730" value="-26" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="32" value="0.812727" />
                                                            <Key frame="69" value="0.725455" />
                                                            <Key frame="90" value="0.709091" />
                                                            <Key frame="108" value="0.730909" />
                                                            <Key frame="138" value="0.669091" />
                                                            <Key frame="171" value="0.694545" />
                                                            <Key frame="184" value="0.690909" />
                                                            <Key frame="203" value="0.581818" />
                                                            <Key frame="220" value="0.509091" />
                                                            <Key frame="263" value="0.712727" />
                                                            <Key frame="296" value="0.514873" />
                                                            <Key frame="334" value="0.843636" />
                                                            <Key frame="371" value="0.843636" />
                                                            <Key frame="387" value="0.514873" />
                                                            <Key frame="423" value="0.738182" />
                                                            <Key frame="457" value="0.274545" />
                                                            <Key frame="490" value="0.656364" />
                                                            <Key frame="514" value="0.514873" />
                                                            <Key frame="555" value="0.327273" />
                                                            <Key frame="589" value="0.661818" />
                                                            <Key frame="621" value="0.750909" />
                                                            <Key frame="650" value="0.781818" />
                                                            <Key frame="698" value="0.514873" />
                                                            <Key frame="730" value="0.5" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-19.5975" />
                                                            <Key frame="70" value="-18.7185" />
                                                            <Key frame="109" value="-19.949" />
                                                            <Key frame="139" value="-18.5428" />
                                                            <Key frame="172" value="-18.5428" />
                                                            <Key frame="185" value="-18.5428" />
                                                            <Key frame="221" value="-18.6306" />
                                                            <Key frame="264" value="-20.74" />
                                                            <Key frame="297" value="-16.9607" />
                                                            <Key frame="335" value="-17.8396" />
                                                            <Key frame="372" value="-17.2244" />
                                                            <Key frame="388" value="-16.9607" />
                                                            <Key frame="424" value="-16.8728" />
                                                            <Key frame="458" value="-16.4333" />
                                                            <Key frame="491" value="-16.6091" />
                                                            <Key frame="515" value="-16.6091" />
                                                            <Key frame="556" value="-16.2576" />
                                                            <Key frame="590" value="-16.1697" />
                                                            <Key frame="622" value="-18.7185" />
                                                            <Key frame="651" value="-20.3006" />
                                                            <Key frame="699" value="-20.4764" />
                                                            <Key frame="731" value="-18.7185" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="9.93417" />
                                                            <Key frame="70" value="7.38531" />
                                                            <Key frame="109" value="13.0104" />
                                                            <Key frame="139" value="9.23104" />
                                                            <Key frame="172" value="12.8346" />
                                                            <Key frame="185" value="12.8346" />
                                                            <Key frame="221" value="5.01223" />
                                                            <Key frame="264" value="3.60596" />
                                                            <Key frame="297" value="4.22121" />
                                                            <Key frame="335" value="8.08844" />
                                                            <Key frame="372" value="7.03374" />
                                                            <Key frame="388" value="6.77007" />
                                                            <Key frame="424" value="4.04542" />
                                                            <Key frame="458" value="0.266079" />
                                                            <Key frame="491" value="-0.70073" />
                                                            <Key frame="515" value="-0.612838" />
                                                            <Key frame="556" value="5.53958" />
                                                            <Key frame="590" value="5.53958" />
                                                            <Key frame="622" value="0.090296" />
                                                            <Key frame="651" value="-0.70073" />
                                                            <Key frame="699" value="4.39699" />
                                                            <Key frame="731" value="5.18802" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="12.483" />
                                                            <Key frame="70" value="19.5144" />
                                                            <Key frame="109" value="16.2624" />
                                                            <Key frame="139" value="16.6139" />
                                                            <Key frame="172" value="16.526" />
                                                            <Key frame="185" value="16.6139" />
                                                            <Key frame="221" value="18.7233" />
                                                            <Key frame="264" value="8.35212" />
                                                            <Key frame="297" value="17.3171" />
                                                            <Key frame="335" value="11.2525" />
                                                            <Key frame="372" value="17.4929" />
                                                            <Key frame="388" value="18.0202" />
                                                            <Key frame="424" value="18.4597" />
                                                            <Key frame="458" value="22.5906" />
                                                            <Key frame="491" value="21.9753" />
                                                            <Key frame="515" value="21.9753" />
                                                            <Key frame="556" value="21.7996" />
                                                            <Key frame="590" value="21.7996" />
                                                            <Key frame="622" value="17.3171" />
                                                            <Key frame="651" value="13.0104" />
                                                            <Key frame="699" value="10.9889" />
                                                            <Key frame="731" value="18.8112" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-5.18802" />
                                                            <Key frame="70" value="-5.29" />
                                                            <Key frame="109" value="-5.29" />
                                                            <Key frame="139" value="-5.10012" />
                                                            <Key frame="172" value="-5.18802" />
                                                            <Key frame="185" value="-5.10012" />
                                                            <Key frame="221" value="-5.29" />
                                                            <Key frame="264" value="-5.29" />
                                                            <Key frame="297" value="-5.18802" />
                                                            <Key frame="335" value="-5.29" />
                                                            <Key frame="372" value="-5.29" />
                                                            <Key frame="388" value="-5.27591" />
                                                            <Key frame="424" value="-5.10012" />
                                                            <Key frame="458" value="-5.18802" />
                                                            <Key frame="491" value="-5.29" />
                                                            <Key frame="515" value="-5.27591" />
                                                            <Key frame="556" value="-5.29" />
                                                            <Key frame="590" value="-5.27591" />
                                                            <Key frame="622" value="-5.29" />
                                                            <Key frame="651" value="-5.27591" />
                                                            <Key frame="699" value="-5.01223" />
                                                            <Key frame="731" value="-5.10012" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="7.02893" />
                                                            <Key frame="70" value="2.28278" />
                                                            <Key frame="109" value="4.39218" />
                                                            <Key frame="139" value="4.48007" />
                                                            <Key frame="172" value="4.39218" />
                                                            <Key frame="185" value="4.39218" />
                                                            <Key frame="221" value="2.19489" />
                                                            <Key frame="264" value="6.85315" />
                                                            <Key frame="297" value="4.65586" />
                                                            <Key frame="335" value="6.58948" />
                                                            <Key frame="372" value="3.86483" />
                                                            <Key frame="388" value="4.04062" />
                                                            <Key frame="424" value="2.89802" />
                                                            <Key frame="458" value="0.0854875" />
                                                            <Key frame="491" value="0.173379" />
                                                            <Key frame="515" value="0.349163" />
                                                            <Key frame="556" value="-0.266079" />
                                                            <Key frame="590" value="-0.353971" />
                                                            <Key frame="622" value="3.51326" />
                                                            <Key frame="651" value="6.3258" />
                                                            <Key frame="699" value="7.64418" />
                                                            <Key frame="731" value="1.57965" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-8.52309" />
                                                            <Key frame="70" value="-6.15002" />
                                                            <Key frame="109" value="-10.5446" />
                                                            <Key frame="139" value="-7.73207" />
                                                            <Key frame="172" value="-10.1051" />
                                                            <Key frame="185" value="-10.1051" />
                                                            <Key frame="221" value="-4.91953" />
                                                            <Key frame="264" value="-4.65586" />
                                                            <Key frame="297" value="-3.33748" />
                                                            <Key frame="335" value="-7.3805" />
                                                            <Key frame="372" value="-5.71056" />
                                                            <Key frame="388" value="-5.62267" />
                                                            <Key frame="424" value="-3.33748" />
                                                            <Key frame="458" value="-0.173379" />
                                                            <Key frame="491" value="0.266079" />
                                                            <Key frame="515" value="0.266079" />
                                                            <Key frame="556" value="-4.48007" />
                                                            <Key frame="590" value="-4.39218" />
                                                            <Key frame="622" value="-0.261271" />
                                                            <Key frame="651" value="-0.437054" />
                                                            <Key frame="699" value="-4.48007" />
                                                            <Key frame="731" value="-4.2164" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-0.437054" />
                                                            <Key frame="70" value="-6.67737" />
                                                            <Key frame="109" value="0.353971" />
                                                            <Key frame="139" value="-4.48007" />
                                                            <Key frame="172" value="-1.0523" />
                                                            <Key frame="185" value="-1.0523" />
                                                            <Key frame="221" value="-9.05044" />
                                                            <Key frame="264" value="-4.91953" />
                                                            <Key frame="297" value="-4.56797" />
                                                            <Key frame="335" value="2.28759" />
                                                            <Key frame="372" value="-1.49176" />
                                                            <Key frame="388" value="-1.49176" />
                                                            <Key frame="424" value="-4.74375" />
                                                            <Key frame="458" value="-10.1051" />
                                                            <Key frame="491" value="-10.1051" />
                                                            <Key frame="515" value="-10.1051" />
                                                            <Key frame="556" value="-4.30429" />
                                                            <Key frame="590" value="-4.30429" />
                                                            <Key frame="622" value="-5.88634" />
                                                            <Key frame="651" value="-4.2164" />
                                                            <Key frame="699" value="0.969213" />
                                                            <Key frame="731" value="-2.72224" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="13.7966" />
                                                            <Key frame="70" value="18.9822" />
                                                            <Key frame="109" value="17.2244" />
                                                            <Key frame="139" value="17.9275" />
                                                            <Key frame="172" value="18.5428" />
                                                            <Key frame="185" value="18.5428" />
                                                            <Key frame="221" value="18.1912" />
                                                            <Key frame="264" value="8.34731" />
                                                            <Key frame="297" value="18.6306" />
                                                            <Key frame="335" value="13.3571" />
                                                            <Key frame="372" value="18.2791" />
                                                            <Key frame="388" value="18.6306" />
                                                            <Key frame="424" value="18.6306" />
                                                            <Key frame="458" value="21.0916" />
                                                            <Key frame="491" value="18.7185" />
                                                            <Key frame="515" value="18.8064" />
                                                            <Key frame="556" value="20.4764" />
                                                            <Key frame="590" value="20.6522" />
                                                            <Key frame="622" value="14.0603" />
                                                            <Key frame="651" value="8.87466" />
                                                            <Key frame="699" value="9.05044" />
                                                            <Key frame="731" value="16.0818" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="-5.09532" />
                                                            <Key frame="70" value="-5.29" />
                                                            <Key frame="109" value="-5.29" />
                                                            <Key frame="139" value="-5.29" />
                                                            <Key frame="172" value="-5.29" />
                                                            <Key frame="185" value="-5.2711" />
                                                            <Key frame="221" value="-5.29" />
                                                            <Key frame="264" value="-5.29" />
                                                            <Key frame="297" value="-5.29" />
                                                            <Key frame="335" value="-5.29" />
                                                            <Key frame="372" value="-5.29" />
                                                            <Key frame="388" value="-5.2711" />
                                                            <Key frame="424" value="-5.29" />
                                                            <Key frame="458" value="-5.29" />
                                                            <Key frame="491" value="-5.29" />
                                                            <Key frame="515" value="-5.18321" />
                                                            <Key frame="556" value="-5.29" />
                                                            <Key frame="590" value="-5.29" />
                                                            <Key frame="622" value="-5.29" />
                                                            <Key frame="651" value="-5.29" />
                                                            <Key frame="699" value="-5.29" />
                                                            <Key frame="731" value="-5.18321" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="6.77007" />
                                                            <Key frame="70" value="3.60596" />
                                                            <Key frame="109" value="4.83645" />
                                                            <Key frame="139" value="4.13332" />
                                                            <Key frame="172" value="3.69386" />
                                                            <Key frame="185" value="3.69386" />
                                                            <Key frame="221" value="3.2544" />
                                                            <Key frame="264" value="7.56109" />
                                                            <Key frame="297" value="4.92434" />
                                                            <Key frame="335" value="5.89115" />
                                                            <Key frame="372" value="3.86964" />
                                                            <Key frame="388" value="4.13332" />
                                                            <Key frame="424" value="3.95753" />
                                                            <Key frame="458" value="2.37548" />
                                                            <Key frame="491" value="3.86964" />
                                                            <Key frame="515" value="3.95753" />
                                                            <Key frame="556" value="2.37548" />
                                                            <Key frame="590" value="2.63916" />
                                                            <Key frame="622" value="7.56109" />
                                                            <Key frame="651" value="11.0768" />
                                                            <Key frame="699" value="10.4615" />
                                                            <Key frame="731" value="5.97904" />
                                                        </ActuatorCurve>
                                                        <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                            <Key frame="33" value="0.881321" />
                                                            <Key frame="70" value="5.01223" />
                                                            <Key frame="109" value="0.266079" />
                                                            <Key frame="139" value="3.69386" />
                                                            <Key frame="172" value="1.40867" />
                                                            <Key frame="185" value="1.40867" />
                                                            <Key frame="221" value="6.85796" />
                                                            <Key frame="264" value="4.92434" />
                                                            <Key frame="297" value="2.72705" />
                                                            <Key frame="335" value="-1.75543" />
                                                            <Key frame="372" value="0.529755" />
                                                            <Key frame="388" value="0.705538" />
                                                            <Key frame="424" value="3.07861" />
                                                            <Key frame="458" value="7.12163" />
                                                            <Key frame="491" value="7.56109" />
                                                            <Key frame="515" value="7.56109" />
                                                            <Key frame="556" value="2.90283" />
                                                            <Key frame="590" value="2.81494" />
                                                            <Key frame="622" value="3.86964" />
                                                            <Key frame="651" value="2.55126" />
                                                            <Key frame="699" value="-1.66754" />
                                                            <Key frame="731" value="1.32078" />
                                                        </ActuatorCurve>
                                                    </ActuatorList>
                                                </Timeline>
                                            </Box>
                                            <Box name="S.Reco" robot="" id="6" tooltip="What are you usefull for ?" bitmap_expanded="1" plugin="" x="631" y="63">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="Speech Reco._onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Starts speech recongition." id="2" />
                                                <Input name="Speech Reco._onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stops speech recongintion." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="" id="4" />
                                                <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="behavior_layer1" mute="0">
                                                        <BehaviorKeyframe name="keyframe1" index="1" bitmap="">
                                                            <Diagram scale="-1">
                                                                <Box name="Choice" robot="" id="1" tooltip="Configure speech recognition to seelct an answer from a set of sentences. Head tactile sensors can also be used to select a sentence." bitmap_expanded="1" plugin="" x="85" y="125">
                                                                    <bitmap>media/images/box/appu/voice_recognition.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[# Version: v1.0
# Author : J.Amsellem
# Date : 26/01/2011

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        pass

    def onUnload(self):
        pass
        
    def onInput_onStart(self, dictionnary):
        pass
        
    def onInput_onStop(self):
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Starts speech recongition with an array of string as a dictionnary." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stops speech recongintion." id="3" />
                                                                    <Output name="onRecognized" type="2" type_size="1" nature="1" inner="0" tooltip="This output is activated when a word is recognized" id="4" />
                                                                    <Output name="onFailed" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when speech recognition is ready to be launched." id="5" />
                                                                    <Parameter name="Confidence" inherits_from_parent="0" content_type="2" value="0.2" default_value="0.2" min="0" max="1" tooltip="Speech recognition confidence threshold." id="6" />
                                                                    <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="1" value="10" default_value="10" min="0" max="100" tooltip="Lap of time alowed to give the choice." id="7" />
                                                                    <Parameter name="Number of tries" inherits_from_parent="0" content_type="1" value="3" default_value="3" min="1" max="10" tooltip="Number of bad recognition alowed." id="8" />
                                                                    <Parameter name="French" inherits_from_parent="0" content_type="3" value="Et à propos du ludo éducatif" default_value="" custom_choice="0" tooltip="List of allowed answers when current language is french. Answers are formated like the following :&#x0A;answer1/alternate answer1;answer2;answer3" id="9" />
                                                                    <Parameter name="English" inherits_from_parent="0" content_type="3" value="And what about edutainment" default_value="" custom_choice="0" tooltip="List of allowed answers when current language is english. Answers are formated like the following :&#x0A;answer1/alternate answer1;answer2;answer3" id="10" />
                                                                    <Parameter name="Repeat choice" inherits_from_parent="0" content_type="0" value="0" default_value="0" tooltip="Indicates if the validated choice should be repeated or not." id="11" />
                                                                    <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
                                                                        <watches />
                                                                        <BehaviorLayer name="behavior_layer1" mute="0">
                                                                            <BehaviorKeyframe name="keyframe1" index="1" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="TactileCodes" robot="" id="3" tooltip="Detection de sequence tactile sur la tête de Nao." bitmap_expanded="1" plugin="" x="108" y="115">
                                                                                        <bitmap>media/images/box/appu/fingerprint.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class SequenceHandler():
    def __init__(self, aSeq):
        self.aTactilSequence = aSeq
        self.reset()
    
    def reset(self):
        self.nTapTime = None
        self.nTapIndex = 2
        
    def update(self, aState, nTime):
        # In any case, if too much time elasped, sequence is invalidated
        if self.nTapTime != None and (nTime - self.nTapTime) > self.aTactilSequence[self.nTapIndex-1]:
            self.reset()
        # If current sensors state match current expected shape
        if aState == self.aTactilSequence[self.nTapIndex]:
            self.nTapTime = nTime
            self.nTapIndex += 2
        # If current sensor state does not match sequence at current index BUT match sequence at first index
        elif aState == self.aTactilSequence[1]:
            self.nTapTime = nTime
            self.nTapIndex = 4
        # If we've reach the end of the sequence, then output !!
        if self.nTapIndex > len(self.aTactilSequence):
            return self.aTactilSequence[0]
        else:
            return None
        
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        # Build a list of devices with full name
        self.aDeviceNames = ["%sTactilTouched" % name for name in ["Front", "Middle", "Rear"]]
        
        # Parameters
        parameters = [   ["SingleFront", "Single front", [1, 0, 0], 1.0, [0, 0, 0]],
                                ["SingleMiddle", "Single middle", [0, 1, 0], 1.0, [0, 0, 0]],
                                ["SingleRear", "Single rear", [0, 0, 1], 1.0, [0, 0, 0]],
                                ["CaressFtoR", "Caress front to rear", [1, 0, 0], 0.5, [1, 1, 0], 0.5, [0, 1, 0], 0.5, [0, 1, 1], 0.5, [0, 0, 1]],
                                ["CaressRtoF", "Caress rear to front", [0, 0, 1], 0.5, [0, 1, 1], 0.5, [0, 1, 0], 0.5, [1, 1, 0], 0.5, [1, 0, 0]],
                                ["SingleTap", "Single tap", [1, 1, 1], 0.5, [0, 0, 0]],
                                ["EnumerateFtoR", "Enumerate front to rear", [1, 0, 0], 1.0, [0, 1, 0], 1.0, [0, 0, 1]],
                                ["EnumerateRtoF", "Enumerate rear to front", [0, 0, 1], 1.0, [0, 1, 0], 1.0, [1, 0, 0]],
                                ["ZoomIn", "Zoom in", [1, 0, 1], 1.0, [0, 1, 0]],
                                ["ZoomOut", "Zoom out", [0, 1, 0], 1.0, [1, 0, 1]],
                                ["DoubleFront", "Double front", [1, 0, 0], 1.0, [0, 0, 0], 1.0, [1, 0, 0]],
                                ["DoubleMiddle", "Double middle", [0, 1, 0], 1.0, [0, 0, 0], 1.0, [0, 1, 0]],
                                ["DoubleRear", "Double rear", [0, 0, 1], 1.0, [0, 0, 0], 1.0, [0, 0, 1]],
                                ["DoubleTap", "Double tap", [1, 1, 1], 1.0, [0, 0, 0], 1.0, [1, 1, 1]],
                                ["SecretCode", "Secret code", [1, 0, 1], 1.0, [0, 0, 0], 1.0, [1, 0, 1], 1.0, [0, 1, 0]],                                
                                ["CalmDown", "Calm down", [1, 1, 1], 8.0, [0, 0, 0]]    ]
        # Create a sequence handler object for each enable sequence
        self.aSequenceHandler = []
        for seq in parameters:
            if self.getParameter(seq[1]):
                self.aSequenceHandler.append(SequenceHandler(seq))

    def onLoad(self):
        self.bIsRunning = False
        self.onInput_reset()
        
    def onUnload(self):
        self.onInput_onStop()

    def onSensorChange(self, pDataName, pValue, pMessage):
        "This is called whenever one of the three tactil sensors state change"    
        aState = ALMemory.getListData( self.aDeviceNames )
        # This prevent to process several times the same sensor state
        if aState != self.aState:
            self.aState = aState
            nTime = time.time()
            #~ self.log(str(aState))
            for seq in self.aSequenceHandler:
                sOutput = seq.update(aState, nTime)
                if  sOutput != None:
                    self.Match(sOutput)
                    # Force all other sequence to be reset to prevent multiple match.
                    # But this will prevent sequences like "DoubleTap" to work since each "SingleTap" will reset "DoubleTap"
                    self.onInput_reset()
                    # Get the output function from the sequence name
                    try:
                        func = getattr(self, sOutput)
                        func()
                    # If no output function found, just forget it
                    except:
                        pass

    def onInput_onStart(self):
        if not self.bIsRunning:
            self.bIsRunning = True
            # Save initial sensor state
            self.aState = None#ALMemory.getListData( self.aDeviceNames )        
            # Subscribe to each sensor device
            for device in self.aDeviceNames:
                ALMemory.subscribeToEvent( device, self.getName(), "onSensorChange" )            
    
    def onInput_onStop(self):
        if self.bIsRunning:
            for device in self.aDeviceNames:
                ALMemory.unsubscribeToEvent( device, self.getName() )
            self.onInput_reset()
            self.bIsRunning = False
            
    def onInput_reset(self):
        for seq in self.aSequenceHandler:
            seq.reset()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Output name="Match" type="3" type_size="1" nature="2" inner="0" tooltip="double tap" id="4" />
                                                                                        <Output name="SingleTap" type="1" type_size="1" nature="2" inner="0" tooltip="" id="5" />
                                                                                        <Output name="DoubleFront" type="1" type_size="1" nature="2" inner="0" tooltip="" id="6" />
                                                                                        <Output name="DoubleMiddle" type="1" type_size="1" nature="2" inner="0" tooltip="" id="7" />
                                                                                        <Output name="DoubleRear" type="1" type_size="1" nature="2" inner="0" tooltip="" id="8" />
                                                                                        <Output name="EnumerateRtoF" type="1" type_size="1" nature="2" inner="0" tooltip="" id="9" />
                                                                                        <Output name="EnumerateFtoR" type="1" type_size="1" nature="2" inner="0" tooltip="" id="10" />
                                                                                        <Output name="CaressRtoF" type="1" type_size="1" nature="2" inner="0" tooltip="" id="11" />
                                                                                        <Output name="CaressFtoR" type="1" type_size="1" nature="2" inner="0" tooltip="" id="12" />
                                                                                        <Output name="DoubleTap" type="1" type_size="1" nature="2" inner="0" tooltip="" id="13" />
                                                                                        <Output name="ZoomIn" type="1" type_size="1" nature="2" inner="0" tooltip="" id="14" />
                                                                                        <Output name="ZoomOut" type="1" type_size="1" nature="2" inner="0" tooltip="" id="15" />
                                                                                        <Output name="CalmDown" type="1" type_size="1" nature="2" inner="0" tooltip="" id="16" />
                                                                                        <Output name="SingleFront" type="1" type_size="1" nature="2" inner="0" tooltip="" id="17" />
                                                                                        <Output name="SingleMiddle" type="1" type_size="1" nature="2" inner="0" tooltip="" id="18" />
                                                                                        <Output name="SingleRear" type="1" type_size="1" nature="2" inner="0" tooltip="" id="19" />
                                                                                        <Parameter name="Caress front to rear" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="Caress front to rear" id="20" />
                                                                                        <Parameter name="Caress rear to front" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="21" />
                                                                                        <Parameter name="Single tap" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="22" />
                                                                                        <Parameter name="Double front" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="23" />
                                                                                        <Parameter name="Double middle" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="24" />
                                                                                        <Parameter name="Double rear" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="25" />
                                                                                        <Parameter name="Calm down" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="26" />
                                                                                        <Parameter name="Enumerate front to rear" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="27" />
                                                                                        <Parameter name="Enumerate rear to front" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="28" />
                                                                                        <Parameter name="Zoom in" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="29" />
                                                                                        <Parameter name="Zoom out" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="30" />
                                                                                        <Parameter name="Double tap" inherits_from_parent="0" content_type="0" value="0" default_value="0" tooltip="" id="31" />
                                                                                        <Parameter name="Secret code" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="" id="32" />
                                                                                        <Parameter name="Single front" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="33" />
                                                                                        <Parameter name="Single middle" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="34" />
                                                                                        <Parameter name="Single rear" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="" id="35" />
                                                                                    </Box>
                                                                                    <Box name="Dictionnary" robot="" id="1" tooltip="List of words to recognize" bitmap_expanded="1" plugin="" x="451" y="106">
                                                                                        <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.nIndex = None

    def onUnload(self):
        pass

    def onInput_onStart(self, dico):
        asr = ALProxy("ALSpeechRecognition")    
        sLang = asr.getLanguage()
        
        # If no dico provided as parameter, use the one from parameters
        if dico == None:
            dico = self.getParameter(sLang).split(";")
            
        # This array will contain the text to say for each allowed answer
        self.aAnswers = []
        # This array will contain every sentences to be recognized by speech recognition engine
        self.aDictionnary = []
        
        for answer in dico:
            # For one answer, each possible proposition is separated by a '/' character
            tmp = answer.split("/")
            self.aDictionnary += tmp
            self.aAnswers.append(tmp[0])
            
        self.log(str(self.aDictionnary))
        self.log(str(self.aAnswers))
        try:
            asr.setWordListAsVocabulary( self.aDictionnary )
            asr.setVisualExpression(True)
        except RuntimeError, e:
            self.log("Could not change current speech recognition dictionnary: " + str(e))
            raise e
        self.onReady(dico)

    def onInput_onSayNext(self):
        if self.nIndex == None:
            self.nIndex = 0
        else:
            self.nIndex += 1
        self.nIndex = self.nIndex % len(self.aAnswers)
        self.onSay(self.aAnswers[self.nIndex])

        
    def onInput_onSayPrev(self):
        if self.nIndex == None:
            self.nIndex = -1
        else:
            self.nIndex -= 1    
        self.nIndex = self.nIndex % len(self.aAnswers)            
        self.onSay(self.aAnswers[self.nIndex])
        
    def onInput_onValidate(self):
        if self.nIndex != None:
            self.onValidated(self.aAnswers[self.nIndex])
        
    def onInput_onStop(self):
        pass]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Input name="onSayNext" type="1" type_size="1" nature="1" inner="0" tooltip="" id="4" />
                                                                                        <Input name="onValidate" type="1" type_size="1" nature="1" inner="0" tooltip="" id="5" />
                                                                                        <Input name="onSayPrev" type="1" type_size="1" nature="1" inner="0" tooltip="" id="6" />
                                                                                        <Output name="onSay" type="3" type_size="1" nature="2" inner="0" tooltip="" id="7" />
                                                                                        <Output name="onValidated" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="8" />
                                                                                        <Output name="onReady" type="0" type_size="1" nature="2" inner="0" tooltip="" id="9" />
                                                                                    </Box>
                                                                                    <Box name="Say Text" robot="" id="4" tooltip="Say the text set in parameters." bitmap_expanded="1" plugin="" x="901" y="97">
                                                                                        <bitmap>media/images/box/interaction/say.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote

    def onLoad(self):
        self.bIsRunning = False
        self.ids = []
        
    def onUnload(self):
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        while( self.bIsRunning ):
            time.sleep( 0.2 )

    def onInput_onStart(self, p):
        self.bIsRunning = True
        try:
            sentence = "\RSPD="+ str( self.getParameter("Speed (%)") ) + "\ "
            sentence += "\VCT="+ str( self.getParameter("Voice shaping (%)") ) + "\ "
            sentence += str(p)
            sentence +=  "\RST\ "
            id = self.tts.post.say(str(sentence))
            self.ids.append(id)
            self.tts.wait(id, 0)
        finally:
            try:
                self.ids.remove(id)
            except:
                pass
            if( self.ids == [] ):
                self.onStopped() # activate output of the box
                self.bIsRunning = False

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="Voice shaping (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='Used to modify at runtime the voice feature (tone, speed). In a slighty&#x0A;different way than pitch and speed, it gives a kind of &quot;gender or age&#x0A;modification&quot; effect.&#x0A;&#x0A;For instance, a quite good male derivation of female voice can be&#x0A;obtained setting this parameter to 78%.&#x0A;&#x0A;Note: For a better effect, you can compensate this parameter with the&#x0A;speed parameter. For example, if you want to decrease by 20% the voice&#x0A;shaping, you will have to increase by 20% the speed to keep a constant&#x0A;average speed.' id="5" />
                                                                                        <Parameter name="Speed (%)" inherits_from_parent="1" content_type="1" value="110" default_value="100" min="50" max="200" tooltip="Changes the speed of the voice.&#x0A;&#x0A;Note: For a better effect, you can compensate this parameter with the voice&#x0A;shaping parameter. For example, if you want to increase by 20% the speed, you&#x0A;will have to decrease by 20% the voice shaping to keep a constant average&#x0A;speed." id="6" />
                                                                                    </Box>
                                                                                    <Box name="Launch ASR" robot="" id="2" tooltip="Try to recognize the list of words set in the ASR.&#x0A;&#x0A;It has 2 outputs:&#x0A;- First one transmit the understood word if the threshold associated is&#x0A;high enough.&#x0A;- Second one is stimulated when nothing has been understood or where the&#x0A;threshold was not high enough." bitmap_expanded="1" plugin="" x="590" y="268">
                                                                                        <bitmap>media/images/box/interaction/ear.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False

    def onInput_onStart(self):
        self.bIsRunning = True

    def onInput_onStop(self):
        if( self.bIsRunning ):
            self.onUnload()
            self.onStopped()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Starts speech recongition." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stops speech recongintion." id="3" />
                                                                                        <Input name="WordRecognized" type="0" type_size="1" nature="4" stm_value_name="WordRecognized" inner="1" tooltip="Connected to ALMemory. Will be stimulated every time the value subscribed to changes, respecting the refresh period." id="4" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is stopped." id="5" />
                                                                                        <Output name="wordRecognized" type="3" type_size="1" nature="2" inner="0" tooltip="Transmit a word recognized with enough trust. Can be connected directly to a dispatcher." id="6" />
                                                                                        <Output name="onNothing" type="1" type_size="1" nature="2" inner="0" tooltip="Nothing has been understood during last process." id="7" />
                                                                                        <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
                                                                                            <watches />
                                                                                            <BehaviorLayer name="behavior_layer1" mute="0">
                                                                                                <BehaviorKeyframe name="keyframe1" index="1" bitmap="media/images/box/interaction/say.png">
                                                                                                    <Diagram scale="-1">
                                                                                                        <Box name="Process Word" robot="" id="1" tooltip="Process speech recognition extractor data (WordRecognized) to give the most&#x0A;interesting data." bitmap_expanded="1" plugin="" x="140" y="59">
                                                                                                            <bitmap>media/images/box/interaction/ear.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self, p):
        if len(p) > 1:
            if p[1] >= self.getParameter("Confidence"):
                self.onWord(p[0]) #~ activate output of the box
            else:
                self.onNothing()
        else:
            self.onNothing()]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input. It must be the&#x0A;WordRecognized extractor data." id="2" />
                                                                                                            <Output name="onWord" type="3" type_size="1" nature="1" inner="0" tooltip="The word recognized." id="3" />
                                                                                                            <Output name="onNothing" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent if nothing has been recognized or the word recognized had&#x0A;not a recognition threshold high enough to be taken into account." id="4" />
                                                                                                        </Box>
                                                                                                        <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="4" />
                                                                                                        <Link inputowner="0" indexofinput="6" outputowner="1" indexofoutput="3" />
                                                                                                        <Link inputowner="0" indexofinput="7" outputowner="1" indexofoutput="4" />
                                                                                                    </Diagram>
                                                                                                </BehaviorKeyframe>
                                                                                            </BehaviorLayer>
                                                                                            <ActuatorList />
                                                                                        </Timeline>
                                                                                    </Box>
                                                                                    <Box name="Repeat" robot="" id="5" tooltip="Repeat n times." bitmap_expanded="1" plugin="" x="756" y="325">
                                                                                        <bitmap>media/images/box/loop.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.nTimes = 0

    def onUnload(self):
        pass

    def onInput_onStart(self):
        self.nTimes += 1    
        if self.nTimes>= self.getParameter("Number of tries"):
            self.onStopped()
        else:
            self.onRepeat()

    def onInput_onStop(self):
        pass]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Output name="onRepeat" type="1" type_size="1" nature="2" inner="0" tooltip="Activated on each repetition" id="4" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Activated when the maximum number of repetetion is reached" id="5" />
                                                                                        <Parameter name="Number of tries" inherits_from_parent="0" content_type="1" value="2" default_value="2" min="1" max="100" tooltip="" id="6" />
                                                                                    </Box>
                                                                                    <Box name="Wait" robot="" id="6" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." bitmap_expanded="1" plugin="" x="445" y="6">
                                                                                        <bitmap>media/images/box/wait.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import threading # opkg install python-threading
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        bRunning = self.tb
        self.onUnload()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                                                        <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                                                    </Box>
                                                                                    <Box name="IndexOf" robot="" id="7" tooltip="Output the index of the entry in the array" bitmap_expanded="1" plugin="" x="754" y="226">
                                                                                        <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.aArray = None

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onEntry(self, p):
        found = False
        index = 0
        while not found and index < len(self.aArray):
            found = p in self.aArray[index]
            index += 1
        if found:
            if self.getParameter("Repeat choice"):
                tmp = self.aArray[index-1].split("/")
                self.onSay(tmp[0])
            self.onStopped(index-1)
        else:
            self.onStopped(-1)

    def onInput_onArray(self, p):
        self.aArray = p

    def onInput_onStop(self):
        pass]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onEntry" type="3" type_size="1" nature="1" inner="0" tooltip="" id="2" />
                                                                                        <Input name="onArray" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="3" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="4" />
                                                                                        <Output name="onSay" type="3" type_size="1" nature="2" inner="0" tooltip="" id="5" />
                                                                                        <Output name="onStopped" type="2" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="6" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                                    <Link inputowner="1" indexofinput="6" outputowner="3" indexofoutput="19" />
                                                                                    <Link inputowner="1" indexofinput="4" outputowner="3" indexofoutput="17" />
                                                                                    <Link inputowner="3" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                                    <Link inputowner="4" indexofinput="2" outputowner="1" indexofoutput="7" />
                                                                                    <Link inputowner="2" indexofinput="3" outputowner="3" indexofoutput="17" />
                                                                                    <Link inputowner="2" indexofinput="3" outputowner="3" indexofoutput="19" />
                                                                                    <Link inputowner="1" indexofinput="5" outputowner="3" indexofoutput="18" />
                                                                                    <Link inputowner="5" indexofinput="2" outputowner="2" indexofoutput="7" />
                                                                                    <Link inputowner="0" indexofinput="5" outputowner="5" indexofoutput="5" />
                                                                                    <Link inputowner="0" indexofinput="5" outputowner="3" indexofoutput="5" />
                                                                                    <Link inputowner="6" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                                    <Link inputowner="0" indexofinput="5" outputowner="6" indexofoutput="4" />
                                                                                    <Link inputowner="6" indexofinput="3" outputowner="3" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="9" />
                                                                                    <Link inputowner="7" indexofinput="3" outputowner="1" indexofoutput="9" />
                                                                                    <Link inputowner="7" indexofinput="2" outputowner="2" indexofoutput="6" />
                                                                                    <Link inputowner="7" indexofinput="2" outputowner="1" indexofoutput="8" />
                                                                                    <Link inputowner="0" indexofinput="4" outputowner="7" indexofoutput="6" />
                                                                                    <Link inputowner="4" indexofinput="2" outputowner="7" indexofoutput="5" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                        </BehaviorLayer>
                                                                        <ActuatorList />
                                                                    </Timeline>
                                                                </Box>
                                                                <Box name="Stand_Breathe_Eco" robot="" id="2" tooltip="Makes Nao breathe with reduced stiffness." bitmap_expanded="1" plugin="" x="81" y="15">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bStarted = False

    def onUnload(self):
        if self.bStarted == True:
            self.onInput_onStop()

    def onInput_onStart(self):
        self.bStarted = True

    def onInput_onStop(self):
        self.gotoAndStop(200)
        self.bStarted = False
        self.onStopped()
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                    <Timeline fps="25" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="220" scale="10">
                                                                        <watches />
                                                                        <BehaviorLayer name="behavior_layer1" mute="0">
                                                                            <BehaviorKeyframe name="breathe" index="1" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="BlinkWink" robot="" id="1" tooltip="blink" bitmap_expanded="1" plugin="" x="117" y="46">
                                                                                        <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import random

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.bIsRunning = False
        self.bMustStop = False

    def onLoad(self):
        pass

    def onUnload(self):
        self.onInput_onStop()

    def blink(self):
        on = 0xffffff    
        off = 0x222222
        rDuration = self.getParameter("speed")
        ALLeds.post.fadeRGB( "FaceLed0", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed1", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed2", on, rDuration )
        ALLeds.post.fadeRGB( "FaceLed3", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed4", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed5", off, rDuration )
        ALLeds.post.fadeRGB( "FaceLed6", on, rDuration )
        ALLeds.fadeRGB( "FaceLed7", off, rDuration )
        time.sleep( 0.1 )
        ALLeds.fadeRGB( "FaceLeds", on, rDuration )

    def onInput_onStart(self):
        if self.bIsRunning:
            return

        self.bIsRunning = True
        self.bMustStop = False
        
        threshold = self.getParameter("threshold")
        
        while not self.bMustStop:
            n = random.uniform(0.0, 100.0)
            if n>threshold:
                self.blink()
            time.sleep(0.1)
    
        self.bIsRunning = False
        self.bMustStop = False

    def onInput_onStop(self):
        self.bMustStop = True]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                        <Parameter name="speed" inherits_from_parent="0" content_type="2" value="0.1" default_value="0.1" min="0" max="1" tooltip="" id="5" />
                                                                                        <Parameter name="threshold" inherits_from_parent="0" content_type="2" value="90" default_value="70" min="0" max="100" tooltip="" id="6" />
                                                                                    </Box>
                                                                                    <Box name="Set Stiffness" robot="" id="7" tooltip="Set motors stiffness." bitmap_expanded="1" plugin="" x="86" y="155">
                                                                                        <bitmap>media/images/box/movement/stiffness.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False

    def setStiffness(self, stiffness):
        self.bIsRunning = True
        duration = self.getParameter("Duration (s)")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)
        self.bIsRunning = False

    def onInput_onSet(self):
        if( self.bIsRunning ):
            return
        self.setStiffness(self.getParameter("Motors stiffness (%)")/100.)
        self.onReady() #~ activate output of the box]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onSet" type="1" type_size="1" nature="1" inner="0" tooltip="When this input is stimulated, the stiffness of the selected motors is set to&#x0A;the stiffness parameter value." id="2" />
                                                                                        <Output name="onReady" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent when stiffness has been set." id="3" />
                                                                                        <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="4" />
                                                                                        <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="5" />
                                                                                        <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="6" />
                                                                                        <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="7" />
                                                                                        <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="8" />
                                                                                        <Parameter name="Motors stiffness (%)" inherits_from_parent="0" content_type="1" value="30" default_value="100" min="0" max="100" tooltip="Stiffness value the motors are set to." id="9" />
                                                                                        <Parameter name="Duration (s)" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0.02" max="10" tooltip="How much time to go to the max/min stiffness in seconds." id="10" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                    <Link inputowner="7" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                            <BehaviorKeyframe name="loop" index="181" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="gotoAndPlay" robot="" id="1" tooltip="Jump to a given frame (edit parameters to modify it) and start playing from this index." bitmap_expanded="1" plugin="" x="195" y="50">
                                                                                        <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndPlayParent(self.getParameter("frame number"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                                        <Parameter name="frame number" inherits_from_parent="0" content_type="1" value="1" default_value="1" min="0" max="10000" tooltip="" id="3" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                            <BehaviorKeyframe name="exit" index="200" bitmap="">
                                                                                <Diagram scale="-1">
                                                                                    <Box name="Set Stiffness" robot="" id="1" tooltip="Set motors stiffness." bitmap_expanded="1" plugin="" x="172" y="14">
                                                                                        <bitmap>media/images/box/movement/stiffness.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False

    def setStiffness(self, stiffness):
        self.bIsRunning = True
        duration = self.getParameter("Duration (s)")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)
        self.bIsRunning = False

    def onInput_onSet(self):
        if( self.bIsRunning ):
            return
        self.setStiffness(self.getParameter("Motors stiffness (%)")/100.)
        self.onReady() #~ activate output of the box]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onSet" type="1" type_size="1" nature="1" inner="0" tooltip="When this input is stimulated, the stiffness of the selected motors is set to&#x0A;the stiffness parameter value." id="2" />
                                                                                        <Output name="onReady" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent when stiffness has been set." id="3" />
                                                                                        <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="4" />
                                                                                        <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="5" />
                                                                                        <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="6" />
                                                                                        <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="7" />
                                                                                        <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="8" />
                                                                                        <Parameter name="Motors stiffness (%)" inherits_from_parent="0" content_type="1" value="100" default_value="100" min="0" max="100" tooltip="Stiffness value the motors are set to." id="9" />
                                                                                        <Parameter name="Duration (s)" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0.02" max="10" tooltip="How much time to go to the max/min stiffness in seconds." id="10" />
                                                                                    </Box>
                                                                                    <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                        </BehaviorLayer>
                                                                        <ActuatorList>
                                                                            <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="1" alwaysVisible="0">
                                                                                <Key frame="80" value="-0.79343" />
                                                                                <Key frame="105" value="-0.881321" />
                                                                                <Key frame="155" value="-0.705538" />
                                                                                <Key frame="180" value="-1.40867" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="1" alwaysVisible="0">
                                                                                <Key frame="80" value="-4.57277" />
                                                                                <Key frame="105" value="-4.57277" />
                                                                                <Key frame="155" value="-12.3072" />
                                                                                <Key frame="180" value="-14.5045" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="89.0319" />
                                                                                <Key frame="102" value="90.9655" />
                                                                                <Key frame="152" value="88.5925" />
                                                                                <Key frame="177" value="88.5925" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="6.58948" />
                                                                                <Key frame="102" value="6.3258" />
                                                                                <Key frame="152" value="6.15002" />
                                                                                <Key frame="177" value="6.23791" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="-65.9212" />
                                                                                <Key frame="102" value="-69.4369" />
                                                                                <Key frame="152" value="-69.7005" />
                                                                                <Key frame="177" value="-72.9525" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="-39.5489" />
                                                                                <Key frame="102" value="-41.3067" />
                                                                                <Key frame="152" value="-32.957" />
                                                                                <Key frame="177" value="-29.6171" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="6.58948" />
                                                                                <Key frame="102" value="6.41369" />
                                                                                <Key frame="152" value="6.15002" />
                                                                                <Key frame="177" value="6.15002" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="77" value="0.23348" />
                                                                                <Key frame="102" value="0.23348" />
                                                                                <Key frame="152" value="0.23348" />
                                                                                <Key frame="177" value="0.23348" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="88.5973" />
                                                                                <Key frame="98" value="88.6852" />
                                                                                <Key frame="148" value="91.7614" />
                                                                                <Key frame="173" value="91.7614" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="-6.15482" />
                                                                                <Key frame="98" value="-5.27591" />
                                                                                <Key frame="148" value="-4.39699" />
                                                                                <Key frame="173" value="-4.57277" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="66.0922" />
                                                                                <Key frame="98" value="69.3442" />
                                                                                <Key frame="148" value="77.6939" />
                                                                                <Key frame="173" value="80.067" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="45.0909" />
                                                                                <Key frame="98" value="44.5635" />
                                                                                <Key frame="148" value="35.3349" />
                                                                                <Key frame="173" value="32.6981" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="10.193" />
                                                                                <Key frame="98" value="10.1051" />
                                                                                <Key frame="148" value="10.1051" />
                                                                                <Key frame="173" value="10.1051" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="73" value="0.40948" />
                                                                                <Key frame="98" value="0.40948" />
                                                                                <Key frame="148" value="0.40948" />
                                                                                <Key frame="173" value="0.40948" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-8.52309" />
                                                                                <Key frame="100" value="-8.52309" />
                                                                                <Key frame="150" value="-8.17153" />
                                                                                <Key frame="175" value="-8.4352" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="3.43018" />
                                                                                <Key frame="100" value="3.43018" />
                                                                                <Key frame="150" value="7.56109" />
                                                                                <Key frame="175" value="7.56109" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="12.0436" />
                                                                                <Key frame="100" value="11.9557" />
                                                                                <Key frame="150" value="12.1315" />
                                                                                <Key frame="175" value="12.0436" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-5.18802" />
                                                                                <Key frame="100" value="-5.10012" />
                                                                                <Key frame="150" value="-5.18802" />
                                                                                <Key frame="175" value="-5.18802" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="3.24959" />
                                                                                <Key frame="100" value="3.33748" />
                                                                                <Key frame="150" value="3.42537" />
                                                                                <Key frame="175" value="3.24959" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-4.04062" />
                                                                                <Key frame="100" value="-4.04062" />
                                                                                <Key frame="150" value="-7.20472" />
                                                                                <Key frame="175" value="-7.29261" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-6.3258" />
                                                                                <Key frame="100" value="-6.23791" />
                                                                                <Key frame="150" value="-2.01911" />
                                                                                <Key frame="175" value="-1.93121" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="10.5446" />
                                                                                <Key frame="100" value="10.6325" />
                                                                                <Key frame="150" value="11.1598" />
                                                                                <Key frame="175" value="11.1598" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="-4.2164" />
                                                                                <Key frame="100" value="-4.2164" />
                                                                                <Key frame="150" value="-4.30429" />
                                                                                <Key frame="175" value="-4.39218" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="3.60596" />
                                                                                <Key frame="100" value="3.69386" />
                                                                                <Key frame="150" value="3.60596" />
                                                                                <Key frame="175" value="3.43018" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="75" value="5.80326" />
                                                                                <Key frame="100" value="5.62747" />
                                                                                <Key frame="150" value="2.55126" />
                                                                                <Key frame="175" value="2.55126" />
                                                                            </ActuatorCurve>
                                                                        </ActuatorList>
                                                                    </Timeline>
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="1" indexofoutput="5" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList />
                                                </Timeline>
                                            </Box>
                                            <Link inputowner="2" indexofinput="2" outputowner="5" indexofoutput="3" />
                                            <Link inputowner="3" indexofinput="2" outputowner="2" indexofoutput="4" />
                                            <Link inputowner="12" indexofinput="2" outputowner="2" indexofoutput="5" />
                                            <Link inputowner="5" indexofinput="2" outputowner="0" indexofoutput="1" />
                                            <Link inputowner="0" indexofinput="4" outputowner="4" indexofoutput="4" />
                                            <Link inputowner="6" indexofinput="2" outputowner="3" indexofoutput="4" />
                                            <Link inputowner="6" indexofinput="2" outputowner="12" indexofoutput="4" />
                                            <Link inputowner="4" indexofinput="2" outputowner="6" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                </BehaviorLayer>
                                <ActuatorList />
                            </Timeline>
                        </Box>
                        <Link inputowner="0" indexofinput="4" outputowner="1" indexofoutput="4" />
                        <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="2" />
                    </Diagram>
                </BehaviorKeyframe>
            </BehaviorLayer>
            <ActuatorList />
        </Timeline>
    </Box>
</ChoregrapheProject>
