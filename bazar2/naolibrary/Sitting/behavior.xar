<?xml version="1.0" encoding="UTF-8" ?>
<ChoregrapheProject xmlns="http://www.aldebaran-robotics.com/schema/choregraphe/project.xsd" xar_version="2">
    <Box name="root" robot="" id="-1" tooltip="Root box of Choregraphe&apos;s project. Highest level possible." bitmap_expanded="1" plugin="" x="0" y="0">
        <bitmap>media/images/box/root.png</bitmap>
        <script language="4">
            <content>
                <![CDATA[]]>
</content>
        </script>
        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
        <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
            <watches />
            <BehaviorLayer name="behavior_layer1" mute="0">
                <BehaviorKeyframe name="keyframe1" index="1" bitmap="">
                    <Diagram scale="-1">
                        <Box name="NaoLibrary-Encapsulation_ref" robot="" id="2" tooltip="# NaoLibrary-Encapsulation&#x0A;#  v 1.0&#x0A;&#x0A;This box encapsulate any box, so that it transforms it in a regular call, with params in, intermediary out and results out." bitmap_expanded="1" plugin="" x="155" y="46">
                            <bitmap>media/images/box/icons_appu/gear.png</bitmap>
                            <bitmap>media/images/box/icons_appu/shortcut.png</bitmap>
                            <script language="4">
                                <content>
                                    <![CDATA[# NaoLibrary-Encapsulation
# v 1.0
import naolibrary
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.BIND_PYTHON( self.getName(),"callback_output_on_intermediary" );
        self.BIND_PYTHON( self.getName(),"callback_output_on_results" );
        self.BIND_PYTHON( self.getName(),"callback_soft_cancel" );        

    def onLoad(self):
        self.bIsRunning = False;

    def onUnload(self):
        self.onInput_onStop(); # stop current loop execution

    def onInput_onStart(self):
        self.log( self.boxName + ": start - begin" );
        
        if( self.bIsRunning ):
            self.log( self.boxName + ": already started => nothing" );
            return;
            
        # wait the soft cancel
        self.bIsRunning = True;
        
        # get params from outside
        strBehaviorName = ALFrameManager.getBehaviorPath( self.behaviorId );
        try:
            params = ALMemory.getData( naolibrary.xarLoader.getVarName_Params( strBehaviorName ) );
            # erase them for next time
            ALMemory.insertData( naolibrary.xarLoader.getVarName_Params( strBehaviorName ), [] );
        except:
            params = [];
        strOutput = '%s: strBehaviorName: %s, params received: %s' % ( self.getName(), strBehaviorName, str( params ) );
        print( strOutput );        
        self.log( strOutput );
        
        # TODO, BUG a venir: ici il faudrait effacer les paramètres précédemment ajouté par la boite, avec une méthode du genre delParameter
        # car sinon si on écrase les parametres par défaut, tant qu'on ne recharge pas ce comportement, 
        # un appel sans parametre, va utiliser les dernier envoyés... C'est moche.
        i = 0;
        for elem in params:
            self.addParameter( elem[0], elem[1], False );
            i += 1;        
            
        # install hook
        strBehaviorName = ALFrameManager.getBehaviorPath( self.behaviorId );        
        ALMemory.subscribeToMicroEvent( self.getName() + "__output_on_intermediary", self.getName(), "", "callback_output_on_intermediary" );
        ALMemory.subscribeToMicroEvent( self.getName() + "__output_on_results", self.getName(), "", "callback_output_on_results" );
        ALMemory.subscribeToMicroEvent( naolibrary.xarLoader.getVarName_SoftCancel( strBehaviorName ), self.getName(), "", "callback_soft_cancel" );        
        
        # launch the box
        self.gotoAndPlay( 0 );
        self.log( "goto and play" );
        self.log( self.boxName + ": start - end" );
    # onInput_onStart - end

    def onInput_onStop(self):
        if( self.bIsRunning ):
            strBehaviorName = ALFrameManager.getBehaviorPath( self.behaviorId );        
            self.log( '%s: strBehaviorName: %s, stopping...' % ( self.getName(), strBehaviorName, ) );        
            ALMemory.insertData( naolibrary.xarLoader.getVarName_Cancel( strBehaviorName ), True );
            self.onFinished();
            
    def onFinished(self):
        if( self.bIsRunning ):
            strBehaviorName = ALFrameManager.getBehaviorPath( self.behaviorId );        
            self.log( '%s: strBehaviorName: %s, finishing...' % ( self.getName(), strBehaviorName, ) );
            self.bIsRunning = False;
            ALMemory.unsubscribeToMicroEvent( self.getName() + "__output_on_intermediary", self.getName() );
            ALMemory.unsubscribeToMicroEvent( self.getName() + "__output_on_results", self.getName() );
            ALMemory.unsubscribeToMicroEvent( naolibrary.xarLoader.getVarName_SoftCancel( strBehaviorName ), self.getName() );            
            self.gotoAndStop( -1 );                    
        
        
    def callback_output_on_intermediary(self, pDataName, pValue, pMessage):
        "We got there when user activate the intermediary output"
        strBehaviorName = ALFrameManager.getBehaviorPath( self.behaviorId );
        self.log( '%s: strBehaviorName: %s, returning intermediary: %s' % ( self.getName(), strBehaviorName, str( pValue ) ) );        
        ALMemory.insertData( naolibrary.xarLoader.getVarName_Intermediary( strBehaviorName ), pValue );
        
    def callback_output_on_results(self, pDataName, pValue, pMessage):
        "We got there when user activate the results output"
        strBehaviorName = ALFrameManager.getBehaviorPath( self.behaviorId );
        self.log( '%s: strBehaviorName: %s, returning results: %s' % ( self.getName(), strBehaviorName, str( pValue ) ) );
        ALMemory.insertData( naolibrary.xarLoader.getVarName_Results( strBehaviorName ), pValue );
        # stop the box
        self.onFinished();
        
    def callback_soft_cancel(self, pDataName, pValue, pMessage):
        strBehaviorName = ALFrameManager.getBehaviorPath( self.behaviorId );    
        self.log( '%s: strBehaviorName: %s, soft cancel received: %s' % ( self.getName(), strBehaviorName, str( pValue ) ) );           
        ALMemory.insertData( naolibrary.xarLoader.getVarName_Cancel( strBehaviorName ), True );
        # stop the box
        self.onFinished();
        
# NaoLibrary-Encapsulation - end
pass]]>
</content>
                            </script>
                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                            <Output name="output_on_intermediary" type="0" type_size="1" nature="2" inner="0" tooltip="post there your intermediary results" id="4" />
                            <Output name="output_on_results" type="0" type_size="1" nature="2" inner="0" tooltip="post there your final results" id="5" />
                            <Timeline fps="10" resources_acquisition="0" size="300" enable="0" start_frame="0" end_frame="-1" scale="10">
                                <watches />
                                <BehaviorLayer name="behavior_layer1" mute="0">
                                    <BehaviorKeyframe name="keyframe1" index="1" bitmap="">
                                        <Diagram scale="-1">
                                            <Box name="Sit Down" robot="" id="2" tooltip="Nao sits down, from any position!" bitmap_expanded="1" plugin="" x="97" y="42">
                                                <bitmap>media/images/box/movement/sit_ground.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        self.count = 0
        pass

    def onInput_onStop(self):
        self.onUnload()
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                <Output name="succeed" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Nao reach to sit down." id="4" />
                                                <Output name="failed" type="1" type_size="1" nature="1" inner="0" tooltip='Nao failed to sit down after n tries. &#x0A;&#x0A;Note : the number of tries is defined in the parameter &quot;Maximum of tries&quot;' id="5" />
                                                <Output name="impossible" type="1" type_size="1" nature="1" inner="0" tooltip='The actual pose of Nao is not good to perform a stand up motion. &#x0A;&#x0A;Note : the not good pose could be &quot;Head Back&quot; or &quot;Unknown&quot;' id="6" />
                                                <Parameter name="Maximum of tries" inherits_from_parent="1" content_type="1" value="3" default_value="3" min="0" max="10" tooltip='This option define the maximum of stand up motion tries by Nao before thr output &quot;failed&quot; is stimulated.' id="7" />
                                                <Timeline fps="10" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                    <watches />
                                                    <BehaviorLayer name="SitDownBehavior" mute="0">
                                                        <BehaviorKeyframe name="DetectRobotPose" index="1" bitmap="">
                                                            <Diagram scale="85">
                                                                <Box name="FromStand" robot="" id="2" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="877" y="284">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="FromStand" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Box name="get Robot Pose" robot="" id="5" tooltip='Return the actual robot Pose.&#x0A;The output value can be :&#x0A;&quot;Unknown&quot;, &quot;Stand&quot;,  &quot;Sit&quot;, &quot;Crouch&quot;, &quot;Knee&quot;, &quot;Frog&quot;, &quot;Back&quot;, &quot;Belly&quot;, &quot;Left&quot;, &quot;Right&quot;, &quot;HeadBack&quot;.' bitmap_expanded="1" plugin="" x="280" y="247">
                                                                    <bitmap>media/images/box/sensors/inertial_unit.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.robotPoseProxy = ALProxy("ALRobotPose")
        self.running = False
        self.threadTime = 0.1 #seconds

    def onLoad(self):
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        self.running = True
        while(self.running):
            RobotPoseAndTime = self.robotPoseProxy.getActualPoseAndTime()
            if(RobotPoseAndTime[1] > 0.5):
                self.RobotPose(RobotPoseAndTime[0])
                self.running = False
            time.sleep(self.threadTime)
        pass

    def onInput_onStop(self):
        self.onUnload()
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Input name="robotPoseChanged" type="0" type_size="1" nature="4" stm_value_name="robotPoseChanged" inner="1" tooltip="Connected to ALMemory. Will be stimulated every time the value subscribed to changes, respecting the refresh period." id="4" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="5" />
                                                                    <Output name="RobotPose" type="3" type_size="1" nature="2" inner="0" tooltip='Stimulated with the string containing the current pose: &quot;Unknown&quot;, &quot;Stand&quot;,  &quot;Sit&quot;, &quot;Crouch&quot;, &quot;Knee&quot;, &quot;Frog&quot;, &quot;Back&quot;, &quot;Belly&quot;, &quot;Left&quot;, &quot;Right&quot;, &quot;HeadBack&quot;.' id="6" />
                                                                </Box>
                                                                <Box name="Dispatcher" robot="" id="1" tooltip="Dispatch an event carrying an information, depending on the information value. The information will be tested against all the values of the table, and the matching output will be stimulated!" bitmap_expanded="1" plugin="dispatcher_plugin" x="416" y="213">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onInput_onStart(self, p):
		if(p == ("Sit")):
			self.output_1(p)
		elif(p == ("Unknown")):
			self.output_2(p)
		elif(p == ("HeadBack")):
			self.output_3(p)
		elif(p == ("Stand")):
			self.output_4(p)
		elif(p == ("Crouch")):
			self.output_5(p)
		elif(p == ("Knee")):
			self.output_6(p)
		elif(p == ("Frog")):
			self.output_7(p)
		elif(p == ("Belly")):
			self.output_8(p)
		elif(p == ("Back")):
			self.output_9(p)
		elif(p == ("Left")):
			self.output_10(p)
		elif(p == ("Right")):
			self.output_11(p)
		else:
			self.onDefault()]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <keywords>
                                                                            <keyword>&quot;Sit&quot;</keyword>
                                                                            <keyword>&quot;Unknown&quot;</keyword>
                                                                            <keyword>&quot;HeadBack&quot;</keyword>
                                                                            <keyword>&quot;Stand&quot;</keyword>
                                                                            <keyword>&quot;Crouch&quot;</keyword>
                                                                            <keyword>&quot;Knee&quot;</keyword>
                                                                            <keyword>&quot;Frog&quot;</keyword>
                                                                            <keyword>&quot;Belly&quot;</keyword>
                                                                            <keyword>&quot;Back&quot;</keyword>
                                                                            <keyword>&quot;Left&quot;</keyword>
                                                                            <keyword>&quot;Right&quot;</keyword>
                                                                        </keywords>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Output name="onDefault" type="1" type_size="1" nature="2" inner="0" tooltip="If nothing has been matched in dispatcher." id="3" />
                                                                    <Output name="output_1" type="0" type_size="1" nature="2" inner="0" tooltip="" id="4" />
                                                                    <Output name="output_2" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="5" />
                                                                    <Output name="output_3" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="6" />
                                                                    <Output name="output_4" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="7" />
                                                                    <Output name="output_5" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="8" />
                                                                    <Output name="output_6" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="9" />
                                                                    <Output name="output_7" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="10" />
                                                                    <Output name="output_8" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="11" />
                                                                    <Output name="output_9" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="12" />
                                                                    <Output name="output_10" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="13" />
                                                                    <Output name="output_11" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="14" />
                                                                </Box>
                                                                <Box name="FromBelly" robot="" id="4" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="799" y="381">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="FromBelly" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Box name="FromBack" robot="" id="6" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="722" y="447">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="FromBack" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Box name="FromSide" robot="" id="7" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="634" y="503">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="FromSide" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Box name="Check Count" robot="" id="9" tooltip='Check the parent variable self.count to know if Nao have to try to stand up (again) or has try to much time and stimultated output &quot;failed&quot;' bitmap_expanded="1" plugin="" x="127" y="166">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.parent = globals()[self.parentBoxName]
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        self.log(self.parent.count)
        if (self.parent.count > self.getParameter("Maximum of tries")):
            self.failed()
        else:
            self.tryAgain()
        pass

    def onInput_onStop(self):
        self.onUnload()
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="failed" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when stand behavior have failed." id="4" />
                                                                    <Output name="tryAgain" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent when stand behavior have to try again a motion." id="5" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="5" indexofoutput="6" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="7" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="4" indexofinput="2" outputowner="1" indexofoutput="9" />
                                                                <Link inputowner="4" indexofinput="2" outputowner="1" indexofoutput="10" />
                                                                <Link inputowner="4" indexofinput="2" outputowner="1" indexofoutput="11" />
                                                                <Link inputowner="6" indexofinput="2" outputowner="1" indexofoutput="12" />
                                                                <Link inputowner="7" indexofinput="2" outputowner="1" indexofoutput="13" />
                                                                <Link inputowner="0" indexofinput="6" outputowner="1" indexofoutput="5" />
                                                                <Link inputowner="0" indexofinput="6" outputowner="1" indexofoutput="6" />
                                                                <Link inputowner="0" indexofinput="5" outputowner="9" indexofoutput="4" />
                                                                <Link inputowner="9" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="5" indexofinput="2" outputowner="9" indexofoutput="5" />
                                                                <Link inputowner="7" indexofinput="2" outputowner="1" indexofoutput="14" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="1" indexofoutput="8" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="FromStand" index="16" bitmap="">
                                                            <Diagram scale="96">
                                                                <Box name="Stiffness" robot="" id="1" tooltip="When onStart is stimulated, the stiffness of the selected parts (see parameters) is set to the Max stiffness value that may be set in the parameters.&#x0A;When onStop is stimulated, it uses the Min stiffness value.&#x0A;&#x0A;Note: you can also set the duration of the transition." bitmap_expanded="1" plugin="" x="171" y="99">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def setStiffness(self, stiffness):
        duration = self.getParameter("Duration")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)

    def onInput_onStart(self):
        self.setStiffness(self.getParameter("Max stiffness"))
        self.onStopped() #~ activate output of the box

    def onInput_onStop(self):
        self.setStiffness(self.getParameter("Min stiffness"))
        self.onStopped() #~ activate output of the box]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="Min stiffness" inherits_from_parent="0" content_type="2" value="0" default_value="0" min="0" max="1" tooltip="What stiffness do we want to set when onStop is stimulated." id="5" />
                                                                    <Parameter name="Max stiffness" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0" max="1" tooltip="What stiffness do we want to set when onStart is stimulated." id="6" />
                                                                    <Parameter name="Duration" inherits_from_parent="0" content_type="2" value="0.02" default_value="1" min="0.02" max="10" tooltip="How much time to we leave the robot to go to the correct stiffness. (in seconds)" id="7" />
                                                                    <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="8" />
                                                                    <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="9" />
                                                                    <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="10" />
                                                                    <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="11" />
                                                                    <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="12" />
                                                                </Box>
                                                                <Box name="DetectRobotPose" robot="" id="3" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="641" y="220">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="DetectRobotPose" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Box name="Increase Count" robot="" id="2" tooltip="this box increase the gloabl count of stand Up tries" bitmap_expanded="1" plugin="" x="490" y="181">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.parent = globals()[self.parentBoxName]
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        self.parent.count = self.parent.count + 1
        self.onStopped()
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="FromStand" robot="" id="8" tooltip="Sit down from posInit" bitmap_expanded="1" plugin="" x="334" y="151">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Timeline fps="10" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                                        <watches />
                                                                        <ActuatorList>
                                                                            <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-18.1081" />
                                                                                <Key frame="24" value="-25.2273" />
                                                                                <Key frame="34" value="-36.3017" />
                                                                                <Key frame="43" value="-35.9501" />
                                                                                <Key frame="52" value="-23.4695" />
                                                                                <Key frame="59" value="-10.5494" />
                                                                                <Key frame="66" value="-0.00240423" />
                                                                                <Key frame="72" value="-0.178188" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="21.2674" />
                                                                                <Key frame="24" value="21.5311" />
                                                                                <Key frame="34" value="21.0916" />
                                                                                <Key frame="43" value="20.4764" />
                                                                                <Key frame="52" value="21.0916" />
                                                                                <Key frame="59" value="21.0037" />
                                                                                <Key frame="66" value="21.7069" />
                                                                                <Key frame="72" value="20.9158" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="75.145" />
                                                                                <Key frame="24" value="48.7775" />
                                                                                <Key frame="34" value="57.9182" />
                                                                                <Key frame="43" value="86.2194" />
                                                                                <Key frame="52" value="116.542" />
                                                                                <Key frame="59" value="75.8482" />
                                                                                <Key frame="66" value="47.547" />
                                                                                <Key frame="72" value="54.7541" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="19.2459" />
                                                                                <Key frame="24" value="30.6718" />
                                                                                <Key frame="34" value="27.6" />
                                                                                <Key frame="43" value="48" />
                                                                                <Key frame="52" value="7.20472" />
                                                                                <Key frame="59" value="89.2" />
                                                                                <Key frame="66" value="32.6054" />
                                                                                <Key frame="72" value="13.2692" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-32.2587" />
                                                                                <Key frame="24" value="-4.9" />
                                                                                <Key frame="34" value="6.06212" />
                                                                                <Key frame="43" value="-89" />
                                                                                <Key frame="52" value="-18.8991" />
                                                                                <Key frame="59" value="-80.5112" />
                                                                                <Key frame="66" value="-43.5967" />
                                                                                <Key frame="72" value="-31.204" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-54.9299" />
                                                                                <Key frame="24" value="-68.9" />
                                                                                <Key frame="34" value="-40" />
                                                                                <Key frame="43" value="-51.7" />
                                                                                <Key frame="52" value="-1.57965" />
                                                                                <Key frame="59" value="-84.11" />
                                                                                <Key frame="66" value="-75.7603" />
                                                                                <Key frame="72" value="-73.6509" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="5.00742" />
                                                                                <Key frame="24" value="-41.0478" />
                                                                                <Key frame="34" value="-41.0478" />
                                                                                <Key frame="43" value="-41.0478" />
                                                                                <Key frame="52" value="-41.751" />
                                                                                <Key frame="59" value="-41.8389" />
                                                                                <Key frame="66" value="-41.3994" />
                                                                                <Key frame="72" value="-41.2236" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="12.7414" />
                                                                                <Key frame="24" value="3.68145" />
                                                                                <Key frame="34" value="3.66145" />
                                                                                <Key frame="43" value="3.66145" />
                                                                                <Key frame="52" value="4.02144" />
                                                                                <Key frame="59" value="3.82145" />
                                                                                <Key frame="66" value="3.34145" />
                                                                                <Key frame="72" value="3.32145" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="56.341" />
                                                                                <Key frame="24" value="34" />
                                                                                <Key frame="34" value="99.9353" />
                                                                                <Key frame="43" value="119" />
                                                                                <Key frame="52" value="119.496" />
                                                                                <Key frame="59" value="108.197" />
                                                                                <Key frame="66" value="55.1984" />
                                                                                <Key frame="72" value="55.1105" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-32.5223" />
                                                                                <Key frame="24" value="-53.3" />
                                                                                <Key frame="34" value="-18.0202" />
                                                                                <Key frame="43" value="-30.1" />
                                                                                <Key frame="52" value="-9.5826" />
                                                                                <Key frame="59" value="-89.2" />
                                                                                <Key frame="66" value="-31.4676" />
                                                                                <Key frame="72" value="-12.6588" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-0.529755" />
                                                                                <Key frame="24" value="0.261271" />
                                                                                <Key frame="34" value="-3.95753" />
                                                                                <Key frame="43" value="-8.44001" />
                                                                                <Key frame="52" value="-4.66067" />
                                                                                <Key frame="59" value="100.37" />
                                                                                <Key frame="66" value="64.598" />
                                                                                <Key frame="72" value="32.3418" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="31.8192" />
                                                                                <Key frame="24" value="27.4246" />
                                                                                <Key frame="34" value="4.48488" />
                                                                                <Key frame="43" value="5.80326" />
                                                                                <Key frame="52" value="1.76024" />
                                                                                <Key frame="59" value="59.5051" />
                                                                                <Key frame="66" value="74.0951" />
                                                                                <Key frame="72" value="67.7669" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="10.8083" />
                                                                                <Key frame="24" value="60.4671" />
                                                                                <Key frame="34" value="60.2913" />
                                                                                <Key frame="43" value="59.764" />
                                                                                <Key frame="52" value="59.764" />
                                                                                <Key frame="59" value="60.0276" />
                                                                                <Key frame="66" value="60.8187" />
                                                                                <Key frame="72" value="60.8187" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="22.3414" />
                                                                                <Key frame="24" value="4.70144" />
                                                                                <Key frame="34" value="4.86144" />
                                                                                <Key frame="43" value="5.68144" />
                                                                                <Key frame="52" value="6.48144" />
                                                                                <Key frame="59" value="6.32143" />
                                                                                <Key frame="66" value="6.66143" />
                                                                                <Key frame="72" value="4.38144" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-22.7616" />
                                                                                <Key frame="24" value="-24.2557" />
                                                                                <Key frame="34" value="-52.0295" />
                                                                                <Key frame="43" value="-33.5722" />
                                                                                <Key frame="52" value="-30.9355" />
                                                                                <Key frame="59" value="-45.4376" />
                                                                                <Key frame="66" value="-44.5587" />
                                                                                <Key frame="72" value="-41.4825" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="10.4615" />
                                                                                <Key frame="24" value="18" />
                                                                                <Key frame="34" value="-15.0271" />
                                                                                <Key frame="43" value="16.7897" />
                                                                                <Key frame="52" value="30.325" />
                                                                                <Key frame="59" value="13.3619" />
                                                                                <Key frame="66" value="20.4812" />
                                                                                <Key frame="72" value="15.9987" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-33.8359" />
                                                                                <Key frame="24" value="-49.8322" />
                                                                                <Key frame="34" value="-0.524946" />
                                                                                <Key frame="43" value="-35.5937" />
                                                                                <Key frame="52" value="-89.0319" />
                                                                                <Key frame="59" value="-91.3171" />
                                                                                <Key frame="66" value="-83.9342" />
                                                                                <Key frame="72" value="-91.6687" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="121.039" />
                                                                                <Key frame="24" value="121.039" />
                                                                                <Key frame="34" value="104.149" />
                                                                                <Key frame="43" value="113.554" />
                                                                                <Key frame="52" value="89.9108" />
                                                                                <Key frame="59" value="66.3558" />
                                                                                <Key frame="66" value="62.3128" />
                                                                                <Key frame="72" value="78.4849" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-68.1542" />
                                                                                <Key frame="24" value="-68.1542" />
                                                                                <Key frame="34" value="-68.1542" />
                                                                                <Key frame="43" value="-29.9735" />
                                                                                <Key frame="52" value="42.3614" />
                                                                                <Key frame="59" value="52.8695" />
                                                                                <Key frame="66" value="52.8205" />
                                                                                <Key frame="72" value="50.4474" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="2.46337" />
                                                                                <Key frame="24" value="4.57277" />
                                                                                <Key frame="34" value="2.37548" />
                                                                                <Key frame="43" value="-26.0135" />
                                                                                <Key frame="52" value="-10.3688" />
                                                                                <Key frame="59" value="-2.72224" />
                                                                                <Key frame="66" value="-2.89802" />
                                                                                <Key frame="72" value="-1.93121" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-7.90785" />
                                                                                <Key frame="24" value="-14.6755" />
                                                                                <Key frame="34" value="-21.7947" />
                                                                                <Key frame="43" value="-32.957" />
                                                                                <Key frame="52" value="-30.6718" />
                                                                                <Key frame="59" value="-12.3024" />
                                                                                <Key frame="66" value="-18.4549" />
                                                                                <Key frame="72" value="-12.9177" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-43.8604" />
                                                                                <Key frame="24" value="-49.2218" />
                                                                                <Key frame="34" value="-78.226" />
                                                                                <Key frame="43" value="-94.5739" />
                                                                                <Key frame="52" value="-88.3336" />
                                                                                <Key frame="59" value="-92.2008" />
                                                                                <Key frame="66" value="-81.2144" />
                                                                                <Key frame="72" value="-91.6735" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="108.461" />
                                                                                <Key frame="24" value="44.3877" />
                                                                                <Key frame="34" value="65.4817" />
                                                                                <Key frame="43" value="65.6575" />
                                                                                <Key frame="52" value="91.4977" />
                                                                                <Key frame="59" value="68.6458" />
                                                                                <Key frame="66" value="56.1652" />
                                                                                <Key frame="72" value="76.8198" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="-41.8341" />
                                                                                <Key frame="24" value="19.1628" />
                                                                                <Key frame="34" value="26.1941" />
                                                                                <Key frame="43" value="44.2119" />
                                                                                <Key frame="52" value="40.8721" />
                                                                                <Key frame="59" value="53.4029" />
                                                                                <Key frame="66" value="53.4029" />
                                                                                <Key frame="72" value="51.3312" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="13" value="12.0436" />
                                                                                <Key frame="24" value="29.0067" />
                                                                                <Key frame="34" value="3.34229" />
                                                                                <Key frame="43" value="-3.1617" />
                                                                                <Key frame="52" value="10.8131" />
                                                                                <Key frame="59" value="2.02391" />
                                                                                <Key frame="66" value="2.72705" />
                                                                                <Key frame="72" value="-0.788621" />
                                                                            </ActuatorCurve>
                                                                        </ActuatorList>
                                                                    </Timeline>
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="3" indexofinput="2" outputowner="2" indexofoutput="4" />
                                                                <Link inputowner="8" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="8" indexofoutput="4" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="FromBelly" index="28" bitmap="">
                                                            <Diagram scale="96">
                                                                <Box name="Stiffness" robot="" id="1" tooltip="When onStart is stimulated, the stiffness of the selected parts (see parameters) is set to the Max stiffness value that may be set in the parameters.&#x0A;When onStop is stimulated, it uses the Min stiffness value.&#x0A;&#x0A;Note: you can also set the duration of the transition." bitmap_expanded="1" plugin="" x="194" y="86">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def setStiffness(self, stiffness):
        duration = self.getParameter("Duration")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)

    def onInput_onStart(self):
        self.setStiffness(self.getParameter("Max stiffness"))
        self.onStopped() #~ activate output of the box

    def onInput_onStop(self):
        self.setStiffness(self.getParameter("Min stiffness"))
        self.onStopped() #~ activate output of the box]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="Min stiffness" inherits_from_parent="0" content_type="2" value="0" default_value="0" min="0" max="1" tooltip="What stiffness do we want to set when onStop is stimulated." id="5" />
                                                                    <Parameter name="Max stiffness" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0" max="1" tooltip="What stiffness do we want to set when onStart is stimulated." id="6" />
                                                                    <Parameter name="Duration" inherits_from_parent="0" content_type="2" value="0.02" default_value="1" min="0.02" max="10" tooltip="How much time to we leave the robot to go to the correct stiffness. (in seconds)" id="7" />
                                                                    <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="8" />
                                                                    <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="9" />
                                                                    <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="10" />
                                                                    <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="11" />
                                                                    <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="12" />
                                                                </Box>
                                                                <Box name="FromBelly" robot="" id="3" tooltip="First motion to Stand up from the belly" bitmap_expanded="1" plugin="" x="365" y="117">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Timeline fps="10" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                                        <watches />
                                                                        <BehaviorLayer name="behavior_layer1" mute="0">
                                                                            <BehaviorKeyframe name="keyframe19" index="19" bitmap="">
                                                                                <Diagram scale="-1" />
                                                                            </BehaviorKeyframe>
                                                                        </BehaviorLayer>
                                                                        <ActuatorList>
                                                                            <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="10" />
                                                                                <Key frame="20" value="-13" />
                                                                                <Key frame="34" value="16.4" />
                                                                                <Key frame="45" value="17" />
                                                                                <Key frame="58" value="-28.4" />
                                                                                <Key frame="65" value="-17" />
                                                                                <Key frame="76" value="3" />
                                                                                <Key frame="89" value="-22.4" />
                                                                                <Key frame="100" value="-1" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-33.0497" />
                                                                                <Key frame="20" value="-31.3797" />
                                                                                <Key frame="34" value="6.15002" />
                                                                                <Key frame="45" value="29.5" />
                                                                                <Key frame="58" value="21.8" />
                                                                                <Key frame="65" value="21.2674" />
                                                                                <Key frame="76" value="-6" />
                                                                                <Key frame="89" value="-30.5887" />
                                                                                <Key frame="100" value="0.4" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="4.83164" />
                                                                                <Key frame="20" value="-86.6" />
                                                                                <Key frame="34" value="-71.6342" />
                                                                                <Key frame="45" value="4.12851" />
                                                                                <Key frame="58" value="73" />
                                                                                <Key frame="65" value="43.3" />
                                                                                <Key frame="76" value="43" />
                                                                                <Key frame="89" value="74" />
                                                                                <Key frame="100" value="86.9225" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="89.0319" />
                                                                                <Key frame="20" value="0.964405" />
                                                                                <Key frame="34" value="4.39218" />
                                                                                <Key frame="45" value="4.04062" />
                                                                                <Key frame="58" value="8.96255" />
                                                                                <Key frame="65" value="53.8" />
                                                                                <Key frame="76" value="38.8" />
                                                                                <Key frame="89" value="48.5" />
                                                                                <Key frame="100" value="4.83164" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-119" />
                                                                                <Key frame="20" value="-90.5309" />
                                                                                <Key frame="34" value="-91.9371" />
                                                                                <Key frame="45" value="-102.396" />
                                                                                <Key frame="58" value="-76.0287" />
                                                                                <Key frame="65" value="-71.5" />
                                                                                <Key frame="76" value="-55.7258" />
                                                                                <Key frame="89" value="-55" />
                                                                                <Key frame="100" value="-51.6827" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-0.5" />
                                                                                <Key frame="20" value="-20.2127" />
                                                                                <Key frame="34" value="-36.5606" />
                                                                                <Key frame="45" value="-48.7775" />
                                                                                <Key frame="58" value="-88.8561" />
                                                                                <Key frame="65" value="-42" />
                                                                                <Key frame="76" value="-42.2" />
                                                                                <Key frame="89" value="-66.1801" />
                                                                                <Key frame="100" value="-63.016" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-88.8609" />
                                                                                <Key frame="20" value="-88.8609" />
                                                                                <Key frame="34" value="-86.9273" />
                                                                                <Key frame="45" value="-82.9722" />
                                                                                <Key frame="58" value="-80.5112" />
                                                                                <Key frame="65" value="-80.687" />
                                                                                <Key frame="76" value="-80.687" />
                                                                                <Key frame="89" value="-31.2" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="3.22145" />
                                                                                <Key frame="20" value="1.08145" />
                                                                                <Key frame="34" value="2.24145" />
                                                                                <Key frame="45" value="3.00145" />
                                                                                <Key frame="58" value="3.16145" />
                                                                                <Key frame="65" value="3.16145" />
                                                                                <Key frame="76" value="3.02145" />
                                                                                <Key frame="89" value="3.16145" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-1.57965" />
                                                                                <Key frame="20" value="-86.6" />
                                                                                <Key frame="34" value="-70.0473" />
                                                                                <Key frame="45" value="-13.5329" />
                                                                                <Key frame="58" value="12.483" />
                                                                                <Key frame="65" value="25.7547" />
                                                                                <Key frame="76" value="52.3859" />
                                                                                <Key frame="89" value="55.0226" />
                                                                                <Key frame="100" value="77.5229" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-87.982" />
                                                                                <Key frame="20" value="-11" />
                                                                                <Key frame="34" value="-4.74856" />
                                                                                <Key frame="45" value="-4.74856" />
                                                                                <Key frame="58" value="-13.0104" />
                                                                                <Key frame="65" value="-10.4615" />
                                                                                <Key frame="76" value="-0.498473" />
                                                                                <Key frame="89" value="-7.56109" />
                                                                                <Key frame="100" value="-0.79343" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="119" />
                                                                                <Key frame="20" value="89.4714" />
                                                                                <Key frame="34" value="92.4597" />
                                                                                <Key frame="45" value="96.5906" />
                                                                                <Key frame="58" value="112.323" />
                                                                                <Key frame="65" value="111.796" />
                                                                                <Key frame="76" value="38.1426" />
                                                                                <Key frame="89" value="22.6737" />
                                                                                <Key frame="100" value="49.6564" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="6" />
                                                                                <Key frame="20" value="21.8874" />
                                                                                <Key frame="34" value="36.3896" />
                                                                                <Key frame="45" value="89.2125" />
                                                                                <Key frame="58" value="0.498473" />
                                                                                <Key frame="65" value="0.498473" />
                                                                                <Key frame="76" value="24.2605" />
                                                                                <Key frame="89" value="37.2" />
                                                                                <Key frame="100" value="47.8155" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="86.4831" />
                                                                                <Key frame="20" value="86.4831" />
                                                                                <Key frame="34" value="85.7799" />
                                                                                <Key frame="45" value="81.8248" />
                                                                                <Key frame="58" value="82.2643" />
                                                                                <Key frame="65" value="82.5279" />
                                                                                <Key frame="76" value="82.7037" />
                                                                                <Key frame="89" value="82.5279" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="1.02145" />
                                                                                <Key frame="20" value="0.701454" />
                                                                                <Key frame="34" value="1.44145" />
                                                                                <Key frame="45" value="2.58145" />
                                                                                <Key frame="58" value="2.72145" />
                                                                                <Key frame="65" value="2.66145" />
                                                                                <Key frame="76" value="2.60145" />
                                                                                <Key frame="89" value="2.66145" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-1.93121" />
                                                                                <Key frame="20" value="2" />
                                                                                <Key frame="34" value="-24.9588" />
                                                                                <Key frame="45" value="-44.6466" />
                                                                                <Key frame="58" value="-59.6761" />
                                                                                <Key frame="65" value="-65.621" />
                                                                                <Key frame="76" value="-65.621" />
                                                                                <Key frame="89" value="-32.5175" />
                                                                                <Key frame="100" value="0" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="3.60596" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="34" value="0.090296" />
                                                                                <Key frame="45" value="-21.619" />
                                                                                <Key frame="58" value="-17.0486" />
                                                                                <Key frame="65" value="-17.0486" />
                                                                                <Key frame="76" value="11.1647" />
                                                                                <Key frame="89" value="7.29742" />
                                                                                <Key frame="100" value="-0.6" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="3.51807" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="34" value="-89.9108" />
                                                                                <Key frame="45" value="-73.3872" />
                                                                                <Key frame="58" value="-59.4124" />
                                                                                <Key frame="65" value="-66.4437" />
                                                                                <Key frame="76" value="-67.7621" />
                                                                                <Key frame="89" value="-72.7719" />
                                                                                <Key frame="100" value="-60" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="6.9" />
                                                                                <Key frame="20" value="114" />
                                                                                <Key frame="34" value="121.039" />
                                                                                <Key frame="45" value="16.1697" />
                                                                                <Key frame="58" value="23.201" />
                                                                                <Key frame="65" value="20.4764" />
                                                                                <Key frame="76" value="41.2188" />
                                                                                <Key frame="89" value="115.399" />
                                                                                <Key frame="100" value="120" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="52.8205" />
                                                                                <Key frame="20" value="-59" />
                                                                                <Key frame="34" value="-65.9212" />
                                                                                <Key frame="45" value="12.3903" />
                                                                                <Key frame="58" value="40.6915" />
                                                                                <Key frame="65" value="52.8695" />
                                                                                <Key frame="76" value="47.2833" />
                                                                                <Key frame="89" value="-28.743" />
                                                                                <Key frame="100" value="-60" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-0.0854875" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="34" value="-0.0854875" />
                                                                                <Key frame="45" value="-25.9257" />
                                                                                <Key frame="58" value="-17.2244" />
                                                                                <Key frame="65" value="-6.76526" />
                                                                                <Key frame="76" value="-2.37067" />
                                                                                <Key frame="89" value="-6.94104" />
                                                                                <Key frame="100" value="0" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="1.8" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="34" value="0.090296" />
                                                                                <Key frame="45" value="17.8444" />
                                                                                <Key frame="58" value="14.5924" />
                                                                                <Key frame="65" value="18.3718" />
                                                                                <Key frame="76" value="13.0104" />
                                                                                <Key frame="89" value="-4.30429" />
                                                                                <Key frame="100" value="0.6" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="4.39218" />
                                                                                <Key frame="20" value="-0.00240423" />
                                                                                <Key frame="34" value="-90.3551" />
                                                                                <Key frame="45" value="-95.1891" />
                                                                                <Key frame="58" value="-68.7337" />
                                                                                <Key frame="65" value="-91.5856" />
                                                                                <Key frame="76" value="-18.4597" />
                                                                                <Key frame="89" value="-40.6963" />
                                                                                <Key frame="100" value="-60" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-4.48007" />
                                                                                <Key frame="20" value="114" />
                                                                                <Key frame="34" value="119.535" />
                                                                                <Key frame="45" value="99.8474" />
                                                                                <Key frame="58" value="121.478" />
                                                                                <Key frame="65" value="121.478" />
                                                                                <Key frame="76" value="121.478" />
                                                                                <Key frame="89" value="121.478" />
                                                                                <Key frame="100" value="120" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="53.2648" />
                                                                                <Key frame="20" value="-59" />
                                                                                <Key frame="34" value="-65.2133" />
                                                                                <Key frame="45" value="-67.9785" />
                                                                                <Key frame="58" value="-67.9785" />
                                                                                <Key frame="65" value="-33.748" />
                                                                                <Key frame="76" value="-67.9785" />
                                                                                <Key frame="89" value="-67.9785" />
                                                                                <Key frame="100" value="-60" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="10.8" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="34" value="0.353971" />
                                                                                <Key frame="45" value="-0.261271" />
                                                                                <Key frame="58" value="-5.62267" />
                                                                                <Key frame="65" value="-0.788621" />
                                                                                <Key frame="76" value="-5.44688" />
                                                                                <Key frame="89" value="2.02391" />
                                                                                <Key frame="100" value="0" />
                                                                            </ActuatorCurve>
                                                                        </ActuatorList>
                                                                    </Timeline>
                                                                </Box>
                                                                <Box name="DetectRobotPose" robot="" id="2" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="674" y="182">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="DetectRobotPose" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Box name="Increase Count" robot="" id="4" tooltip="this box increase the gloabl count of stand Up tries" bitmap_expanded="1" plugin="" x="523" y="143">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.parent = globals()[self.parentBoxName]
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        self.parent.count = self.parent.count + 1
        self.onStopped()
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="3" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="4" indexofoutput="4" />
                                                                <Link inputowner="4" indexofinput="2" outputowner="3" indexofoutput="4" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="FromBack" index="40" bitmap="">
                                                            <Diagram scale="102">
                                                                <Box name="Stiffness" robot="" id="2" tooltip="When onStart is stimulated, the stiffness of the selected parts (see parameters) is set to the Max stiffness value that may be set in the parameters.&#x0A;When onStop is stimulated, it uses the Min stiffness value.&#x0A;&#x0A;Note: you can also set the duration of the transition." bitmap_expanded="1" plugin="" x="188" y="140">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def setStiffness(self, stiffness):
        duration = self.getParameter("Duration")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)

    def onInput_onStart(self):
        self.setStiffness(self.getParameter("Max stiffness"))
        self.onStopped() #~ activate output of the box

    def onInput_onStop(self):
        self.setStiffness(self.getParameter("Min stiffness"))
        self.onStopped() #~ activate output of the box]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="Min stiffness" inherits_from_parent="0" content_type="2" value="0" default_value="0" min="0" max="1" tooltip="What stiffness do we want to set when onStop is stimulated." id="5" />
                                                                    <Parameter name="Max stiffness" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0" max="1" tooltip="What stiffness do we want to set when onStart is stimulated." id="6" />
                                                                    <Parameter name="Duration" inherits_from_parent="0" content_type="2" value="0.02" default_value="1" min="0.02" max="10" tooltip="How much time to we leave the robot to go to the correct stiffness. (in seconds)" id="7" />
                                                                    <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="8" />
                                                                    <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="9" />
                                                                    <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="10" />
                                                                    <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="11" />
                                                                    <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="12" />
                                                                </Box>
                                                                <Box name="DetectRobotPose" robot="" id="3" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="669" y="233">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="DetectRobotPose" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Box name="Increase Count" robot="" id="1" tooltip="this box increase the gloabl count of stand Up tries" bitmap_expanded="1" plugin="" x="518" y="194">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.parent = globals()[self.parentBoxName]
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        self.parent.count = self.parent.count + 1
        self.onStopped()
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                </Box>
                                                                <Box name="FromBack" robot="" id="4" tooltip="First motion to Stand up from the back" bitmap_expanded="1" plugin="" x="343" y="165">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Timeline fps="10" resources_acquisition="1" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                                        <watches />
                                                                        <ActuatorList>
                                                                            <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-1.93602" />
                                                                                <Key frame="20" value="-1.32078" />
                                                                                <Key frame="28" value="-1.23289" />
                                                                                <Key frame="35" value="-0.353971" />
                                                                                <Key frame="41" value="0.788621" />
                                                                                <Key frame="47" value="1.40386" />
                                                                                <Key frame="53" value="0.0854875" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="5.97423" />
                                                                                <Key frame="20" value="5.09532" />
                                                                                <Key frame="28" value="-31.8192" />
                                                                                <Key frame="35" value="-1.23289" />
                                                                                <Key frame="41" value="11.1598" />
                                                                                <Key frame="47" value="4.2164" />
                                                                                <Key frame="53" value="14.3239" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="119.179" />
                                                                                <Key frame="20" value="117.069" />
                                                                                <Key frame="28" value="119.496" />
                                                                                <Key frame="35" value="116.19" />
                                                                                <Key frame="41" value="74.9692" />
                                                                                <Key frame="47" value="51.7658" />
                                                                                <Key frame="53" value="54.842" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="54.9299" />
                                                                                <Key frame="20" value="22.6737" />
                                                                                <Key frame="28" value="30.3202" />
                                                                                <Key frame="35" value="20.5643" />
                                                                                <Key frame="41" value="67.1469" />
                                                                                <Key frame="47" value="22.7616" />
                                                                                <Key frame="53" value="12.654" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-43.5967" />
                                                                                <Key frame="20" value="7.99574" />
                                                                                <Key frame="28" value="4.48007" />
                                                                                <Key frame="35" value="3.42537" />
                                                                                <Key frame="41" value="-54.6711" />
                                                                                <Key frame="47" value="-55.1984" />
                                                                                <Key frame="53" value="-35.5986" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-36.5606" />
                                                                                <Key frame="20" value="-0.612838" />
                                                                                <Key frame="28" value="-88.944" />
                                                                                <Key frame="35" value="-41.9219" />
                                                                                <Key frame="41" value="-38.9336" />
                                                                                <Key frame="47" value="-64.3343" />
                                                                                <Key frame="53" value="-63.4554" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-40.2568" />
                                                                                <Key frame="20" value="-40.2568" />
                                                                                <Key frame="28" value="-41.1357" />
                                                                                <Key frame="35" value="-41.2236" />
                                                                                <Key frame="41" value="-2.72705" />
                                                                                <Key frame="53" value="-38.0595" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="3.10145" />
                                                                                <Key frame="20" value="3.40145" />
                                                                                <Key frame="28" value="4.30144" />
                                                                                <Key frame="35" value="4.98144" />
                                                                                <Key frame="41" value="0.701454" />
                                                                                <Key frame="53" value="3.36145" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="119.496" />
                                                                                <Key frame="20" value="117.25" />
                                                                                <Key frame="28" value="119.496" />
                                                                                <Key frame="35" value="118.48" />
                                                                                <Key frame="41" value="109.955" />
                                                                                <Key frame="47" value="59.4172" />
                                                                                <Key frame="53" value="53.1769" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-60.0325" />
                                                                                <Key frame="20" value="-22.0632" />
                                                                                <Key frame="28" value="-30.9403" />
                                                                                <Key frame="35" value="-19.2507" />
                                                                                <Key frame="41" value="-51.507" />
                                                                                <Key frame="47" value="-42.4541" />
                                                                                <Key frame="53" value="-12.6588" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="43.9435" />
                                                                                <Key frame="20" value="-7.82477" />
                                                                                <Key frame="28" value="-4.92434" />
                                                                                <Key frame="35" value="-3.78175" />
                                                                                <Key frame="41" value="90.3503" />
                                                                                <Key frame="47" value="61.1702" />
                                                                                <Key frame="53" value="32.6054" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="39.7295" />
                                                                                <Key frame="20" value="0.881321" />
                                                                                <Key frame="28" value="88.6852" />
                                                                                <Key frame="35" value="42.6299" />
                                                                                <Key frame="41" value="54.8468" />
                                                                                <Key frame="47" value="65.6575" />
                                                                                <Key frame="53" value="62.1419" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="66.7953" />
                                                                                <Key frame="20" value="66.7074" />
                                                                                <Key frame="28" value="63.9828" />
                                                                                <Key frame="35" value="63.6312" />
                                                                                <Key frame="41" value="14.1482" />
                                                                                <Key frame="53" value="57.1272" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="0.161457" />
                                                                                <Key frame="20" value="0.161457" />
                                                                                <Key frame="28" value="0.161457" />
                                                                                <Key frame="35" value="0.161457" />
                                                                                <Key frame="41" value="6.96143" />
                                                                                <Key frame="53" value="7.08143" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-26.8925" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="28" value="-0.0854875" />
                                                                                <Key frame="35" value="-37.5274" />
                                                                                <Key frame="41" value="-40.34" />
                                                                                <Key frame="53" value="-46.8439" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="2.63916" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="28" value="0.00240423" />
                                                                                <Key frame="35" value="-3.68905" />
                                                                                <Key frame="41" value="8.06912" />
                                                                                <Key frame="53" value="12.1315" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="14.4166" />
                                                                                <Key frame="20" value="-9.84147" />
                                                                                <Key frame="28" value="-10.0173" />
                                                                                <Key frame="35" value="-67.4984" />
                                                                                <Key frame="41" value="-90" />
                                                                                <Key frame="53" value="-89.9108" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="5.35899" />
                                                                                <Key frame="20" value="96.1511" />
                                                                                <Key frame="28" value="95.8875" />
                                                                                <Key frame="35" value="61.6976" />
                                                                                <Key frame="41" value="80.3062" />
                                                                                <Key frame="53" value="78.7486" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="47.2833" />
                                                                                <Key frame="20" value="13.9724" />
                                                                                <Key frame="28" value="13.9724" />
                                                                                <Key frame="35" value="38.8457" />
                                                                                <Key frame="41" value="44.4668" />
                                                                                <Key frame="53" value="49.5685" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-1.93121" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="28" value="0.00240423" />
                                                                                <Key frame="35" value="9.75839" />
                                                                                <Key frame="41" value="5.20441" />
                                                                                <Key frame="53" value="2.28759" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="-8.52309" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="28" value="0.00240423" />
                                                                                <Key frame="35" value="3.51807" />
                                                                                <Key frame="41" value="-6.98985" />
                                                                                <Key frame="53" value="-10.8962" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="10.7204" />
                                                                                <Key frame="20" value="-10.0221" />
                                                                                <Key frame="28" value="-10.3736" />
                                                                                <Key frame="35" value="-66.7122" />
                                                                                <Key frame="41" value="-90" />
                                                                                <Key frame="53" value="-91.0582" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="10.9889" />
                                                                                <Key frame="20" value="96.0681" />
                                                                                <Key frame="28" value="95.8044" />
                                                                                <Key frame="35" value="62.7571" />
                                                                                <Key frame="41" value="78.8859" />
                                                                                <Key frame="53" value="81.7417" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="26.7215" />
                                                                                <Key frame="20" value="14.0651" />
                                                                                <Key frame="28" value="13.8014" />
                                                                                <Key frame="35" value="41.1357" />
                                                                                <Key frame="41" value="44.1094" />
                                                                                <Key frame="53" value="48.255" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="10" value="9.5826" />
                                                                                <Key frame="20" value="0.00240423" />
                                                                                <Key frame="28" value="0.00240423" />
                                                                                <Key frame="35" value="-8.25942" />
                                                                                <Key frame="41" value="-6.87076" />
                                                                                <Key frame="53" value="-3.42537" />
                                                                            </ActuatorCurve>
                                                                        </ActuatorList>
                                                                    </Timeline>
                                                                </Box>
                                                                <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="3" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="4" indexofinput="2" outputowner="2" indexofoutput="4" />
                                                                <Link inputowner="1" indexofinput="2" outputowner="4" indexofoutput="4" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                        <BehaviorKeyframe name="FromSide" index="52" bitmap="">
                                                            <Diagram scale="88">
                                                                <Box name="RotateSide" robot="" id="4" tooltip="try to finish lying on belly or back" bitmap_expanded="1" plugin="" x="339" y="300">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onUnload(self):
		#puts code for box cleanup here
		""

	def onInput_onStart(self):
		""

	def onInput_onStop(self):
		""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Timeline fps="10" resources_acquisition="0" size="300" enable="1" start_frame="0" end_frame="-1" scale="10">
                                                                        <watches />
                                                                        <ActuatorList>
                                                                            <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="41.3067" />
                                                                                <Key frame="10" value="41.3067" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="8.52309" />
                                                                                <Key frame="10" value="8.52309" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="108.72" />
                                                                                <Key frame="10" value="108.72" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="45.965" />
                                                                                <Key frame="10" value="45.965" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-56.8684" />
                                                                                <Key frame="10" value="-56.8684" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-26.8046" />
                                                                                <Key frame="10" value="-26.8046" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-38.8505" />
                                                                                <Key frame="10" value="-38.8505" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="11.0214" />
                                                                                <Key frame="10" value="11.0214" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="113.383" />
                                                                                <Key frame="10" value="113.383" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-44.6514" />
                                                                                <Key frame="10" value="-44.6514" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="52.9084" />
                                                                                <Key frame="10" value="52.9084" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="19.5144" />
                                                                                <Key frame="10" value="19.5144" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="37" />
                                                                                <Key frame="10" value="37" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="8.06143" />
                                                                                <Key frame="10" value="8.06143" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-65.5648" />
                                                                                <Key frame="10" value="-65.5648" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="14.4166" />
                                                                                <Key frame="10" value="14.4166" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="2.02391" />
                                                                                <Key frame="10" value="2.02391" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-5.27591" />
                                                                                <Key frame="10" value="-5.27591" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="20.3885" />
                                                                                <Key frame="10" value="20.3885" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="19.6902" />
                                                                                <Key frame="10" value="19.6902" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-1.75543" />
                                                                                <Key frame="10" value="-1.75543" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="23.8163" />
                                                                                <Key frame="10" value="23.8163" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-5.2711" />
                                                                                <Key frame="10" value="-5.2711" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="29.9735" />
                                                                                <Key frame="10" value="29.9735" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" alwaysVisible="0">
                                                                                <Key frame="5" value="-3.86483" />
                                                                                <Key frame="10" value="-3.86483" />
                                                                            </ActuatorCurve>
                                                                        </ActuatorList>
                                                                    </Timeline>
                                                                </Box>
                                                                <Box name="Stiffness" robot="" id="1" tooltip="When onStart is stimulated, the stiffness of the selected parts (see parameters) is set to the Max stiffness value that may be set in the parameters.&#x0A;When onStop is stimulated, it uses the Min stiffness value.&#x0A;&#x0A;Note: you can also set the duration of the transition." bitmap_expanded="1" plugin="" x="186" y="266">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def setStiffness(self, stiffness):
        duration = self.getParameter("Duration")
        if(self.getParameter("Head")):
            ALMotion.post.stiffnessInterpolation("Head", stiffness, duration)
        if(self.getParameter("Left arm")):
            ALMotion.post.stiffnessInterpolation("LArm", stiffness, duration)
        if(self.getParameter("Right arm")):
            ALMotion.post.stiffnessInterpolation("RArm", stiffness, duration)
        if(self.getParameter("Left leg")):
            ALMotion.post.stiffnessInterpolation("LLeg", stiffness, duration)
        if(self.getParameter("Right leg")):
            ALMotion.post.stiffnessInterpolation("RLeg", stiffness, duration)
        time.sleep(duration)

    def onInput_onStart(self):
        self.setStiffness(self.getParameter("Max stiffness"))
        self.onStopped() #~ activate output of the box

    def onInput_onStop(self):
        self.setStiffness(self.getParameter("Min stiffness"))
        self.onStopped() #~ activate output of the box]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Parameter name="Min stiffness" inherits_from_parent="0" content_type="2" value="0" default_value="0" min="0" max="1" tooltip="What stiffness do we want to set when onStop is stimulated." id="5" />
                                                                    <Parameter name="Max stiffness" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0" max="1" tooltip="What stiffness do we want to set when onStart is stimulated." id="6" />
                                                                    <Parameter name="Duration" inherits_from_parent="0" content_type="2" value="0.02" default_value="1" min="0.02" max="10" tooltip="How much time to we leave the robot to go to the correct stiffness. (in seconds)" id="7" />
                                                                    <Parameter name="Head" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the head stiffness?" id="8" />
                                                                    <Parameter name="Left arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left arm stiffness?" id="9" />
                                                                    <Parameter name="Right arm" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right arm stiffness?" id="10" />
                                                                    <Parameter name="Left leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the left leg stiffness?" id="11" />
                                                                    <Parameter name="Right leg" inherits_from_parent="0" content_type="0" value="1" default_value="1" tooltip="Do we want to modify the right leg stiffness?" id="12" />
                                                                </Box>
                                                                <Box name="get Robot Pose" robot="" id="5" tooltip='Return the actual robot Pose.&#x0A;The output value can be :&#x0A;&quot;Unknown&quot;, &quot;Stand&quot;,  &quot;Sit&quot;, &quot;Crouch&quot;, &quot;Knee&quot;, &quot;Frog&quot;, &quot;Back&quot;, &quot;Belly&quot;, &quot;Left&quot;, &quot;Right&quot;, &quot;HeadBack&quot;.' bitmap_expanded="1" plugin="" x="478" y="317">
                                                                    <bitmap>media/images/box/sensors/inertial_unit.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.robotPoseProxy = ALProxy("ALRobotPose")
        self.running = False
        self.threadTime = 0.1 #seconds

    def onLoad(self):
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        self.running = True
        while(self.running):
            RobotPoseAndTime = self.robotPoseProxy.getActualPoseAndTime()
            if(RobotPoseAndTime[1] > 0.5):
                self.log("prout")
                self.RobotPose(RobotPoseAndTime[0])
                self.running = False
            time.sleep(self.threadTime)
        pass

    def onInput_onStop(self):
        self.onUnload()
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Input name="robotPoseChanged" type="0" type_size="1" nature="4" stm_value_name="robotPoseChanged" inner="1" tooltip="Connected to ALMemory. Will be stimulated every time the value subscribed to changes, respecting the refresh period." id="4" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="5" />
                                                                    <Output name="RobotPose" type="3" type_size="1" nature="2" inner="0" tooltip='Stimulated with the string containing the current pose: &quot;Unknown&quot;, &quot;Stand&quot;,  &quot;Sit&quot;, &quot;Crouch&quot;, &quot;Knee&quot;, &quot;Frog&quot;, &quot;Back&quot;, &quot;Belly&quot;, &quot;Left&quot;, &quot;Right&quot;, &quot;HeadBack&quot;.' id="6" />
                                                                </Box>
                                                                <Box name="Dispatcher" robot="" id="3" tooltip="Dispatch an event carrying an information, depending on the information value. The information will be tested against all the values of the table, and the matching output will be stimulated!" bitmap_expanded="1" plugin="dispatcher_plugin" x="612" y="276">
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onInput_onStart(self, p):
		if(p == ("Right")):
			self.output_1(p)
		elif(p == ("Left")):
			self.output_2(p)
		else:
			self.onDefault()]]>
</content>
                                                                    </script>
                                                                    <pluginContent>
                                                                        <keywords>
                                                                            <keyword>&quot;Right&quot;</keyword>
                                                                            <keyword>&quot;Left&quot;</keyword>
                                                                        </keywords>
                                                                    </pluginContent>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Output name="onDefault" type="1" type_size="1" nature="2" inner="0" tooltip="If nothing has been matched in dispatcher." id="3" />
                                                                    <Output name="output_1" type="0" type_size="1" nature="2" inner="0" tooltip="" id="4" />
                                                                    <Output name="output_2" type="0" type_size="1" nature="2" inner="0" tooltip="This IO has been automatically added by box. Read box tooltip for more information." id="5" />
                                                                </Box>
                                                                <Box name="Counter" robot="" id="6" tooltip='This box count the number of time it is activated.&#x0A;If the number of times is less than the parameter &quot;counter threshold&quot; the output onContinued() is stimulated.&#x0A;Else the output onStopped() is stimulated.' bitmap_expanded="1" plugin="" x="436" y="84">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)


    def onLoad(self):
        self.count = 0
        pass

    def onUnload(self):
        pass

    def onInput_onStart(self):
        self.count = self.count + 1
        if (self.count > self.getParameter("counter threshold")):
            self.failed()
        else:
           self.tryAgain()
        pass

    def onInput_onStop(self):
        self.onUnload()
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="failed" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when stand behavior have failed." id="4" />
                                                                    <Output name="tryAgain" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent when stand behavior have to try again a motion." id="5" />
                                                                    <Parameter name="counter threshold" inherits_from_parent="0" content_type="1" value="3" default_value="3" min="0" max="5" tooltip="" id="6" />
                                                                </Box>
                                                                <Box name="DetectRobotPose" robot="" id="2" tooltip="Jump to a given frame (edit parameters to modify it) and stop the timeline parent at this index. Note that all the behavior keyframes will be loaded, and therefore the event logic will still be running." bitmap_expanded="1" plugin="" x="874" y="330">
                                                                    <bitmap>media/images/box/box-timeLine.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
        self.gotoAndStopParent(self.getParameter("Frame name"))

    def onInput_onStop(self):
        ""]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Parent timeline gotoAndStop when a signal is received on this input." id="2" />
                                                                    <Parameter name="Frame name" inherits_from_parent="0" content_type="3" value="DetectRobotPose" default_value="" custom_choice="0" tooltip="" id="3" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                <Link inputowner="4" indexofinput="2" outputowner="1" indexofoutput="4" />
                                                                <Link inputowner="3" indexofinput="2" outputowner="5" indexofoutput="6" />
                                                                <Link inputowner="5" indexofinput="2" outputowner="4" indexofoutput="4" />
                                                                <Link inputowner="6" indexofinput="2" outputowner="3" indexofoutput="4" />
                                                                <Link inputowner="0" indexofinput="5" outputowner="6" indexofoutput="4" />
                                                                <Link inputowner="1" indexofinput="2" outputowner="6" indexofoutput="5" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="3" indexofoutput="3" />
                                                                <Link inputowner="6" indexofinput="2" outputowner="3" indexofoutput="5" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                    <ActuatorList />
                                                </Timeline>
                                            </Box>
                                            <Box name="Number Edit" robot="" id="3" tooltip="Transmits the number you entered when the input is stimulated." bitmap_expanded="1" plugin="numberedit_plugin" x="270" y="64">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onInput_onStart(self):
		self.onStopped(0)]]>
</content>
                                                </script>
                                                <pluginContent>
                                                    <number>0</number>
                                                </pluginContent>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Transmits number." id="2" />
                                                <Output name="onStopped" type="2" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="3" />
                                            </Box>
                                            <Box name="Number Edit" robot="" id="1" tooltip="Transmits the number you entered when the input is stimulated." bitmap_expanded="1" plugin="numberedit_plugin" x="271" y="3">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onInput_onStart(self):
		self.onStopped(1)]]>
</content>
                                                </script>
                                                <pluginContent>
                                                    <number>1</number>
                                                </pluginContent>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Transmits number." id="2" />
                                                <Output name="onStopped" type="2" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="3" />
                                            </Box>
                                            <Box name="Number Edit" robot="" id="4" tooltip="Transmits the number you entered when the input is stimulated." bitmap_expanded="1" plugin="numberedit_plugin" x="272" y="135">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
	def __init__(self):
		GeneratedClass.__init__(self)

	def onInput_onStart(self):
		self.onStopped(-1)]]>
</content>
                                                </script>
                                                <pluginContent>
                                                    <number>-1</number>
                                                </pluginContent>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Transmits number." id="2" />
                                                <Output name="onStopped" type="2" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="3" />
                                            </Box>
                                            <Box name="FallManager" robot="" id="5" tooltip="Enable or disable the fall manager." bitmap_expanded="1" plugin="" x="123" y="267">
                                                <bitmap>media/images/box/sensors/fall_manager.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        proxy = ALProxy( "ALMotion" )
        proxy.setMotionConfig([["ENABLE_FALL_MANAGEMENT_PROTECTION",False]])
        pass

    def onInput_onEnable(self):
        proxy = ALProxy( "ALMotion" )
        proxy.setMotionConfig([["ENABLE_FALL_MANAGEMENT_PROTECTION",True]])

    def onInput_onDisable(self):
        self.onUnload()
        self.onStopped()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onEnable" type="1" type_size="1" nature="1" inner="0" tooltip="Enable the fall manager." id="2" />
                                                <Input name="onDisable" type="1" type_size="1" nature="1" inner="0" tooltip="Disable the fall manager." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Disable the fall manager." id="4" />
                                            </Box>
                                            <Link inputowner="3" indexofinput="2" outputowner="2" indexofoutput="5" />
                                            <Link inputowner="1" indexofinput="2" outputowner="2" indexofoutput="4" />
                                            <Link inputowner="4" indexofinput="2" outputowner="2" indexofoutput="6" />
                                            <Link inputowner="0" indexofinput="5" outputowner="1" indexofoutput="3" />
                                            <Link inputowner="0" indexofinput="5" outputowner="3" indexofoutput="3" />
                                            <Link inputowner="0" indexofinput="5" outputowner="4" indexofoutput="3" />
                                            <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="2" />
                                            <Link inputowner="5" indexofinput="3" outputowner="0" indexofoutput="2" />
                                            <Link inputowner="5" indexofinput="2" outputowner="2" indexofoutput="6" />
                                            <Link inputowner="5" indexofinput="2" outputowner="2" indexofoutput="5" />
                                            <Link inputowner="5" indexofinput="2" outputowner="2" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                </BehaviorLayer>
                                <ActuatorList />
                            </Timeline>
                        </Box>
                        <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="2" />
                    </Diagram>
                </BehaviorKeyframe>
            </BehaviorLayer>
            <ActuatorList />
        </Timeline>
    </Box>
</ChoregrapheProject>
